<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Generalized rewriting &mdash; Coq 8.18.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/ansi.css" type="text/css" />
      <link rel="stylesheet" href="../_static/coqdoc.css" type="text/css" />
      <link rel="stylesheet" href="../_static/notations.css" type="text/css" />
      <link rel="stylesheet" href="../_static/pre-text.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/notations.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Creating new tactics" href="../proofs/creating-tactics/index.html" />
    <link rel="prev" title="Programmable proof search" href="../proofs/automatic-tactics/auto.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Coq
          </a>
              <div class="version">
                8.18.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Introduction and Contents</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Specification language</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language/core/index.html">Core language</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../language/core/basic.html">Basic notions and conventions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/core/basic.html#syntax-and-lexical-conventions">Syntax and lexical conventions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/core/basic.html#syntax-conventions">Syntax conventions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/core/basic.html#lexical-conventions">Lexical conventions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/basic.html#essential-vocabulary">Essential vocabulary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/basic.html#settings">Settings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/core/basic.html#attributes">Attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/core/basic.html#flags-options-and-tables">Flags, Options and Tables</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/core/sorts.html">Sorts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../language/core/assumptions.html">Functions and assumptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/core/assumptions.html#binders">Binders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/assumptions.html#functions-fun-and-function-types-forall">Functions (fun) and function types (forall)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/assumptions.html#function-application">Function application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/assumptions.html#assumptions">Assumptions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/core/definitions.html">Definitions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/core/definitions.html#let-in-definitions">Let-in definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/definitions.html#type-cast">Type cast</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/definitions.html#top-level-definitions">Top-level definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/definitions.html#assertions-and-proofs">Assertions and proofs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/core/conversion.html">Conversion rules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/core/conversion.html#conversion">α-conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/conversion.html#reduction">β-reduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/conversion.html#delta-reduction-sect">δ-reduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/conversion.html#id4">ι-reduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/conversion.html#id7">ζ-reduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/conversion.html#expansion">η-expansion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/conversion.html#examples">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/conversion.html#proof-irrelevance">Proof Irrelevance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/conversion.html#convertibility">Convertibility</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/cic.html">Typing rules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/cic.html#the-terms">The terms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/cic.html#id6">Typing rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/cic.html#subtyping-rules">Subtyping rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/cic.html#the-calculus-of-inductive-constructions-with-impredicative-set">The Calculus of Inductive Constructions with impredicative Set</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/core/variants.html">Variants and the <code class="docutils literal notranslate"><span class="pre">match</span></code> construct</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/core/variants.html#id1">Variants</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/core/variants.html#private-matching-inductive-types">Private (matching) inductive types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/variants.html#definition-by-cases-match">Definition by cases: match</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/core/records.html">Record types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/core/records.html#defining-record-types">Defining record types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/records.html#constructing-records">Constructing records</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/records.html#accessing-fields-projections">Accessing fields (projections)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/records.html#settings-for-printing-records">Settings for printing records</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/records.html#primitive-projections">Primitive Projections</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/core/records.html#reduction">Reduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/core/records.html#compatibility-constants-for-projections">Compatibility Constants for Projections</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/core/inductive.html">Inductive types and recursive functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/core/inductive.html#inductive-types">Inductive types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/core/inductive.html#simple-inductive-types">Simple inductive types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/core/inductive.html#simple-indexed-inductive-types">Simple indexed inductive types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/core/inductive.html#parameterized-inductive-types">Parameterized inductive types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/core/inductive.html#mutually-defined-inductive-types">Mutually defined inductive types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/inductive.html#recursive-functions-fix">Recursive functions: fix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/inductive.html#top-level-recursive-functions">Top-level recursive functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/inductive.html#theory-of-inductive-definitions">Theory of inductive definitions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/core/inductive.html#types-of-inductive-objects">Types of inductive objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/core/inductive.html#well-formed-inductive-definitions">Well-formed inductive definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/core/inductive.html#destructors">Destructors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/core/inductive.html#fixpoint-definitions">Fixpoint definitions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/core/coinductive.html">Coinductive types and corecursive functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/core/coinductive.html#coinductive-types">Coinductive types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/core/coinductive.html#caveat">Caveat</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/coinductive.html#co-recursive-functions-cofix">Co-recursive functions: cofix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/coinductive.html#top-level-definitions-of-corecursive-functions">Top-level definitions of corecursive functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/core/sections.html">Sections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/core/sections.html#typing-rules-used-at-the-end-of-a-section">Typing rules used at the end of a section</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/core/modules.html">The Module System</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/core/modules.html#modules-and-module-types">Modules and module types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/modules.html#using-modules">Using modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/core/modules.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/modules.html#typing-modules">Typing Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/modules.html#qualified-names">Qualified names</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/modules.html#controlling-the-scope-of-commands-with-locality-attributes">Controlling the scope of commands with locality attributes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/core/primitive.html">Primitive objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/core/primitive.html#primitive-integers">Primitive Integers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/primitive.html#primitive-floats">Primitive Floats</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/primitive.html#primitive-arrays">Primitive Arrays</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="universe-polymorphism.html">Polymorphic Universes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="universe-polymorphism.html#general-presentation">General Presentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="universe-polymorphism.html#polymorphic-monomorphic">Polymorphic, Monomorphic</a></li>
<li class="toctree-l3"><a class="reference internal" href="universe-polymorphism.html#cumulative-noncumulative">Cumulative, NonCumulative</a><ul>
<li class="toctree-l4"><a class="reference internal" href="universe-polymorphism.html#specifying-cumulativity">Specifying cumulativity</a></li>
<li class="toctree-l4"><a class="reference internal" href="universe-polymorphism.html#cumulativity-weak-constraints">Cumulativity Weak Constraints</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="universe-polymorphism.html#global-and-local-universes">Global and local universes</a></li>
<li class="toctree-l3"><a class="reference internal" href="universe-polymorphism.html#conversion-and-unification">Conversion and unification</a></li>
<li class="toctree-l3"><a class="reference internal" href="universe-polymorphism.html#minimization">Minimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="universe-polymorphism.html#explicit-universes">Explicit Universes</a></li>
<li class="toctree-l3"><a class="reference internal" href="universe-polymorphism.html#printing-universes">Printing universes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="universe-polymorphism.html#polymorphic-definitions">Polymorphic definitions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="universe-polymorphism.html#universe-polymorphism-and-sections">Universe polymorphism and sections</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sprop.html">SProp (proof irrelevant propositions)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sprop.html#basic-constructs">Basic constructs</a></li>
<li class="toctree-l3"><a class="reference internal" href="sprop.html#encodings-for-strict-propositions">Encodings for strict propositions</a></li>
<li class="toctree-l3"><a class="reference internal" href="sprop.html#definitional-uip">Definitional UIP</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sprop.html#non-termination-with-uip">Non Termination with UIP</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sprop.html#lack-of-tactic-support">Lack of tactic support</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../language/extensions/index.html">Language extensions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../language/extensions/evars.html">Existential variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/evars.html#inferable-subterms">Inferable subterms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/evars.html#e-tactics-that-can-create-existential-variables">e* tactics that can create existential variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/evars.html#automatic-resolution-of-existential-variables">Automatic resolution of existential variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/evars.html#explicit-display-of-existential-instances-for-pretty-printing">Explicit display of existential instances for pretty-printing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/evars.html#solving-existential-variables-using-tactics">Solving existential variables using tactics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/extensions/implicit-arguments.html">Implicit arguments</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/implicit-arguments.html#the-different-kinds-of-implicit-arguments">The different kinds of implicit arguments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/implicit-arguments.html#implicit-arguments-inferable-from-the-knowledge-of-other-arguments-of-a-function">Implicit arguments inferable from the knowledge of other arguments of a function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/implicit-arguments.html#implicit-arguments-inferable-by-resolution">Implicit arguments inferable by resolution</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/implicit-arguments.html#maximal-and-non-maximal-insertion-of-implicit-arguments">Maximal and non-maximal insertion of implicit arguments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/implicit-arguments.html#trailing-implicit-arguments">Trailing Implicit Arguments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/implicit-arguments.html#casual-use-of-implicit-arguments">Casual use of implicit arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/implicit-arguments.html#declaration-of-implicit-arguments">Declaration of implicit arguments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/implicit-arguments.html#implicit-argument-binders">Implicit Argument Binders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/implicit-arguments.html#mode-for-automatic-declaration-of-implicit-arguments">Mode for automatic declaration of implicit arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/implicit-arguments.html#controlling-strict-implicit-arguments">Controlling strict implicit arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/implicit-arguments.html#controlling-contextual-implicit-arguments">Controlling contextual implicit arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/implicit-arguments.html#controlling-reversible-pattern-implicit-arguments">Controlling reversible-pattern implicit arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/implicit-arguments.html#controlling-the-insertion-of-implicit-arguments-not-followed-by-explicit-arguments">Controlling the insertion of implicit arguments not followed by explicit arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/implicit-arguments.html#combining-manual-declaration-and-automatic-declaration">Combining manual declaration and automatic declaration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/implicit-arguments.html#explicit-applications">Explicit applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/implicit-arguments.html#displaying-implicit-arguments">Displaying implicit arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/implicit-arguments.html#displaying-implicit-arguments-when-pretty-printing">Displaying implicit arguments when pretty-printing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/implicit-arguments.html#interaction-with-subtyping">Interaction with subtyping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/implicit-arguments.html#deactivation-of-implicit-arguments-for-parsing">Deactivation of implicit arguments for parsing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/implicit-arguments.html#implicit-types-of-variables">Implicit types of variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/implicit-arguments.html#implicit-generalization">Implicit generalization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/extensions/match.html">Extended pattern matching</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#variants-and-extensions-of-match">Variants and extensions of <code class="code Coq docutils literal notranslate"><span class="keyword"><span class="pre">match</span></span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/match.html#multiple-and-nested-pattern-matching">Multiple and nested pattern matching</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/match.html#pattern-matching-on-boolean-values-the-if-expression">Pattern-matching on boolean values: the if expression</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/match.html#irrefutable-patterns-the-destructuring-let-variants">Irrefutable patterns: the destructuring let variants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/match.html#controlling-pretty-printing-of-match-expressions">Controlling pretty-printing of match expressions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/match.html#conventions-about-unused-pattern-matching-variables">Conventions about unused pattern-matching variables</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#patterns">Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#multiple-patterns">Multiple patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#aliasing-subpatterns">Aliasing subpatterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#nested-patterns">Nested patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#disjunctive-patterns">Disjunctive patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#about-patterns-of-parametric-types">About patterns of parametric types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/match.html#parameters-in-patterns">Parameters in patterns</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#implicit-arguments-in-patterns">Implicit arguments in patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#matching-objects-of-dependent-types">Matching objects of dependent types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#understanding-dependencies-in-patterns">Understanding dependencies in patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#when-the-elimination-predicate-must-be-provided">When the elimination predicate must be provided</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/match.html#dependent-pattern-matching">Dependent pattern matching</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/match.html#multiple-dependent-pattern-matching">Multiple dependent pattern matching</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/match.html#patterns-in-in">Patterns in <code class="docutils literal notranslate"><span class="pre">in</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#using-pattern-matching-to-write-proofs">Using pattern matching to write proofs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#pattern-matching-on-inductive-objects-involving-local-definitions">Pattern-matching on inductive objects involving local definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#pattern-matching-and-coercions">Pattern-matching and coercions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#when-does-the-expansion-strategy-fail">When does the expansion strategy fail?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user-extensions/syntax-extensions.html">Syntax extensions and notation scopes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#notations">Notations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#basic-notations">Basic notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#precedences-and-associativity">Precedences and associativity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#complex-notations">Complex notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#simple-factorization-rules">Simple factorization rules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#use-of-notations-for-printing">Use of notations for printing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#the-infix-command">The Infix command</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#reserving-notations">Reserving notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#simultaneous-definition-of-terms-and-notations">Simultaneous definition of terms and notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#enabling-and-disabling-notations">Enabling and disabling notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#displaying-information-about-notations">Displaying information about notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#locating-notations">Locating notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#inheritance-of-the-properties-of-arguments-of-constants-bound-to-a-notation">Inheritance of the properties of arguments of constants bound to a notation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#notations-and-binders">Notations and binders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#notations-with-recursive-patterns">Notations with recursive patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#notations-with-recursive-patterns-involving-binders">Notations with recursive patterns involving binders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#predefined-entries">Predefined entries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#custom-entries">Custom entries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#syntax">Syntax</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#notation-scopes">Notation scopes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#global-interpretation-rules-for-notations">Global interpretation rules for notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#local-interpretation-rules-for-notations">Local interpretation rules for notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#the-type-scope-notation-scope">The <code class="docutils literal notranslate"><span class="pre">type_scope</span></code> notation scope</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#the-function-scope-notation-scope">The <code class="docutils literal notranslate"><span class="pre">function_scope</span></code> notation scope</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#notation-scopes-used-in-the-standard-library-of-coq">Notation scopes used in the standard library of Coq</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#displaying-information-about-scopes">Displaying information about scopes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#abbreviations">Abbreviations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#numbers-and-strings">Numbers and strings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#number-notations">Number notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#string-notations">String notations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#tactic-notations">Tactic Notations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/extensions/arguments-command.html">Setting properties of a function's arguments</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/arguments-command.html#manual-declaration-of-implicit-arguments">Manual declaration of implicit arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/arguments-command.html#automatic-declaration-of-implicit-arguments">Automatic declaration of implicit arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/arguments-command.html#renaming-implicit-arguments">Renaming implicit arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/arguments-command.html#binding-arguments-to-scopes">Binding arguments to scopes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/arguments-command.html#effects-of-arguments-on-unfolding">Effects of <code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Arguments</span></code> on unfolding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/arguments-command.html#bidirectionality-hints">Bidirectionality hints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="implicit-coercions.html">Implicit Coercions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="implicit-coercions.html#general-presentation">General Presentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="implicit-coercions.html#coercion-classes">Coercion Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="implicit-coercions.html#id1">Coercions</a></li>
<li class="toctree-l3"><a class="reference internal" href="implicit-coercions.html#reversible-coercions">Reversible Coercions</a></li>
<li class="toctree-l3"><a class="reference internal" href="implicit-coercions.html#identity-coercions">Identity Coercions</a></li>
<li class="toctree-l3"><a class="reference internal" href="implicit-coercions.html#inheritance-graph">Inheritance Graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="implicit-coercions.html#id2">Coercion Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="implicit-coercions.html#displaying-available-coercions">Displaying Available Coercions</a></li>
<li class="toctree-l3"><a class="reference internal" href="implicit-coercions.html#activating-the-printing-of-coercions">Activating the Printing of Coercions</a></li>
<li class="toctree-l3"><a class="reference internal" href="implicit-coercions.html#classes-as-records">Classes as Records</a></li>
<li class="toctree-l3"><a class="reference internal" href="implicit-coercions.html#coercions-and-sections">Coercions and Sections</a></li>
<li class="toctree-l3"><a class="reference internal" href="implicit-coercions.html#coercions-and-modules">Coercions and Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="implicit-coercions.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="type-classes.html">Typeclasses</a><ul>
<li class="toctree-l3"><a class="reference internal" href="type-classes.html#typeclass-and-instance-declarations">Typeclass and instance declarations</a></li>
<li class="toctree-l3"><a class="reference internal" href="type-classes.html#binding-typeclasses">Binding typeclasses</a></li>
<li class="toctree-l3"><a class="reference internal" href="type-classes.html#parameterized-instances">Parameterized instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="type-classes.html#sections-and-contexts">Sections and contexts</a></li>
<li class="toctree-l3"><a class="reference internal" href="type-classes.html#building-hierarchies">Building hierarchies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="type-classes.html#superclasses">Superclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="type-classes.html#substructures">Substructures</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="type-classes.html#command-summary">Command summary</a><ul>
<li class="toctree-l4"><a class="reference internal" href="type-classes.html#typeclasses-transparent-typeclasses-opaque">Typeclasses Transparent, Typeclasses Opaque</a></li>
<li class="toctree-l4"><a class="reference internal" href="type-classes.html#settings">Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="type-classes.html#typeclasses-eauto">Typeclasses eauto</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/extensions/canonical.html">Canonical Structures</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/canonical.html#declaration-of-canonical-structures">Declaration of canonical structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/canonical.html#notation-overloading">Notation overloading</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/canonical.html#derived-canonical-structures">Derived Canonical Structures</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/canonical.html#hierarchy-of-structures">Hierarchy of structures</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/canonical.html#compact-declaration-of-canonical-structures">Compact declaration of Canonical Structures</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="program.html">Program</a><ul>
<li class="toctree-l3"><a class="reference internal" href="program.html#elaborating-programs">Elaborating programs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="program.html#syntactic-control-over-equalities">Syntactic control over equalities</a></li>
<li class="toctree-l4"><a class="reference internal" href="program.html#program-definition">Program Definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="program.html#program-fixpoint">Program Fixpoint</a></li>
<li class="toctree-l4"><a class="reference internal" href="program.html#program-lemma">Program Lemma</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="program.html#solving-obligations">Solving obligations</a></li>
<li class="toctree-l3"><a class="reference internal" href="program.html#frequently-asked-questions">Frequently Asked Questions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../proof-engine/vernacular-commands.html">Commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/vernacular-commands.html#displaying">Displaying</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/vernacular-commands.html#query-commands">Query commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/vernacular-commands.html#requests-to-the-environment">Requests to the environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/vernacular-commands.html#printing-flags">Printing flags</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/vernacular-commands.html#loading-files">Loading files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/vernacular-commands.html#compiled-files">Compiled files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/vernacular-commands.html#load-paths">Load paths</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/vernacular-commands.html#extra-dependencies">Extra Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/vernacular-commands.html#backtracking">Backtracking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/vernacular-commands.html#quitting-and-debugging">Quitting and debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/vernacular-commands.html#controlling-display">Controlling display</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/vernacular-commands.html#printing-constructions-in-full">Printing constructions in full</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/vernacular-commands.html#controlling-typing-flags">Controlling Typing Flags</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/vernacular-commands.html#internal-registration-commands">Internal registration commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/vernacular-commands.html#exposing-constants-to-ocaml-libraries">Exposing constants to OCaml libraries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/vernacular-commands.html#inlining-hints-for-the-fast-reduction-machines">Inlining hints for the fast reduction machines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/vernacular-commands.html#registering-primitive-operations">Registering primitive operations</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Proofs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../proofs/writing-proofs/index.html">Basic proof writing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html">Proof mode</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#proof-state">Proof State</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#entering-and-exiting-proof-mode">Entering and exiting proof mode</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#proof-using-options">Proof using options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#name-a-set-of-section-hypotheses-for-proof-using">Name a set of section hypotheses for <code class="docutils literal notranslate"><span class="pre">Proof</span> <span class="pre">using</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#proof-modes">Proof modes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#managing-goals">Managing goals</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#focusing-goals">Focusing goals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#shelving-goals">Shelving goals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#reordering-goals">Reordering goals</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#proving-a-subgoal-as-a-separate-lemma-abstract">Proving a subgoal as a separate lemma: abstract</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#requesting-information">Requesting information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#showing-differences-between-proof-steps">Showing differences between proof steps</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#how-to-enable-diffs">How to enable diffs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#how-diffs-are-calculated">How diffs are calculated</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#show-proof-differences">&quot;Show Proof&quot; differences</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#delaying-solving-unification-constraints">Delaying solving unification constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#proof-maintenance">Proof maintenance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#controlling-proof-mode">Controlling proof mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#controlling-memory-usage">Controlling memory usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../proof-engine/tactics.html">Tactics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/tactics.html#common-elements-of-tactics">Common elements of tactics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/tactics.html#reserved-keywords">Reserved keywords</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/tactics.html#invocation-of-tactics">Invocation of tactics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/tactics.html#bindings">Bindings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/tactics.html#intro-patterns">Intro patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/tactics.html#occurrence-clauses">Occurrence clauses</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/tactics.html#applying-theorems">Applying theorems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/tactics.html#managing-the-local-context">Managing the local context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/tactics.html#controlling-the-proof-flow">Controlling the proof flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/tactics.html#classical-tactics">Classical tactics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/tactics.html#performance-oriented-tactic-variants">Performance-oriented tactic variants</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../proofs/writing-proofs/equality.html">Reasoning with equalities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/equality.html#tactics-for-simple-equalities">Tactics for simple equalities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/equality.html#rewriting-with-leibniz-and-setoid-equality">Rewriting with Leibniz and setoid equality</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/equality.html#rewriting-with-definitional-equality">Rewriting with definitional equality</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/equality.html#applying-conversion-rules">Applying conversion rules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/equality.html#fast-reduction-tactics-vm-compute-and-native-compute">Fast reduction tactics: vm_compute and native_compute</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/equality.html#computing-in-a-term-eval-and-eval">Computing in a term: eval and Eval</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/equality.html#controlling-reduction-strategies-and-the-conversion-algorithm">Controlling reduction strategies and the conversion algorithm</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html">Reasoning with inductive types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#applying-constructors">Applying constructors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#case-analysis">Case analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#induction">Induction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#equality-of-inductive-types">Equality of inductive types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#helper-tactics">Helper tactics</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#generation-of-induction-principles-with-scheme">Generation of induction principles with <code class="docutils literal notranslate"><span class="pre">Scheme</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#automatic-declaration-of-schemes">Automatic declaration of schemes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#combined-scheme">Combined Scheme</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#generation-of-inversion-principles-with-derive-inversion">Generation of inversion principles with <code class="docutils literal notranslate"><span class="pre">Derive</span></code> <code class="docutils literal notranslate"><span class="pre">Inversion</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#examples-of-dependent-destruction-dependent-induction">Examples of <code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">dependent</span> <span class="pre">destruction</span></code> / <code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">dependent</span> <span class="pre">induction</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#a-larger-example">A larger example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html">The <span class="smallcaps">SSReflect</span> proof language</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#introduction">Introduction</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#acknowledgments">Acknowledgments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#usage">Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#getting-started">Getting started</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#compatibility-issues">Compatibility issues</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#gallina-extensions">Gallina extensions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#pattern-assignment">Pattern assignment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#pattern-conditional">Pattern conditional</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#parametric-polymorphism">Parametric polymorphism</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#anonymous-arguments">Anonymous arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#wildcards">Wildcards</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#definitions">Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#abbreviations">Abbreviations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#basic-localization">Basic localization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#basic-tactics">Basic tactics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#bookkeeping">Bookkeeping</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#the-defective-tactics">The defective tactics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#discharge">Discharge</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#introduction-in-the-context">Introduction in the context</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#generation-of-equations">Generation of equations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#type-families">Type families</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#control-flow">Control flow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#indentation-and-bullets">Indentation and bullets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#terminators">Terminators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#selectors">Selectors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#iteration">Iteration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#localization">Localization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#structure">Structure</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#rewriting">Rewriting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#an-extended-rewrite-tactic">An extended rewrite tactic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#remarks-and-examples">Remarks and examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#rewriting-under-binders">Rewriting under binders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#locking-unlocking">Locking, unlocking</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#congruence">Congruence</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#contextual-patterns">Contextual patterns</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#syntax">Syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#matching-contextual-patterns">Matching contextual patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#patterns-for-recurrent-contexts">Patterns for recurrent contexts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#views-and-reflection">Views and reflection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#interpreting-eliminations">Interpreting eliminations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#interpreting-assumptions">Interpreting assumptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#interpreting-goals">Interpreting goals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#boolean-reflection">Boolean reflection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#the-reflect-predicate">The reflect predicate</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#general-mechanism-for-interpreting-goals-and-assumptions">General mechanism for interpreting goals and assumptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#interpreting-equivalences">Interpreting equivalences</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#declaring-new-hint-views">Declaring new Hint Views</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#multiple-views">Multiple views</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#synopsis-and-index">Synopsis and Index</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#items-and-switches">Items and switches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#tactics">Tactics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#tacticals">Tacticals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#commands">Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#settings">Settings</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../proofs/automatic-tactics/index.html">Automatic solvers and programmable tactics</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../proofs/automatic-tactics/logic.html">Solvers for logic and equality</a></li>
<li class="toctree-l2"><a class="reference internal" href="micromega.html">Micromega: solvers for arithmetic goals over ordered rings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="micromega.html#short-description-of-the-tactics">Short description of the tactics</a></li>
<li class="toctree-l3"><a class="reference internal" href="micromega.html#positivstellensatz-refutations"><em>Positivstellensatz</em> refutations</a></li>
<li class="toctree-l3"><a class="reference internal" href="micromega.html#lra-a-decision-procedure-for-linear-real-and-rational-arithmetic"><code class="docutils literal notranslate"><span class="pre">lra</span></code>: a decision procedure for linear real and rational arithmetic</a></li>
<li class="toctree-l3"><a class="reference internal" href="micromega.html#lia-a-tactic-for-linear-integer-arithmetic"><code class="docutils literal notranslate"><span class="pre">lia</span></code>: a tactic for linear integer arithmetic</a><ul>
<li class="toctree-l4"><a class="reference internal" href="micromega.html#high-level-view-of-lia">High level view of <code class="docutils literal notranslate"><span class="pre">lia</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="micromega.html#cutting-plane-proofs">Cutting plane proofs</a></li>
<li class="toctree-l4"><a class="reference internal" href="micromega.html#case-split">Case split</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="micromega.html#nra-a-proof-procedure-for-non-linear-arithmetic"><code class="docutils literal notranslate"><span class="pre">nra</span></code>: a proof procedure for non-linear arithmetic</a></li>
<li class="toctree-l3"><a class="reference internal" href="micromega.html#nia-a-proof-procedure-for-non-linear-integer-arithmetic"><code class="docutils literal notranslate"><span class="pre">nia</span></code>: a proof procedure for non-linear integer arithmetic</a></li>
<li class="toctree-l3"><a class="reference internal" href="micromega.html#psatz-a-proof-procedure-for-non-linear-arithmetic"><code class="docutils literal notranslate"><span class="pre">psatz</span></code>: a proof procedure for non-linear arithmetic</a></li>
<li class="toctree-l3"><a class="reference internal" href="micromega.html#zify-pre-processing-of-arithmetic-goals"><code class="docutils literal notranslate"><span class="pre">zify</span></code>: pre-processing of arithmetic goals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ring.html">ring and field: solvers for polynomial and rational equations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ring.html#what-does-this-tactic-do">What does this tactic do?</a></li>
<li class="toctree-l3"><a class="reference internal" href="ring.html#the-variables-map">The variables map</a></li>
<li class="toctree-l3"><a class="reference internal" href="ring.html#is-it-automatic">Is it automatic?</a></li>
<li class="toctree-l3"><a class="reference internal" href="ring.html#concrete-usage-in-coq">Concrete usage in Coq</a></li>
<li class="toctree-l3"><a class="reference internal" href="ring.html#adding-a-ring-structure">Adding a ring structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="ring.html#how-does-it-work">How does it work?</a></li>
<li class="toctree-l3"><a class="reference internal" href="ring.html#dealing-with-fields">Dealing with fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="ring.html#adding-a-new-field-structure">Adding a new field structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="ring.html#history-of-ring">History of ring</a></li>
<li class="toctree-l3"><a class="reference internal" href="ring.html#discussion">Discussion</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="nsatz.html">Nsatz: a solver for equalities in integral domains</a><ul>
<li class="toctree-l3"><a class="reference internal" href="nsatz.html#more-about-nsatz">More about <code class="docutils literal notranslate"><span class="pre">nsatz</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../proofs/automatic-tactics/auto.html">Programmable proof search</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../proofs/automatic-tactics/auto.html#tactics">Tactics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/automatic-tactics/auto.html#hint-databases">Hint databases</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proofs/automatic-tactics/auto.html#creating-hint-databases">Creating hint databases</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proofs/automatic-tactics/auto.html#hint-databases-defined-in-the-coq-standard-library">Hint databases defined in the Coq standard library</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/automatic-tactics/auto.html#creating-hints">Creating Hints</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proofs/automatic-tactics/auto.html#hint-locality">Hint locality</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/automatic-tactics/auto.html#setting-implicit-automation-tactics">Setting implicit automation tactics</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Generalized rewriting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction-to-generalized-rewriting">Introduction to generalized rewriting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#relations-and-morphisms">Relations and morphisms</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adding-new-relations-and-morphisms">Adding new relations and morphisms</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rewriting-and-nonreflexive-relations">Rewriting and nonreflexive relations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rewriting-and-nonsymmetric-relations">Rewriting and nonsymmetric relations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rewriting-in-ambiguous-setoid-contexts">Rewriting in ambiguous setoid contexts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rewriting-with-type-valued-relations">Rewriting with <code class="docutils literal notranslate"><span class="pre">Type</span></code> valued relations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#declaring-rewrite-relations">Declaring rewrite relations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#commands-and-tactics">Commands and tactics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#first-class-setoids-and-morphisms">First class setoids and morphisms</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tactics-enabled-on-user-provided-relations">Tactics enabled on user provided relations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#printing-relations-and-morphisms">Printing relations and morphisms</a></li>
<li class="toctree-l4"><a class="reference internal" href="#deprecated-syntax-and-backward-incompatibilities">Deprecated syntax and backward incompatibilities</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#extensions">Extensions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rewriting-under-binders">Rewriting under binders</a></li>
<li class="toctree-l4"><a class="reference internal" href="#subrelations">Subrelations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#constant-unfolding">Constant unfolding</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#strategies-for-rewriting">Strategies for rewriting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#definitions">Definitions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../proofs/creating-tactics/index.html">Creating new tactics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../proof-engine/ltac.html">Ltac</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ltac.html#syntax">Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ltac.html#values">Values</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#syntactic-values">Syntactic values</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#substitution">Substitution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#local-definitions-let">Local definitions: let</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#function-construction-and-application">Function construction and application</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#tactics-in-terms">Tactics in terms</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ltac.html#goal-selectors">Goal selectors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ltac.html#processing-multiple-goals">Processing multiple goals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ltac.html#branching-and-backtracking">Branching and backtracking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ltac.html#control-flow">Control flow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#sequence">Sequence: ;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#do-loop">Do loop</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#repeat-loop">Repeat loop</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#catching-errors-try">Catching errors: try</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#conditional-branching-tryif">Conditional branching: tryif</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ltac.html#alternatives">Alternatives</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#branching-with-backtracking">Branching with backtracking: +</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#local-application-of-tactics">Local application of tactics: [&gt; ... ]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#first-tactic-to-succeed">First tactic to succeed</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#solving">Solving</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#first-tactic-to-make-progress">First tactic to make progress: ||</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#detecting-progress">Detecting progress</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ltac.html#success-and-failure">Success and failure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#checking-for-success-assert-succeeds">Checking for success: assert_succeeds</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#checking-for-failure-assert-fails">Checking for failure: assert_fails</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#failing">Failing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#soft-cut-once">Soft cut: once</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#checking-for-a-single-success-exactly-once">Checking for a single success: exactly_once</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ltac.html#manipulating-values">Manipulating values</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#pattern-matching-on-terms-match">Pattern matching on terms: match</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#pattern-matching-on-goals-and-hypotheses-match-goal">Pattern matching on goals and hypotheses: match goal</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#filling-a-term-context">Filling a term context</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#generating-fresh-hypothesis-names">Generating fresh hypothesis names</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#computing-in-a-term-eval">Computing in a term: eval</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#getting-the-type-of-a-term">Getting the type of a term</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#manipulating-untyped-terms-type-term">Manipulating untyped terms: type_term</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#counting-goals-numgoals">Counting goals: numgoals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#testing-boolean-expressions-guard">Testing boolean expressions: guard</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#checking-properties-of-terms">Checking properties of terms</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ltac.html#timing">Timing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#timeout">Timeout</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#timing-a-tactic">Timing a tactic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#timing-a-tactic-that-evaluates-to-a-term-time-constr">Timing a tactic that evaluates to a term: time_constr</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ltac.html#print-identity-tactic-idtac">Print/identity tactic: idtac</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ltac.html#tactic-toplevel-definitions">Tactic toplevel definitions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#defining-ltac-symbols">Defining <code class="docutils literal notranslate"><span class="pre">L</span></code><sub>tac</sub> symbols</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#printing-ltac-tactics">Printing <code class="docutils literal notranslate"><span class="pre">L</span></code><sub>tac</sub> tactics</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ltac.html#examples-of-using-ltac">Examples of using <code class="docutils literal notranslate"><span class="pre">L</span></code><sub>tac</sub></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#proof-that-the-natural-numbers-have-at-least-two-elements">Proof that the natural numbers have at least two elements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#proving-that-a-list-is-a-permutation-of-a-second-list">Proving that a list is a permutation of a second list</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#deciding-intuitionistic-propositional-logic">Deciding intuitionistic propositional logic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#deciding-type-isomorphisms">Deciding type isomorphisms</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ltac.html#debugging-ltac-tactics">Debugging <code class="docutils literal notranslate"><span class="pre">L</span></code><sub>tac</sub> tactics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#backtraces">Backtraces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#tracing-execution">Tracing execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#interactive-debugger">Interactive debugger</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#profiling-ltac-tactics">Profiling <code class="docutils literal notranslate"><span class="pre">L</span></code><sub>tac</sub> tactics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac.html#run-time-optimization-tactic">Run-time optimization tactic</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../proof-engine/ltac2.html">Ltac2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ltac2.html#general-design">General design</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ltac2.html#ml-component">ML component</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#type-syntax">Type Syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#type-declarations">Type declarations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#apis">APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#term-syntax">Term Syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#ltac2-definitions">Ltac2 Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#printing-ltac2-tactics">Printing Ltac2 tactics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#reduction">Reduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#typing">Typing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#effects">Effects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ltac2.html#meta-programming">Meta-programming</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#id3">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#quotations">Quotations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#term-antiquotations">Term Antiquotations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#match-over-terms">Match over terms</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#match-over-goals">Match over goals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#match-on-values">Match on values</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ltac2.html#notations">Notations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#abbreviations">Abbreviations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#defining-tactics">Defining tactics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#syntactic-classes">Syntactic classes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ltac2.html#evaluation">Evaluation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ltac2.html#debug">Debug</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ltac2.html#compatibility-layer-with-ltac1">Compatibility layer with Ltac1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#ltac1-from-ltac2">Ltac1 from Ltac2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#ltac2-from-ltac1">Ltac2 from Ltac1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#switching-between-ltac-languages">Switching between Ltac languages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proof-engine/ltac2.html#transition-from-ltac1">Transition from Ltac1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#syntax-changes">Syntax changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#tactic-delay">Tactic delay</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#variable-binding">Variable binding</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proof-engine/ltac2.html#exception-catching">Exception catching</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using Coq</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../using/libraries/index.html">Libraries and plugins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../language/coq-library.html">The Coq library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/coq-library.html#the-prelude">The prelude</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#notations">Notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#logic">Logic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#datatypes">Datatypes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#specification">Specification</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#basic-arithmetic">Basic Arithmetic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#well-founded-recursion">Well-founded recursion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#accessing-the-type-level">Accessing the Type level</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#tactics">Tactics</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/coq-library.html#the-standard-library">The standard library</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#survey">Survey</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#peanos-arithmetic-nat">Peano’s arithmetic (nat)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#notations-for-integer-arithmetic">Notations for integer arithmetic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#real-numbers-library">Real numbers library</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#list-library">List library</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#floats-library">Floats library</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/coq-library.html#users-contributions">Users’ contributions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="extraction.html">Program extraction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="extraction.html#generating-ml-code">Generating ML Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="extraction.html#extraction-options">Extraction Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="extraction.html#setting-the-target-language">Setting the target language</a></li>
<li class="toctree-l4"><a class="reference internal" href="extraction.html#inlining-and-optimizations">Inlining and optimizations</a></li>
<li class="toctree-l4"><a class="reference internal" href="extraction.html#extra-elimination-of-useless-arguments">Extra elimination of useless arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="extraction.html#realizing-axioms">Realizing axioms</a></li>
<li class="toctree-l4"><a class="reference internal" href="extraction.html#realizing-inductive-types">Realizing inductive types</a></li>
<li class="toctree-l4"><a class="reference internal" href="extraction.html#avoiding-conflicts-with-existing-filenames">Avoiding conflicts with existing filenames</a></li>
<li class="toctree-l4"><a class="reference internal" href="extraction.html#additional-settings">Additional settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="extraction.html#differences-between-coq-and-ml-type-systems">Differences between Coq and ML type systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="extraction.html#some-examples">Some examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="extraction.html#a-detailed-example-euclidean-division">A detailed example: Euclidean division</a></li>
<li class="toctree-l4"><a class="reference internal" href="extraction.html#extraction-s-horror-museum">Extraction's horror museum</a></li>
<li class="toctree-l4"><a class="reference internal" href="extraction.html#users-contributions">Users' Contributions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="miscellaneous-extensions.html">Program derivation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using/libraries/funind.html">Functional induction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../using/libraries/funind.html#advanced-recursive-functions">Advanced recursive functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using/libraries/funind.html#tactics">Tactics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using/libraries/funind.html#generation-of-induction-principles-with-functional-scheme">Generation of induction principles with <code class="docutils literal notranslate"><span class="pre">Functional</span></code> <code class="docutils literal notranslate"><span class="pre">Scheme</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../using/libraries/writing.html">Writing Coq libraries and plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../using/libraries/writing.html#deprecating-library-objects-or-tactics">Deprecating library objects or tactics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../using/tools/index.html">Command-line and graphical tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/utilities.html">Building Coq Projects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/utilities.html#coq-configuration-basics">Coq configuration basics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#installing-coq-and-coq-packages-with-opam">Installing Coq and Coq packages with opam</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#setup-for-working-on-your-own-projects">Setup for working on your own projects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#building-a-project-with-coqproject-overview">Building a project with _CoqProject (overview)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#logical-paths-and-the-load-path">Logical paths and the load path</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#modifying-multiple-interdependent-projects-at-the-same-time">Modifying multiple interdependent projects at the same time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#installed-and-uninstalled-packages">Installed and uninstalled packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#upgrading-to-a-new-version-of-coq">Upgrading to a new version of Coq</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/utilities.html#building-a-coq-project-with-coq-makefile-details">Building a Coq project with coq_makefile (details)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#comments">Comments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/utilities.html#building-a-coq-project-with-dune">Building a Coq project with Dune</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/utilities.html#coqdep-computing-module-dependencies">coqdep: Computing Module dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/utilities.html#split-compilation-of-native-computation-files">Split compilation of native computation files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/utilities.html#using-coq-as-a-library">Using Coq as a library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/utilities.html#embedded-coq-phrases-inside-latex-documents">Embedded Coq phrases inside <span class="smallcaps">LaTeX</span> documents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/utilities.html#man-pages">Man pages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/coq-commands.html">Coq commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coq-commands.html#interactive-use-coqtop">Interactive use (coqtop)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coq-commands.html#batch-compilation-coqc">Batch compilation (coqc)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coq-commands.html#customization-at-launch-time">Customization at launch time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coq-commands.html#command-parameters">Command parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coq-commands.html#coqrc-start-up-script"><code class="docutils literal notranslate"><span class="pre">coqrc</span></code> start up script</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coq-commands.html#environment-variables">Environment variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coq-commands.html#command-line-options">Command line options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coq-commands.html#compiled-interfaces-produced-using-vos">Compiled interfaces (produced using <code class="docutils literal notranslate"><span class="pre">-vos</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coq-commands.html#compiled-libraries-checker-coqchk">Compiled libraries checker (coqchk)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../using/tools/coqdoc.html">Documenting Coq files with coqdoc</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../using/tools/coqdoc.html#principles">Principles</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../using/tools/coqdoc.html#coq-material-inside-documentation">Coq material inside documentation.</a></li>
<li class="toctree-l4"><a class="reference internal" href="../using/tools/coqdoc.html#pretty-printing">Pretty-printing.</a></li>
<li class="toctree-l4"><a class="reference internal" href="../using/tools/coqdoc.html#sections">Sections</a></li>
<li class="toctree-l4"><a class="reference internal" href="../using/tools/coqdoc.html#lists">Lists.</a></li>
<li class="toctree-l4"><a class="reference internal" href="../using/tools/coqdoc.html#rules">Rules.</a></li>
<li class="toctree-l4"><a class="reference internal" href="../using/tools/coqdoc.html#emphasis">Emphasis.</a></li>
<li class="toctree-l4"><a class="reference internal" href="../using/tools/coqdoc.html#escaping-to-latex-and-html">Escaping to <span class="smallcaps">LaTeX</span> and HTML.</a></li>
<li class="toctree-l4"><a class="reference internal" href="../using/tools/coqdoc.html#verbatim">Verbatim</a></li>
<li class="toctree-l4"><a class="reference internal" href="../using/tools/coqdoc.html#hyperlinks">Hyperlinks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../using/tools/coqdoc.html#hiding-showing-parts-of-the-source">Hiding / Showing parts of the source</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../using/tools/coqdoc.html#usage">Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../using/tools/coqdoc.html#command-line-options">Command line options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../using/tools/coqdoc.html#the-coqdoc-latex-style-file">The coqdoc <span class="smallcaps">LaTeX</span> style file</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/coqide.html">CoqIDE</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coqide.html#managing-files-and-buffers-basic-editing">Managing files and buffers, basic editing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coqide.html#running-coq-scripts">Running Coq scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coqide.html#asynchronous-mode">Asynchronous mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coqide.html#commands-and-templates">Commands and templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coqide.html#queries">Queries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coqide.html#compilation">Compilation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coqide.html#customizations">Customizations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coqide.html#preferences">Preferences</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coqide.html#key-bindings">Key bindings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coqide.html#using-unicode-symbols">Using Unicode symbols</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coqide.html#displaying-unicode-symbols">Displaying Unicode symbols</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coqide.html#bindings-for-input-of-unicode-symbols">Bindings for input of Unicode symbols</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coqide.html#adding-custom-bindings">Adding custom bindings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coqide.html#character-encoding-for-saved-files">Character encoding for saved files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coqide.html#debugger">Debugger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coqide.html#breakpoints">Breakpoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coqide.html#call-stack-and-variables">Call Stack and Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coqide.html#supported-use-cases">Supported use cases</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="parallel-proof-processing.html">Asynchronous and Parallel Proof Processing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="parallel-proof-processing.html#proof-annotations">Proof annotations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="parallel-proof-processing.html#automatic-suggestion-of-proof-annotations">Automatic suggestion of proof annotations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="parallel-proof-processing.html#proof-blocks-and-error-resilience">Proof blocks and error resilience</a><ul>
<li class="toctree-l4"><a class="reference internal" href="parallel-proof-processing.html#caveats">Caveats</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="parallel-proof-processing.html#interactive-mode">Interactive mode</a><ul>
<li class="toctree-l4"><a class="reference internal" href="parallel-proof-processing.html#id3">Caveats</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="parallel-proof-processing.html#batch-mode">Batch mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="parallel-proof-processing.html#limiting-the-number-of-parallel-workers">Limiting the number of parallel workers</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendix/history-and-changes/index.html">History and recent changes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../history.html">Early history of Coq</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../history.html#historical-roots">Historical roots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../history.html#versions-1-to-5">Versions 1 to 5</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../history.html#version-1">Version 1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../history.html#version-2">Version 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../history.html#version-3">Version 3</a></li>
<li class="toctree-l4"><a class="reference internal" href="../history.html#version-4">Version 4</a></li>
<li class="toctree-l4"><a class="reference internal" href="../history.html#version-5">Version 5</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../history.html#versions-6">Versions 6</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../history.html#version-6-1">Version 6.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../history.html#version-6-2">Version 6.2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../history.html#version-6-3">Version 6.3</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../history.html#versions-7">Versions 7</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../history.html#summary-of-changes">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../history.html#details-of-changes-in-7-0-and-7-1">Details of changes in 7.0 and 7.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../history.html#details-of-changes-in-7-2">Details of changes in 7.2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../history.html#details-of-changes-in-7-3">Details of changes in 7.3</a></li>
<li class="toctree-l4"><a class="reference internal" href="../history.html#details-of-changes-in-7-4">Details of changes in 7.4</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html">Recent changes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-18">Version 8.18</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#summary-of-changes">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-18-0">Changes in 8.18.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-17">Version 8.17</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id141">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-17-0">Changes in 8.17.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-17-1">Changes in 8.17.1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-16">Version 8.16</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id295">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-16-0">Changes in 8.16.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-16-1">Changes in 8.16.1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-15">Version 8.15</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id458">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-15-0">Changes in 8.15.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-15-1">Changes in 8.15.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-15-2">Changes in 8.15.2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-14">Version 8.14</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id686">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-14-0">Changes in 8.14.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-14-1">Changes in 8.14.1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-13">Version 8.13</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id882">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-13-beta1">Changes in 8.13+beta1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-13-0">Changes in 8.13.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-13-1">Changes in 8.13.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-13-2">Changes in 8.13.2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-12">Version 8.12</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1046">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-12-beta1">Changes in 8.12+beta1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-12-0">Changes in 8.12.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-12-1">Changes in 8.12.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-12-2">Changes in 8.12.2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-11">Version 8.11</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1352">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-11-beta1">Changes in 8.11+beta1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-11-0">Changes in 8.11.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-11-1">Changes in 8.11.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-11-2">Changes in 8.11.2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-10">Version 8.10</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1490">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#other-changes-in-8-10-beta1">Other changes in 8.10+beta1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-10-beta2">Changes in 8.10+beta2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-10-beta3">Changes in 8.10+beta3</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-10-0">Changes in 8.10.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-10-1">Changes in 8.10.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-10-2">Changes in 8.10.2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-9">Version 8.9</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1637">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-9-beta1">Details of changes in 8.9+beta1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-8-0">Changes in 8.8.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-8-1">Changes in 8.8.1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-8">Version 8.8</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1639">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-8-beta1">Details of changes in 8.8+beta1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-8-0">Details of changes in 8.8.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-8-1">Details of changes in 8.8.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-8-2">Details of changes in 8.8.2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-7">Version 8.7</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1640">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#potential-compatibility-issues">Potential compatibility issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-7-beta1">Details of changes in 8.7+beta1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-7-beta2">Details of changes in 8.7+beta2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-7-0">Details of changes in 8.7.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-7-1">Details of changes in 8.7.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-7-2">Details of changes in 8.7.2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-6">Version 8.6</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1641">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#potential-sources-of-incompatibilities">Potential sources of incompatibilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-6beta1">Details of changes in 8.6beta1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-6">Details of changes in 8.6</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-6-1">Details of changes in 8.6.1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-5">Version 8.5</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1642">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1643">Potential sources of incompatibilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-5beta1">Details of changes in 8.5beta1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-5beta2">Details of changes in 8.5beta2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-5beta3">Details of changes in 8.5beta3</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-5">Details of changes in 8.5</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-5pl1">Details of changes in 8.5pl1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-5pl2">Details of changes in 8.5pl2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-5pl3">Details of changes in 8.5pl3</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-4">Version 8.4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1644">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1646">Potential sources of incompatibilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-4beta">Details of changes in 8.4beta</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-4beta2">Details of changes in 8.4beta2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-4">Details of changes in 8.4</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-3">Version 8.3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1647">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes">Details of changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-2">Version 8.2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1648">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1649">Details of changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-1">Version 8.1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1650">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-1beta">Details of changes in 8.1beta</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-1gamma">Details of changes in 8.1gamma</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-1">Details of changes in 8.1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-0">Version 8.0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1651">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-0beta-old-syntax">Details of changes in 8.0beta old syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-0beta-new-syntax">Details of changes in 8.0beta new syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-0">Details of changes in 8.0</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/indexes/index.html">Indexes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../std-glossindex.html">Glossary index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../coq-cmdindex.html">Command index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../coq-tacindex.html">Tactic index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../coq-attrindex.html">Attribute index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../coq-optindex.html">Flags, options and tables index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../coq-exnindex.html">Errors and warnings index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../genindex.html">General index</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../zebibliography.html">Bibliography</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Coq</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../proofs/automatic-tactics/index.html">Automatic solvers and programmable tactics</a> &raquo;</li>
      <li>Generalized rewriting</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/coq/coq/blob/master/doc/sphinx/addendum/generalized-rewriting.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="math-preamble math notranslate nohighlight">
\[\begin{split}\newcommand{\as}{\kw{as}}
\newcommand{\case}{\kw{case}}
\newcommand{\cons}{\textsf{cons}}
\newcommand{\consf}{\textsf{consf}}
\newcommand{\emptyf}{\textsf{emptyf}}
\newcommand{\End}{\kw{End}}
\newcommand{\kwend}{\kw{end}}
\newcommand{\even}{\textsf{even}}
\newcommand{\evenO}{\textsf{even}_\textsf{O}}
\newcommand{\evenS}{\textsf{even}_\textsf{S}}
\newcommand{\Fix}{\kw{Fix}}
\newcommand{\fix}{\kw{fix}}
\newcommand{\for}{\textsf{for}}
\newcommand{\forest}{\textsf{forest}}
\newcommand{\Functor}{\kw{Functor}}
\newcommand{\In}{\kw{in}}
\newcommand{\ind}[3]{\kw{Ind}~[#1]\left(#2\mathrm{~:=~}#3\right)}
\newcommand{\Indp}[4]{\kw{Ind}_{#4}[#1](#2:=#3)}
\newcommand{\Indpstr}[5]{\kw{Ind}_{#4}[#1](#2:=#3)/{#5}}
\newcommand{\injective}{\kw{injective}}
\newcommand{\kw}[1]{\textsf{#1}}
\newcommand{\length}{\textsf{length}}
\newcommand{\letin}[3]{\kw{let}~#1:=#2~\kw{in}~#3}
\newcommand{\List}{\textsf{list}}
\newcommand{\lra}{\longrightarrow}
\newcommand{\Match}{\kw{match}}
\newcommand{\Mod}[3]{{\kw{Mod}}({#1}:{#2}\,\zeroone{:={#3}})}
\newcommand{\ModImp}[3]{{\kw{Mod}}({#1}:{#2}:={#3})}
\newcommand{\ModA}[2]{{\kw{ModA}}({#1}=={#2})}
\newcommand{\ModS}[2]{{\kw{Mod}}({#1}:{#2})}
\newcommand{\ModType}[2]{{\kw{ModType}}({#1}:={#2})}
\newcommand{\mto}{.\;}
\newcommand{\nat}{\textsf{nat}}
\newcommand{\Nil}{\textsf{nil}}
\newcommand{\nilhl}{\textsf{nil\_hl}}
\newcommand{\nO}{\textsf{O}}
\newcommand{\node}{\textsf{node}}
\newcommand{\nS}{\textsf{S}}
\newcommand{\odd}{\textsf{odd}}
\newcommand{\oddS}{\textsf{odd}_\textsf{S}}
\newcommand{\ovl}[1]{\overline{#1}}
\newcommand{\Pair}{\textsf{pair}}
\newcommand{\plus}{\mathsf{plus}}
\newcommand{\SProp}{\textsf{SProp}}
\newcommand{\Prop}{\textsf{Prop}}
\newcommand{\return}{\kw{return}}
\newcommand{\Set}{\textsf{Set}}
\newcommand{\Sort}{\mathcal{S}}
\newcommand{\Str}{\textsf{Stream}}
\newcommand{\Struct}{\kw{Struct}}
\newcommand{\subst}[3]{#1\{#2/#3\}}
\newcommand{\tl}{\textsf{tl}}
\newcommand{\tree}{\textsf{tree}}
\newcommand{\trii}{\triangleright_\iota}
\newcommand{\Type}{\textsf{Type}}
\newcommand{\WEV}[3]{\mbox{$#1[] \vdash #2 \lra  #3$}}
\newcommand{\WEVT}[3]{\mbox{$#1[] \vdash #2 \lra$}\\ \mbox{$ #3$}}
\newcommand{\WF}[2]{{\mathcal{W\!F}}(#1)[#2]}
\newcommand{\WFE}[1]{\WF{E}{#1}}
\newcommand{\WFT}[2]{#1[] \vdash {\mathcal{W\!F}}(#2)}
\newcommand{\WFTWOLINES}[2]{{\mathcal{W\!F}}\begin{array}{l}(#1)\\\mbox{}[{#2}]\end{array}}
\newcommand{\with}{\kw{with}}
\newcommand{\WS}[3]{#1[] \vdash #2 &lt;: #3}
\newcommand{\WSE}[2]{\WS{E}{#1}{#2}}
\newcommand{\WT}[4]{#1[#2] \vdash #3 : #4}
\newcommand{\WTE}[3]{\WT{E}{#1}{#2}{#3}}
\newcommand{\WTEG}[2]{\WTE{\Gamma}{#1}{#2}}
\newcommand{\WTM}[3]{\WT{#1}{}{#2}{#3}}
\newcommand{\zeroone}[1]{[{#1}]}
\end{split}\]</div>
<section id="generalized-rewriting">
<span id="generalizedrewriting"></span><h1>Generalized rewriting<a class="headerlink" href="#generalized-rewriting" title="Permalink to this headline">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author</dt>
<dd class="field-odd"><p>Matthieu Sozeau</p>
</dd>
</dl>
<p>This chapter presents the extension of several equality related
tactics to work over user-defined structures (called setoids) that are
equipped with ad-hoc equivalence relations meant to behave as
equalities. Actually, the tactics have also been generalized to
relations weaker than equivalences (e.g. rewriting systems). The
toolbox also extends the automatic rewriting capabilities of the
system, allowing the specification of custom strategies for rewriting.</p>
<p>This documentation is adapted from the previous setoid documentation
by Claudio Sacerdoti Coen (based on previous work by Clément Renard).
The new implementation is a drop-in replacement for the old one
<a class="footnote-reference brackets" href="#tabareau" id="id1">1</a>, hence most of the documentation still applies.</p>
<p>The work is a complete rewrite of the previous implementation, based
on the typeclass infrastructure. It also improves on and generalizes
the previous implementation in several ways:</p>
<ul class="simple">
<li><p>User-extensible algorithm. The algorithm is separated into two parts:
generation of the rewriting constraints (written in ML) and solving
these constraints using typeclass resolution. As typeclass
resolution is extensible using tactics, this allows users to define
general ways to solve morphism constraints.</p></li>
<li><p>Subrelations. An example extension to the base algorithm is the
ability to define one relation as a subrelation of another so that
morphism declarations on one relation can be used automatically for
the other. This is done purely using tactics and typeclass search.</p></li>
<li><p>Rewriting under binders. It is possible to rewrite under binders in
the new implementation, if one provides the proper morphisms. Again,
most of the work is handled in the tactics.</p></li>
<li><p>First-class morphisms and signatures. Signatures and morphisms are
ordinary Coq terms, hence they can be manipulated inside Coq, put
inside structures and lemmas about them can be proved inside the
system. Higher-order morphisms are also allowed.</p></li>
<li><p>Performance. The implementation is based on a depth-first search for
the first solution to a set of constraints which can be as fast as
linear in the size of the term, and the size of the proof term is
linear in the size of the original term. Besides, the extensibility
allows the user to customize the proof search if necessary.</p></li>
</ul>
<dl class="footnote brackets">
<dt class="label" id="tabareau"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Nicolas Tabareau helped with the gluing.</p>
</dd>
</dl>
<section id="introduction-to-generalized-rewriting">
<h2>Introduction to generalized rewriting<a class="headerlink" href="#introduction-to-generalized-rewriting" title="Permalink to this headline">¶</a></h2>
<section id="relations-and-morphisms">
<h3>Relations and morphisms<a class="headerlink" href="#relations-and-morphisms" title="Permalink to this headline">¶</a></h3>
<p>A parametric <em>relation</em> <code class="docutils literal notranslate"><span class="pre">R</span></code> is any term of type
<code class="docutils literal notranslate"><span class="pre">forall</span> <span class="pre">(x1</span> <span class="pre">:</span> <span class="pre">T1)</span> <span class="pre">...</span> <span class="pre">(xn</span> <span class="pre">:</span> <span class="pre">Tn),</span> <span class="pre">relation</span> <span class="pre">A</span></code>.
The expression <code class="docutils literal notranslate"><span class="pre">A</span></code>, which depends on <code class="docutils literal notranslate"><span class="pre">x1</span> <span class="pre">...</span> <span class="pre">xn</span></code> , is called the <em>carrier</em>
of the relation and <code class="docutils literal notranslate"><span class="pre">R</span></code> is said to be a relation over <code class="docutils literal notranslate"><span class="pre">A</span></code>; the list
<code class="docutils literal notranslate"><span class="pre">x1,...,xn</span></code> is the (possibly empty) list of parameters of the relation.</p>
<div class="admonition note">
<p class="admonition-title">Example: Parametric relation</p>
<p>It is possible to implement finite sets of elements of type <code class="docutils literal notranslate"><span class="pre">A</span></code> as
unordered lists of elements of type <code class="docutils literal notranslate"><span class="pre">A</span></code>.
The function <code class="docutils literal notranslate"><span class="pre">set_eq:</span> <span class="pre">forall</span> <span class="pre">(A</span> <span class="pre">:</span> <span class="pre">Type),</span> <span class="pre">relation</span> <span class="pre">(list</span> <span class="pre">A)</span></code>
satisfied by two lists with the same elements is a parametric relation
over <code class="docutils literal notranslate"><span class="pre">(list</span> <span class="pre">A)</span></code> with one parameter <code class="docutils literal notranslate"><span class="pre">A</span></code>. The type of <code class="docutils literal notranslate"><span class="pre">set_eq</span></code>
is convertible with <code class="docutils literal notranslate"><span class="pre">forall</span> <span class="pre">(A</span> <span class="pre">:</span> <span class="pre">Type),</span> <span class="pre">list</span> <span class="pre">A</span> <span class="pre">-&gt;</span> <span class="pre">list</span> <span class="pre">A</span> <span class="pre">-&gt;</span> <span class="pre">Prop.</span></code></p>
</div>
<p>An <em>instance</em> of a parametric relation <code class="docutils literal notranslate"><span class="pre">R</span></code> with n parameters is any term
<code class="docutils literal notranslate"><span class="pre">(R</span> <span class="pre">t1</span> <span class="pre">...</span> <span class="pre">tn)</span></code>.</p>
<p>Let <code class="docutils literal notranslate"><span class="pre">R</span></code> be a relation over <code class="docutils literal notranslate"><span class="pre">A</span></code> with <code class="docutils literal notranslate"><span class="pre">n</span></code> parameters. A term is a parametric
proof of reflexivity for <code class="docutils literal notranslate"><span class="pre">R</span></code> if it has type
<code class="docutils literal notranslate"><span class="pre">forall</span> <span class="pre">(x1</span> <span class="pre">:</span> <span class="pre">T1)</span> <span class="pre">...</span> <span class="pre">(xn</span> <span class="pre">:</span> <span class="pre">Tn),</span> <span class="pre">reflexive</span> <span class="pre">(R</span> <span class="pre">x1</span> <span class="pre">...</span> <span class="pre">xn)</span></code>.
Similar definitions are given for parametric proofs of symmetry and transitivity.</p>
<div class="admonition note">
<p class="admonition-title">Example: Parametric relation (continued)</p>
<p>The <code class="docutils literal notranslate"><span class="pre">set_eq</span></code> relation of the previous example can be proved to be
reflexive, symmetric and transitive. A parametric unary function <code class="docutils literal notranslate"><span class="pre">f</span></code> of type
<code class="docutils literal notranslate"><span class="pre">forall</span> <span class="pre">(x1</span> <span class="pre">:</span> <span class="pre">T1)</span> <span class="pre">...</span> <span class="pre">(xn</span> <span class="pre">:</span> <span class="pre">Tn),</span> <span class="pre">A1</span> <span class="pre">-&gt;</span> <span class="pre">A2</span></code> covariantly respects two parametric relation instances
<code class="docutils literal notranslate"><span class="pre">R1</span></code> and <code class="docutils literal notranslate"><span class="pre">R2</span></code> if, whenever <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code> satisfy <code class="docutils literal notranslate"><span class="pre">R1</span> <span class="pre">x</span> <span class="pre">y</span></code>, their images (<code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">x</span></code>) and (<code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">y</span></code>)
satisfy <code class="docutils literal notranslate"><span class="pre">R2</span> <span class="pre">(f</span> <span class="pre">x)</span> <span class="pre">(f</span> <span class="pre">y)</span></code>. An <code class="docutils literal notranslate"><span class="pre">f</span></code> that respects its input and output
relations will be called a unary covariant <em>morphism</em>. We can also say
that <code class="docutils literal notranslate"><span class="pre">f</span></code> is a monotone function with respect to <code class="docutils literal notranslate"><span class="pre">R1</span></code> and <code class="docutils literal notranslate"><span class="pre">R2</span></code> . The
sequence <code class="docutils literal notranslate"><span class="pre">x1</span> <span class="pre">...</span> <span class="pre">xn</span></code> represents the parameters of the morphism.</p>
</div>
<p>Let <code class="docutils literal notranslate"><span class="pre">R1</span></code> and <code class="docutils literal notranslate"><span class="pre">R2</span></code> be two parametric relations. The <em>signature</em> of a
parametric morphism of type <code class="docutils literal notranslate"><span class="pre">forall</span> <span class="pre">(x1</span> <span class="pre">:</span> <span class="pre">T1)</span> <span class="pre">...</span> <span class="pre">(xn</span> <span class="pre">:</span> <span class="pre">Tn),</span> <span class="pre">A1</span> <span class="pre">-&gt;</span> <span class="pre">A2</span></code>
that covariantly respects two instances <span class="math notranslate nohighlight">\(I_{R_1}\)</span> and <span class="math notranslate nohighlight">\(I_{R_2}\)</span> of <code class="docutils literal notranslate"><span class="pre">R1</span></code> and <code class="docutils literal notranslate"><span class="pre">R2</span></code>
is written <span class="math notranslate nohighlight">\(I_{R_1} ++&gt; I_{R_2}\)</span>. Notice that the special arrow ++&gt;, which
reminds the reader of covariance, is placed between the two relation
instances, not between the two carriers. The signature relation
instances and morphism will be typed in a context introducing
variables for the parameters.</p>
<p>The previous definitions are extended straightforwardly to n-ary
morphisms, that are required to be simultaneously monotone on every
argument.</p>
<p>Morphisms can also be contravariant in one or more of their arguments.
A morphism is contravariant on an argument associated with the relation
instance <span class="math notranslate nohighlight">\(R\)</span> if it is covariant on the same argument when the inverse
relation <span class="math notranslate nohighlight">\(R^{−1}\)</span> (<code class="docutils literal notranslate"><span class="pre">inverse</span> <span class="pre">R</span></code> in Coq) is considered. The special arrow <code class="docutils literal notranslate"><span class="pre">--&gt;</span></code>
is used in signatures for contravariant morphisms.</p>
<p>Functions having arguments related by symmetric relations instances
are both covariant and contravariant in those arguments. The special
arrow <code class="docutils literal notranslate"><span class="pre">==&gt;</span></code> is used in signatures for morphisms that are both
covariant and contravariant.</p>
<p>An instance of a parametric morphism <span class="math notranslate nohighlight">\(f\)</span> with <span class="math notranslate nohighlight">\(n\)</span>
parameters is any term <span class="math notranslate nohighlight">\(f \, t_1 \ldots t_n\)</span>.</p>
<div class="admonition note">
<p class="admonition-title">Example: Morphisms</p>
<p>Continuing the previous example, let <code class="docutils literal notranslate"><span class="pre">union:</span> <span class="pre">forall</span> <span class="pre">(A</span> <span class="pre">:</span> <span class="pre">Type),</span> <span class="pre">list</span> <span class="pre">A</span> <span class="pre">-&gt;</span> <span class="pre">list</span> <span class="pre">A</span> <span class="pre">-&gt;</span> <span class="pre">list</span> <span class="pre">A</span></code>
perform the union of two sets by appending one list to the other. <code class="docutils literal notranslate"><span class="pre">union</span></code> is a binary
morphism parametric over <code class="docutils literal notranslate"><span class="pre">A</span></code> that respects the relation instance
<code class="docutils literal notranslate"><span class="pre">(set_eq</span> <span class="pre">A)</span></code>. The latter condition is proved by showing:</p>
<div class="coqdoc literal-block docutils container">
<span><span></span><span class="coqdoc-keyword">forall</span><span> (</span><span class="coqdoc-var">A</span><span>: </span><span class="coqdoc-keyword">Type</span><span>) (</span><span class="coqdoc-var">S1</span><span> </span><span class="coqdoc-var">S1'</span><span> </span><span class="coqdoc-var">S2</span><span> </span><span class="coqdoc-var">S2'</span><span>: </span><span class="coqdoc-var">list</span><span> </span><span class="coqdoc-var">A</span><span>),</span><span>
  </span><span class="coqdoc-var">set_eq</span><span> </span><span class="coqdoc-var">A</span><span> </span><span class="coqdoc-var">S1</span><span> </span><span class="coqdoc-var">S1'</span><span> -&gt;</span><span>
  </span><span class="coqdoc-var">set_eq</span><span> </span><span class="coqdoc-var">A</span><span> </span><span class="coqdoc-var">S2</span><span> </span><span class="coqdoc-var">S2'</span><span> -&gt;</span><span>
  </span><span class="coqdoc-var">set_eq</span><span> </span><span class="coqdoc-var">A</span><span> (</span><span class="coqdoc-var">union</span><span> </span><span class="coqdoc-var">A</span><span> </span><span class="coqdoc-var">S1</span><span> </span><span class="coqdoc-var">S2</span><span>) (</span><span class="coqdoc-var">union</span><span> </span><span class="coqdoc-var">A</span><span> </span><span class="coqdoc-var">S1'</span><span> </span><span class="coqdoc-var">S2'</span><span>).</span><span>
</span></span></div>
<p>The signature of the function <code class="docutils literal notranslate"><span class="pre">union</span> <span class="pre">A</span></code> is <code class="docutils literal notranslate"><span class="pre">set_eq</span> <span class="pre">A</span> <span class="pre">==&gt;</span> <span class="pre">set_eq</span> <span class="pre">A</span> <span class="pre">==&gt;</span> <span class="pre">set_eq</span> <span class="pre">A</span></code>
for all <code class="docutils literal notranslate"><span class="pre">A</span></code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Example: Contravariant morphisms</p>
<p>The division function <code class="docutils literal notranslate"><span class="pre">Rdiv</span> <span class="pre">:</span> <span class="pre">R</span> <span class="pre">-&gt;</span> <span class="pre">R</span> <span class="pre">-&gt;</span> <span class="pre">R</span></code> is a morphism of signature
<code class="docutils literal notranslate"><span class="pre">le</span> <span class="pre">++&gt;</span> <span class="pre">le</span> <span class="pre">--&gt;</span> <span class="pre">le</span></code> where <code class="docutils literal notranslate"><span class="pre">le</span></code> is the usual order relation over
real numbers. Notice that division is covariant in its first argument
and contravariant in its second argument.</p>
</div>
<p>Leibniz equality is a relation and every function is a morphism that
respects Leibniz equality. Unfortunately, Leibniz equality is not
always the intended equality for a given structure.</p>
<p>In the next section we will describe the commands to register terms as
parametric relations and morphisms. Several tactics that deal with
equality in Coq can also work with the registered relations. The exact
list of tactics will be given <a class="reference internal" href="#tactics-enabled-on-user-provided-relations"><span class="std std-ref">in this section</span></a>.
For instance, the tactic reflexivity can be used to solve a goal <code class="docutils literal notranslate"><span class="pre">R</span> <span class="pre">n</span> <span class="pre">n</span></code> whenever <code class="docutils literal notranslate"><span class="pre">R</span></code>
is an instance of a registered reflexive relation. However, the
tactics that replace in a context <code class="docutils literal notranslate"><span class="pre">C[]</span></code> one term with another one
related by <code class="docutils literal notranslate"><span class="pre">R</span></code> must verify that <code class="docutils literal notranslate"><span class="pre">C[]</span></code> is a morphism that respects the
intended relation. Currently the verification consists of checking
whether <code class="docutils literal notranslate"><span class="pre">C[]</span></code> is a syntactic composition of morphism instances that respects some obvious
compatibility constraints.</p>
<div class="admonition note">
<p class="admonition-title">Example: Rewriting</p>
<p>Continuing the previous examples, suppose that the user must prove
<code class="docutils literal notranslate"><span class="pre">set_eq</span> <span class="pre">int</span> <span class="pre">(union</span> <span class="pre">int</span> <span class="pre">(union</span> <span class="pre">int</span> <span class="pre">S1</span> <span class="pre">S2)</span> <span class="pre">S2)</span> <span class="pre">(f</span> <span class="pre">S1</span> <span class="pre">S2)</span></code> under the
hypothesis <code class="docutils literal notranslate"><span class="pre">H</span> <span class="pre">:</span> <span class="pre">set_eq</span> <span class="pre">int</span> <span class="pre">S2</span> <span class="pre">(&#64;nil</span> <span class="pre">int)</span></code>. It
is possible to use the <code class="docutils literal notranslate"><span class="pre">rewrite</span></code> tactic to replace the first two
occurrences of <code class="docutils literal notranslate"><span class="pre">S2</span></code> with <code class="docutils literal notranslate"><span class="pre">&#64;nil</span> <span class="pre">int</span></code> in the goal since the
context <code class="docutils literal notranslate"><span class="pre">set_eq</span> <span class="pre">int</span> <span class="pre">(union</span> <span class="pre">int</span> <span class="pre">(union</span> <span class="pre">int</span> <span class="pre">S1</span> <span class="pre">nil)</span> <span class="pre">nil)</span> <span class="pre">(f</span> <span class="pre">S1</span> <span class="pre">S2)</span></code>,
being a composition of morphisms instances, is a morphism. However the
tactic will fail replacing the third occurrence of <code class="docutils literal notranslate"><span class="pre">S2</span></code>  unless <code class="docutils literal notranslate"><span class="pre">f</span></code>
has also been declared as a morphism.</p>
</div>
</section>
<section id="adding-new-relations-and-morphisms">
<h3>Adding new relations and morphisms<a class="headerlink" href="#adding-new-relations-and-morphisms" title="Permalink to this headline">¶</a></h3>
<p>These commands support the <a class="reference internal" href="../language/core/modules.html#coq:attr.local" title="local"><code class="xref coq coq-attr docutils literal notranslate"><span class="pre">local</span></code></a> and <a class="reference internal" href="../language/core/modules.html#coq:attr.global" title="global"><code class="xref coq coq-attr docutils literal notranslate"><span class="pre">global</span></code></a> locality attributes.
The default is <a class="reference internal" href="../language/core/modules.html#coq:attr.local" title="local"><code class="xref coq coq-attr docutils literal notranslate"><span class="pre">local</span></code></a> if the command is used inside a section, <a class="reference internal" href="../language/core/modules.html#coq:attr.global" title="global"><code class="xref coq coq-attr docutils literal notranslate"><span class="pre">global</span></code></a> otherwise.
They also support the <a class="reference internal" href="universe-polymorphism.html#coq:attr.universes(polymorphic)" title="universes(polymorphic)"><code class="xref coq coq-attr docutils literal notranslate"><span class="pre">universes(polymorphic)</span></code></a> attributes.</p>
<dl class="coq cmd">
<dt class="sig sig-object coq" id="coq:cmd.Add-Parametric-Relation">
<em class="property"><span class="sigannot"><span class="pre">Command</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">Add</span></span></span> <span><span><span class="pre">Parametric</span></span></span> <span><span><span class="pre">Relation</span></span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/core/assumptions.html#grammar-token-binder"><span class="hole"><span class="pre">binder</span></span></a></span><span class="notation-sup"><span class="pre">*</span></span></span> <span><span><span class="pre">:</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span><sub><span class="pre">A</span></sub></span></a> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span><sub><span class="pre">Aeq</span></sub></span></a> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">reflexivity</span></span></span> <span><span><span class="pre">proved</span></span></span> <span><span><span class="pre">by</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">symmetry</span></span></span> <span><span><span class="pre">proved</span></span></span> <span><span><span class="pre">by</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">transitivity</span></span></span> <span><span><span class="pre">proved</span></span></span> <span><span><span class="pre">by</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span> <span><span><span class="pre">as</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></span><a class="headerlink" href="#coq:cmd.Add-Parametric-Relation" title="Permalink to this definition">¶</a></dt>
<dd><p>Declares a parametric relation of <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span><sub><span class="pre">A</span></sub></span></a></span></code>, which is a <code class="docutils literal notranslate"><span class="pre">Type</span></code>, say <code class="docutils literal notranslate"><span class="pre">T</span></code>, with
<code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span><sub><span class="pre">Aeq</span></sub></span></a></span></code>, which is a relation on <code class="docutils literal notranslate"><span class="pre">T</span></code>, i.e. of type <code class="docutils literal notranslate"><span class="pre">(T</span> <span class="pre">-&gt;</span> <span class="pre">T</span> <span class="pre">-&gt;</span> <span class="pre">Prop)</span></code>.
Thus, if <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span><sub><span class="pre">A</span></sub></span></a></span></code> is
<code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">A:</span></span></span> <span><span><span class="pre">forall</span></span></span> <span><span><span class="pre">α</span></span><sub><span class="pre">1</span></sub></span> <span><span><span class="pre">…</span></span></span> <span><span><span class="pre">α</span></span><sub><span class="pre">n</span></sub></span><span><span><span class="pre">,</span></span></span> <span><span><span class="pre">Type</span></span></span></span></code> then <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span><sub><span class="pre">Aeq</span></sub></span></a></span></code> is
<code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Aeq:</span></span></span> <span><span><span class="pre">forall</span></span></span> <span><span><span class="pre">α</span></span><sub><span class="pre">1</span></sub></span> <span><span><span class="pre">…</span></span></span> <span><span><span class="pre">α</span></span><sub><span class="pre">n</span></sub></span><span><span><span class="pre">,</span></span></span> <span><span><span class="pre">(A</span></span></span> <span><span><span class="pre">α</span></span><sub><span class="pre">1</span></sub></span> <span><span><span class="pre">…</span></span></span> <span><span><span class="pre">α</span></span><sub><span class="pre">n</span></sub></span><span><span><span class="pre">)</span></span></span> <span><span><span class="pre">-&gt;</span></span></span> <span><span><span class="pre">(A</span></span></span> <span><span><span class="pre">α</span></span><sub><span class="pre">1</span></sub></span> <span><span><span class="pre">…</span></span></span> <span><span><span class="pre">α</span></span><sub><span class="pre">n</span></sub></span><span><span><span class="pre">)</span></span></span> <span><span><span class="pre">-&gt;</span></span></span> <span><span><span class="pre">Prop</span></span></span></span></code>,
or equivalently, <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Aeq:</span></span></span> <span><span><span class="pre">forall</span></span></span> <span><span><span class="pre">α</span></span><sub><span class="pre">1</span></sub></span> <span><span><span class="pre">…</span></span></span> <span><span><span class="pre">α</span></span><sub><span class="pre">n</span></sub></span><span><span><span class="pre">,</span></span></span> <span><span><span class="pre">relation</span></span></span> <span><span><span class="pre">(A</span></span></span> <span><span><span class="pre">α</span></span><sub><span class="pre">1</span></sub></span> <span><span><span class="pre">…</span></span></span> <span><span><span class="pre">α</span></span><sub><span class="pre">n</span></sub></span><span><span><span class="pre">)</span></span></span></span></code>.</p>
<p><code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span><sub><span class="pre">A</span></sub></span></a></span></code> and <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span><sub><span class="pre">Aeq</span></sub></span></a></span></code> must be typeable under the context
<a class="reference internal" href="../language/core/assumptions.html#grammar-token-binder"><code class="xref std std-token docutils literal notranslate"><span class="pre">binder</span></code></a>s.  In practice, the <a class="reference internal" href="../language/core/assumptions.html#grammar-token-binder"><code class="xref std std-token docutils literal notranslate"><span class="pre">binder</span></code></a>s usually correspond to the <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">α</span></span></span></span></code>s</p>
<p>The final <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><code class="xref std std-token docutils literal notranslate"><span class="pre">ident</span></code></a> gives a unique name to the morphism and it is used
by the command to generate fresh names for automatically provided
lemmas used internally.</p>
<p>Notice that the carrier and relation parameters may refer to the
context of variables introduced at the beginning of the declaration,
but the instances need not be made only of variables. Also notice that
<code class="docutils literal notranslate"><span class="pre">A</span></code> is <em>not</em> required to be a term having the same parameters as <code class="docutils literal notranslate"><span class="pre">Aeq</span></code>,
although that is often the case in practice (this departs from the
previous implementation).</p>
<p>To use this command, you need to first import the module <code class="docutils literal notranslate"><span class="pre">Setoid</span></code> using
the command <code class="docutils literal notranslate"><span class="pre">Require</span> <span class="pre">Import</span> <span class="pre">Setoid</span></code>.</p>
</dd></dl>

<dl class="coq cmd">
<dt class="sig sig-object coq" id="coq:cmd.Add-Relation">
<em class="property"><span class="sigannot"><span class="pre">Command</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">Add</span></span></span> <span><span><span class="pre">Relation</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">reflexivity</span></span></span> <span><span><span class="pre">proved</span></span></span> <span><span><span class="pre">by</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">symmetry</span></span></span> <span><span><span class="pre">proved</span></span></span> <span><span><span class="pre">by</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">transitivity</span></span></span> <span><span><span class="pre">proved</span></span></span> <span><span><span class="pre">by</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span> <span><span><span class="pre">as</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></span><a class="headerlink" href="#coq:cmd.Add-Relation" title="Permalink to this definition">¶</a></dt>
<dd><p>If the carrier and relations are not parametric, use this command
instead, whose syntax is the same except there is no local context.</p>
<p>The proofs of reflexivity, symmetry and transitivity can be omitted if
the relation is not an equivalence relation. The proofs must be
instances of the corresponding relation definitions: e.g. the proof of
reflexivity must have a type convertible to
<code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">reflexive</span></span> <span class="operator"><span class="pre">(</span></span><span class="name"><span class="pre">A</span></span> <span class="name"><span class="pre">t1</span></span> <span class="name builtin pseudo"><span class="pre">…</span></span> <span class="name"><span class="pre">tn</span></span><span class="operator"><span class="pre">)</span></span> <span class="operator"><span class="pre">(</span></span><span class="name"><span class="pre">Aeq</span></span> <span class="name"><span class="pre">t</span></span><span class="name builtin pseudo"><span class="pre">′</span></span> <span class="literal number integer"><span class="pre">1</span></span> <span class="name builtin pseudo"><span class="pre">…</span></span> <span class="name"><span class="pre">t</span></span><span class="name builtin pseudo"><span class="pre">′</span></span> <span class="name"><span class="pre">n</span></span><span class="operator"><span class="pre">)</span></span></code>.
Each proof may refer to the introduced variables as well.</p>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Example: Parametric relation</p>
<p>For Leibniz equality, we may declare:</p>
<div class="coqdoc literal-block docutils container">
<span><span></span><span class="coqdoc-keyword">Add</span><span> </span><span class="coqdoc-var">Parametric</span><span> </span><span class="coqdoc-var">Relation</span><span> (</span><span class="coqdoc-var">A</span><span> : </span><span class="coqdoc-keyword">Type</span><span>) : </span><span class="coqdoc-var">A</span><span> (&#64;</span><span class="coqdoc-var">eq</span><span> </span><span class="coqdoc-var">A</span><span>)</span><span>
  [</span><span class="coqdoc-tactic">reflexivity</span><span> </span><span class="coqdoc-var">proved</span><span> </span><span class="coqdoc-tactic">by</span><span> &#64;</span><span class="coqdoc-var">refl_equal</span><span> </span><span class="coqdoc-var">A</span><span>]</span><span>
...</span><span>
</span></span></div>
</div>
<p>Some tactics (<a class="reference internal" href="../proofs/writing-proofs/equality.html#coq:tacn.reflexivity" title="reflexivity"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">reflexivity</span></code></a>, <a class="reference internal" href="../proofs/writing-proofs/equality.html#coq:tacn.symmetry" title="symmetry"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">symmetry</span></code></a>, <a class="reference internal" href="../proofs/writing-proofs/equality.html#coq:tacn.transitivity" title="transitivity"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">transitivity</span></code></a>) work only on
relations that respect the expected properties. The remaining tactics
(<a class="reference internal" href="../proofs/writing-proofs/equality.html#coq:tacn.replace" title="replace"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">replace</span></code></a>, <a class="reference internal" href="../proofs/writing-proofs/equality.html#coq:tacn.rewrite" title="rewrite"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">rewrite</span></code></a> and derived tactics such as <a class="reference internal" href="../proofs/automatic-tactics/auto.html#coq:tacn.autorewrite" title="autorewrite"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">autorewrite</span></code></a>) do not
require any properties over the relation. However, they are able to
replace terms with related ones only in contexts that are syntactic
compositions of parametric morphism instances declared with the
following command.</p>
<dl class="coq cmd">
<dt class="sig sig-object coq" id="coq:cmd.Add-Parametric-Morphism">
<em class="property"><span class="sigannot"><span class="pre">Command</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">Add</span></span></span> <span><span><span class="pre">Parametric</span></span></span> <span><span><span class="pre">Morphism</span></span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/core/assumptions.html#grammar-token-binder"><span class="hole"><span class="pre">binder</span></span></a></span><span class="notation-sup"><span class="pre">*</span></span></span> <span><span><span class="pre">:</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a> <span><span><span class="pre">with</span></span></span> <span><span><span class="pre">signature</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole"><span class="pre">term</span></span></a> <span><span><span class="pre">as</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></span><a class="headerlink" href="#coq:cmd.Add-Parametric-Morphism" title="Permalink to this definition">¶</a></dt>
<dd><p>Declares a parametric morphism <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a></span></code> of
signature <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole"><span class="pre">term</span></span></a></span></code>.  The final identifier <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><code class="xref std std-token docutils literal notranslate"><span class="pre">ident</span></code></a> gives a unique
name to the morphism and it is used as the base name of the typeclass
instance definition and as the name of the lemma that proves the
well-definedness of the morphism. The parameters of the morphism as well as
the signature may refer to the context of variables. The command asks the
user to prove interactively that the function denoted by the first
<a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><code class="xref std std-token docutils literal notranslate"><span class="pre">ident</span></code></a> respects the relations identified from the signature.</p>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Example</p>
<p>We start the example by assuming a small theory over
homogeneous sets and we declare set equality as a parametric
equivalence relation and union of two sets as a parametric morphism.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span></span><span class="coqdoc-keyword">Require</span><span> </span><span class="coqdoc-keyword">Export</span><span> </span><span class="coqdoc-var">Setoid</span><span>.</span><span>
</span></dt><dt><span></span><span class="coqdoc-keyword">Require</span><span> </span><span class="coqdoc-keyword">Export</span><span> </span><span class="coqdoc-var">Relation_Definitions</span><span>.</span><span>
</span></dt><dt><span></span><span>
</span><span class="coqdoc-keyword">Set Implicit Arguments</span><span>.</span><span>
</span></dt><dt><span></span><span>
</span><span class="coqdoc-keyword">Parameter</span><span> </span><span class="coqdoc-tactic">set</span><span> : </span><span class="coqdoc-keyword">Type</span><span> -&gt; </span><span class="coqdoc-keyword">Type</span><span>.</span><span>
</span></dt><dd class="coqtop-hidden"><span>set is declared
</span></dd>
<dt><span></span><span class="coqdoc-keyword">Parameter</span><span> </span><span class="coqdoc-var">empty</span><span> : </span><span class="coqdoc-keyword">forall</span><span> </span><span class="coqdoc-var">A</span><span>, </span><span class="coqdoc-tactic">set</span><span> </span><span class="coqdoc-var">A</span><span>.</span><span>
</span></dt><dd class="coqtop-hidden"><span>empty is declared
</span></dd>
<dt><span></span><span class="coqdoc-keyword">Parameter</span><span> </span><span class="coqdoc-var">eq_set</span><span> : </span><span class="coqdoc-keyword">forall</span><span> </span><span class="coqdoc-var">A</span><span>, </span><span class="coqdoc-tactic">set</span><span> </span><span class="coqdoc-var">A</span><span> -&gt; </span><span class="coqdoc-tactic">set</span><span> </span><span class="coqdoc-var">A</span><span> -&gt; </span><span class="coqdoc-keyword">Prop</span><span>.</span><span>
</span></dt><dd class="coqtop-hidden"><span>eq_set is declared
</span></dd>
<dt><span></span><span class="coqdoc-keyword">Parameter</span><span> </span><span class="coqdoc-var">union</span><span> : </span><span class="coqdoc-keyword">forall</span><span> </span><span class="coqdoc-var">A</span><span>, </span><span class="coqdoc-tactic">set</span><span> </span><span class="coqdoc-var">A</span><span> -&gt; </span><span class="coqdoc-tactic">set</span><span> </span><span class="coqdoc-var">A</span><span> -&gt; </span><span class="coqdoc-tactic">set</span><span> </span><span class="coqdoc-var">A</span><span>.</span><span>
</span></dt><dd class="coqtop-hidden"><span>union is declared
</span></dd>
<dt><span></span><span>
</span><span class="coqdoc-keyword">Axiom</span><span> </span><span class="coqdoc-var">eq_set_refl</span><span> : </span><span class="coqdoc-keyword">forall</span><span> </span><span class="coqdoc-var">A</span><span>, </span><span class="coqdoc-var">reflexive</span><span> </span><span class="coqdoc-var">_</span><span> (</span><span class="coqdoc-var">eq_set</span><span> (</span><span class="coqdoc-var">A</span><span>:=</span><span class="coqdoc-var">A</span><span>)).</span><span>
</span></dt><dd class="coqtop-hidden"><span>eq_set_refl is declared
</span></dd>
<dt><span></span><span class="coqdoc-keyword">Axiom</span><span> </span><span class="coqdoc-var">eq_set_sym</span><span> : </span><span class="coqdoc-keyword">forall</span><span> </span><span class="coqdoc-var">A</span><span>, </span><span class="coqdoc-var">symmetric</span><span> </span><span class="coqdoc-var">_</span><span> (</span><span class="coqdoc-var">eq_set</span><span> (</span><span class="coqdoc-var">A</span><span>:=</span><span class="coqdoc-var">A</span><span>)).</span><span>
</span></dt><dd class="coqtop-hidden"><span>eq_set_sym is declared
</span></dd>
<dt><span></span><span class="coqdoc-keyword">Axiom</span><span> </span><span class="coqdoc-var">eq_set_trans</span><span> : </span><span class="coqdoc-keyword">forall</span><span> </span><span class="coqdoc-var">A</span><span>, </span><span class="coqdoc-var">transitive</span><span> </span><span class="coqdoc-var">_</span><span> (</span><span class="coqdoc-var">eq_set</span><span> (</span><span class="coqdoc-var">A</span><span>:=</span><span class="coqdoc-var">A</span><span>)).</span><span>
</span></dt><dd class="coqtop-hidden"><span>eq_set_trans is declared
</span></dd>
<dt><span></span><span class="coqdoc-keyword">Axiom</span><span> </span><span class="coqdoc-var">empty_neutral</span><span> : </span><span class="coqdoc-keyword">forall</span><span> </span><span class="coqdoc-var">A</span><span> (</span><span class="coqdoc-var">S</span><span> : </span><span class="coqdoc-tactic">set</span><span> </span><span class="coqdoc-var">A</span><span>), </span><span class="coqdoc-var">eq_set</span><span> (</span><span class="coqdoc-var">union</span><span> </span><span class="coqdoc-var">S</span><span> (</span><span class="coqdoc-var">empty</span><span> </span><span class="coqdoc-var">A</span><span>)) </span><span class="coqdoc-var">S</span><span>.</span><span>
</span></dt><dd class="coqtop-hidden"><span>empty_neutral is declared
</span></dd>
<dt><span></span><span>
</span><span class="coqdoc-keyword">Axiom</span><span> </span><span class="coqdoc-var">union_compat</span><span> :</span><span>
  </span><span class="coqdoc-keyword">forall</span><span> (</span><span class="coqdoc-var">A</span><span> : </span><span class="coqdoc-keyword">Type</span><span>),</span><span>
    </span><span class="coqdoc-keyword">forall</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">x'</span><span> : </span><span class="coqdoc-tactic">set</span><span> </span><span class="coqdoc-var">A</span><span>, </span><span class="coqdoc-var">eq_set</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">x'</span><span> -&gt;</span><span>
    </span><span class="coqdoc-keyword">forall</span><span> </span><span class="coqdoc-var">y</span><span> </span><span class="coqdoc-var">y'</span><span> : </span><span class="coqdoc-tactic">set</span><span> </span><span class="coqdoc-var">A</span><span>, </span><span class="coqdoc-var">eq_set</span><span> </span><span class="coqdoc-var">y</span><span> </span><span class="coqdoc-var">y'</span><span> -&gt;</span><span>
      </span><span class="coqdoc-var">eq_set</span><span> (</span><span class="coqdoc-var">union</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span>) (</span><span class="coqdoc-var">union</span><span> </span><span class="coqdoc-var">x'</span><span> </span><span class="coqdoc-var">y'</span><span>).</span><span>
</span></dt><dd class="coqtop-hidden"><span>union_compat is declared
</span></dd>
<dt><span></span><span>
</span><span class="coqdoc-keyword">Add</span><span> </span><span class="coqdoc-var">Parametric</span><span> </span><span class="coqdoc-var">Relation</span><span> </span><span class="coqdoc-var">A</span><span> : (</span><span class="coqdoc-tactic">set</span><span> </span><span class="coqdoc-var">A</span><span>) (&#64;</span><span class="coqdoc-var">eq_set</span><span> </span><span class="coqdoc-var">A</span><span>)</span><span>
  </span><span class="coqdoc-tactic">reflexivity</span><span> </span><span class="coqdoc-var">proved</span><span> </span><span class="coqdoc-tactic">by</span><span> (</span><span class="coqdoc-var">eq_set_refl</span><span> (</span><span class="coqdoc-var">A</span><span>:=</span><span class="coqdoc-var">A</span><span>))</span><span>
  </span><span class="coqdoc-tactic">symmetry</span><span> </span><span class="coqdoc-var">proved</span><span> </span><span class="coqdoc-tactic">by</span><span> (</span><span class="coqdoc-var">eq_set_sym</span><span> (</span><span class="coqdoc-var">A</span><span>:=</span><span class="coqdoc-var">A</span><span>))</span><span>
  </span><span class="coqdoc-tactic">transitivity</span><span> </span><span class="coqdoc-var">proved</span><span> </span><span class="coqdoc-tactic">by</span><span> (</span><span class="coqdoc-var">eq_set_trans</span><span> (</span><span class="coqdoc-var">A</span><span>:=</span><span class="coqdoc-var">A</span><span>))</span><span>
  </span><span class="coqdoc-keyword">as</span><span> </span><span class="coqdoc-var">eq_set_rel</span><span>.</span><span>
</span></dt><dd class="coqtop-hidden"><span>eq_set_rel_relation is defined
eq_set_rel_Reflexive is defined
eq_set_rel_Symmetric is defined
eq_set_rel_Transitive is defined
eq_set_rel is defined
</span></dd>
<dt><span></span><span>
</span><span class="coqdoc-keyword">Add</span><span> </span><span class="coqdoc-var">Parametric</span><span> </span><span class="coqdoc-var">Morphism</span><span> </span><span class="coqdoc-var">A</span><span> : (&#64;</span><span class="coqdoc-var">union</span><span> </span><span class="coqdoc-var">A</span><span>)</span><span>
  </span><span class="coqdoc-keyword">with</span><span> </span><span class="coqdoc-var">signature</span><span> (&#64;</span><span class="coqdoc-var">eq_set</span><span> </span><span class="coqdoc-var">A</span><span>) ==&gt; (&#64;</span><span class="coqdoc-var">eq_set</span><span> </span><span class="coqdoc-var">A</span><span>) ==&gt; (&#64;</span><span class="coqdoc-var">eq_set</span><span> </span><span class="coqdoc-var">A</span><span>) </span><span class="coqdoc-keyword">as</span><span> </span><span class="coqdoc-var">union_mor</span><span>.</span><span>
</span></dt><dd class="coqtop-hidden"><span>1 goal
  
  A : </span><span class="ansi-fg-yellow ansi-bold">Type</span><span>
  ============================
  </span><span class="ansi-bold">forall</span><span> x y : set A,
  eq_set x y</span><span> -&gt;</span><span>
  </span><span class="ansi-bold">forall</span><span> x0 y0 : set A, eq_set x0 y0</span><span> -&gt;</span><span> eq_set (union x x0) (union y y0)
</span></dd>
<dt><span></span><span class="coqdoc-keyword">Proof</span><span>.</span><span>
</span></dt><dt><span>  </span><span class="coqdoc-tactic">exact</span><span> (&#64;</span><span class="coqdoc-var">union_compat</span><span> </span><span class="coqdoc-var">A</span><span>).</span><span>
</span></dt><dd class="coqtop-hidden"><span>No more goals.
</span></dd>
<dt><span></span><span class="coqdoc-keyword">Qed</span><span>.</span><span>
</span></dt></dl>
</div>
<p>It is possible to reduce the burden of specifying parameters using
(maximally inserted) implicit arguments. If <code class="docutils literal notranslate"><span class="pre">A</span></code> is always set as
maximally implicit in the previous example, one can write:</p>
<div class="coqdoc literal-block docutils container">
<span><span></span><span class="coqdoc-keyword">Add</span><span> </span><span class="coqdoc-var">Parametric</span><span> </span><span class="coqdoc-var">Relation</span><span> </span><span class="coqdoc-var">A</span><span> : (</span><span class="coqdoc-tactic">set</span><span> </span><span class="coqdoc-var">A</span><span>) </span><span class="coqdoc-var">eq_set</span><span>
  </span><span class="coqdoc-tactic">reflexivity</span><span> </span><span class="coqdoc-var">proved</span><span> </span><span class="coqdoc-tactic">by</span><span> </span><span class="coqdoc-var">eq_set_refl</span><span>
  </span><span class="coqdoc-tactic">symmetry</span><span> </span><span class="coqdoc-var">proved</span><span> </span><span class="coqdoc-tactic">by</span><span> </span><span class="coqdoc-var">eq_set_sym</span><span>
  </span><span class="coqdoc-tactic">transitivity</span><span> </span><span class="coqdoc-var">proved</span><span> </span><span class="coqdoc-tactic">by</span><span> </span><span class="coqdoc-var">eq_set_trans</span><span>
  </span><span class="coqdoc-keyword">as</span><span> </span><span class="coqdoc-var">eq_set_rel</span><span>.</span><span>
</span><span>
</span><span class="coqdoc-keyword">Add</span><span> </span><span class="coqdoc-var">Parametric</span><span> </span><span class="coqdoc-var">Morphism</span><span> </span><span class="coqdoc-var">A</span><span> : (&#64;</span><span class="coqdoc-var">union</span><span> </span><span class="coqdoc-var">A</span><span>) </span><span class="coqdoc-keyword">with</span><span>
  </span><span class="coqdoc-var">signature</span><span> </span><span class="coqdoc-var">eq_set</span><span> ==&gt; </span><span class="coqdoc-var">eq_set</span><span> ==&gt; </span><span class="coqdoc-var">eq_set</span><span> </span><span class="coqdoc-keyword">as</span><span> </span><span class="coqdoc-var">union_mor</span><span>.</span><span>
</span><span class="coqdoc-keyword">Proof</span><span>. </span><span class="coqdoc-tactic">exact</span><span> (&#64;</span><span class="coqdoc-var">union_compat</span><span> </span><span class="coqdoc-var">A</span><span>). </span><span class="coqdoc-keyword">Qed</span><span>.</span><span>
</span></span></div>
<p>We proceed now by proving a simple lemma performing a rewrite step and
then applying reflexivity, as we would do working with Leibniz
equality. Both tactic applications are accepted since the required
properties over <code class="docutils literal notranslate"><span class="pre">eq_set</span></code> and <code class="docutils literal notranslate"><span class="pre">union</span></code> can be established from the two
declarations above.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span></span><span class="coqdoc-keyword">Goal</span><span> </span><span class="coqdoc-keyword">forall</span><span> (</span><span class="coqdoc-var">S</span><span> : </span><span class="coqdoc-tactic">set</span><span> </span><span class="coqdoc-var">nat</span><span>),</span><span>
  </span><span class="coqdoc-var">eq_set</span><span> (</span><span class="coqdoc-var">union</span><span> (</span><span class="coqdoc-var">union</span><span> </span><span class="coqdoc-var">S</span><span> (</span><span class="coqdoc-var">empty</span><span> </span><span class="coqdoc-var">nat</span><span>)) </span><span class="coqdoc-var">S</span><span>) (</span><span class="coqdoc-var">union</span><span> </span><span class="coqdoc-var">S</span><span> </span><span class="coqdoc-var">S</span><span>).</span><span>
</span></dt><dd class="coqtop-hidden"><span>1 goal
  
  ============================
  </span><span class="ansi-bold">forall</span><span> S : set nat, eq_set (union (union S (empty nat)) S) (union S S)
</span></dd>
</dl>
<span></span><dl>
<dt><span></span><span class="coqdoc-keyword">Proof</span><span>. </span><span class="coqdoc-tactic">intros</span><span>. </span><span class="coqdoc-tactic">rewrite</span><span> </span><span class="coqdoc-var">empty_neutral</span><span>. </span><span class="coqdoc-tactic">reflexivity</span><span>. </span><span class="coqdoc-keyword">Qed</span><span>.</span><span>
</span></dt><dd class="coqtop-hidden"><span>
1 goal
  
  S : set nat
  ============================
  eq_set (union (union S (empty nat)) S) (union S S)

1 goal
  
  S : set nat
  ============================
  eq_set (union S S) (union S S)

No more goals.

</span></dd>
</dl>
</div>
<p>The tables of relations and morphisms are managed by the typeclass
instance mechanism. The behavior on section close is to generalize the
instances by the variables of the section (and possibly hypotheses
used in the proofs of instance declarations) but not to export them in
the rest of the development for proof search. One can use the
cmd:<code class="docutils literal notranslate"><span class="pre">Existing</span> <span class="pre">Instance</span></code> command to do so outside the section, using the name of the
declared morphism suffixed by <code class="docutils literal notranslate"><span class="pre">_Morphism</span></code>, or use the <code class="docutils literal notranslate"><span class="pre">Global</span></code> modifier
for the corresponding class instance declaration
(see <a class="reference internal" href="#first-class-setoids-and-morphisms"><span class="std std-ref">First Class Setoids and Morphisms</span></a>) at
definition time. When loading a compiled file or importing a module,
all the declarations of this module will be loaded.</p>
</div>
</section>
<section id="rewriting-and-nonreflexive-relations">
<h3>Rewriting and nonreflexive relations<a class="headerlink" href="#rewriting-and-nonreflexive-relations" title="Permalink to this headline">¶</a></h3>
<p>To replace only one argument of an n-ary morphism it is necessary to
prove that all the other arguments are related to themselves by the
respective relation instances.</p>
<div class="admonition note">
<p class="admonition-title">Example</p>
<p>To replace <code class="docutils literal notranslate"><span class="pre">(union</span> <span class="pre">S</span> <span class="pre">empty)</span></code> with <code class="docutils literal notranslate"><span class="pre">S</span></code> in <code class="docutils literal notranslate"><span class="pre">(union</span> <span class="pre">(union</span> <span class="pre">S</span> <span class="pre">empty)</span> <span class="pre">S)</span> <span class="pre">(union</span> <span class="pre">S</span> <span class="pre">S)</span></code>
the rewrite tactic must exploit the monotony of <code class="docutils literal notranslate"><span class="pre">union</span></code> (axiom <code class="docutils literal notranslate"><span class="pre">union_compat</span></code>
in the previous example). Applying <code class="docutils literal notranslate"><span class="pre">union_compat</span></code> by hand we are left with the
goal <code class="docutils literal notranslate"><span class="pre">eq_set</span> <span class="pre">(union</span> <span class="pre">S</span> <span class="pre">S)</span> <span class="pre">(union</span> <span class="pre">S</span> <span class="pre">S)</span></code>.</p>
</div>
<p>When the relations associated with some arguments are not reflexive, the
tactic cannot automatically prove the reflexivity goals, that are left
to the user.</p>
<p>Setoids whose relations are partial equivalence relations (PER) are
useful for dealing with partial functions. Let <code class="docutils literal notranslate"><span class="pre">R</span></code> be a PER. We say that an
element <code class="docutils literal notranslate"><span class="pre">x</span></code> is defined if <code class="docutils literal notranslate"><span class="pre">R</span> <span class="pre">x</span> <span class="pre">x</span></code>. A partial function whose domain
comprises all the defined elements is declared as a morphism that
respects <code class="docutils literal notranslate"><span class="pre">R</span></code>. Every time a rewriting step is performed the user must
prove that the argument of the morphism is defined.</p>
<div class="admonition note">
<p class="admonition-title">Example</p>
<p>Let <code class="docutils literal notranslate"><span class="pre">eqO</span></code> be <code class="docutils literal notranslate"><span class="pre">fun</span> <span class="pre">x</span> <span class="pre">y</span> <span class="pre">=&gt;</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">y</span> <span class="pre">/\</span> <span class="pre">x</span> <span class="pre">&lt;&gt;</span> <span class="pre">0</span></code> (the
smallest PER over nonzero elements). Division can be declared as a
morphism of signature <code class="docutils literal notranslate"><span class="pre">eq</span> <span class="pre">==&gt;</span> <span class="pre">eq0</span> <span class="pre">==&gt;</span> <span class="pre">eq</span></code>. Replacing <code class="docutils literal notranslate"><span class="pre">x</span></code> with
<code class="docutils literal notranslate"><span class="pre">y</span></code> in <code class="docutils literal notranslate"><span class="pre">div</span> <span class="pre">x</span> <span class="pre">n</span> <span class="pre">=</span> <span class="pre">div</span> <span class="pre">y</span> <span class="pre">n</span></code> opens an additional goal <code class="docutils literal notranslate"><span class="pre">eq0</span> <span class="pre">n</span> <span class="pre">n</span></code>
which is equivalent to <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">=</span> <span class="pre">n</span> <span class="pre">/\</span> <span class="pre">n</span> <span class="pre">&lt;&gt;</span> <span class="pre">0</span></code>.</p>
</div>
</section>
<section id="rewriting-and-nonsymmetric-relations">
<h3>Rewriting and nonsymmetric relations<a class="headerlink" href="#rewriting-and-nonsymmetric-relations" title="Permalink to this headline">¶</a></h3>
<p>When the user works up to relations that are not symmetric, it is no
longer the case that any covariant morphism argument is also
contravariant. As a result it is no longer possible to replace a term
with a related one in every context, since the obtained goal implies
the previous one if and only if the replacement has been performed in
a contravariant position. In a similar way, replacement in an
hypothesis can be performed only if the replaced term occurs in a
covariant position.</p>
<div class="admonition note">
<p class="admonition-title">Example: Covariance and contravariance</p>
<p>Suppose that division over real numbers has been defined as a morphism of signature
<code class="docutils literal notranslate"><span class="pre">Z.div</span> <span class="pre">:</span> <span class="pre">Z.lt</span> <span class="pre">++&gt;</span> <span class="pre">Z.lt</span> <span class="pre">--&gt;</span> <span class="pre">Z.lt</span></code> (i.e. <code class="docutils literal notranslate"><span class="pre">Z.div</span></code> is increasing in
its first argument, but decreasing on the second one). Let <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>
denote <code class="docutils literal notranslate"><span class="pre">Z.lt</span></code>. Under the hypothesis <code class="docutils literal notranslate"><span class="pre">H</span> <span class="pre">:</span> <span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">y</span></code> we have
<code class="docutils literal notranslate"><span class="pre">k</span> <span class="pre">&lt;</span> <span class="pre">x</span> <span class="pre">/</span> <span class="pre">y</span> <span class="pre">-&gt;</span> <span class="pre">k</span> <span class="pre">&lt;</span> <span class="pre">x</span> <span class="pre">/</span> <span class="pre">x</span></code>, but not <code class="docutils literal notranslate"><span class="pre">k</span> <span class="pre">&lt;</span> <span class="pre">y</span> <span class="pre">/</span> <span class="pre">x</span> <span class="pre">-&gt;</span> <span class="pre">k</span> <span class="pre">&lt;</span> <span class="pre">x</span> <span class="pre">/</span> <span class="pre">x</span></code>. Dually,
under the same hypothesis <code class="docutils literal notranslate"><span class="pre">k</span> <span class="pre">&lt;</span> <span class="pre">x</span> <span class="pre">/</span> <span class="pre">y</span> <span class="pre">-&gt;</span> <span class="pre">k</span> <span class="pre">&lt;</span> <span class="pre">y</span> <span class="pre">/</span> <span class="pre">y</span></code> holds, but
<code class="docutils literal notranslate"><span class="pre">k</span> <span class="pre">&lt;</span> <span class="pre">y</span> <span class="pre">/</span> <span class="pre">x</span> <span class="pre">-&gt;</span> <span class="pre">k</span> <span class="pre">&lt;</span> <span class="pre">y</span> <span class="pre">/</span> <span class="pre">y</span></code> does not. Thus, if the current goal is
<code class="docutils literal notranslate"><span class="pre">k</span> <span class="pre">&lt;</span> <span class="pre">x</span> <span class="pre">/</span> <span class="pre">x</span></code>, it is possible to replace only the second occurrence of
<code class="docutils literal notranslate"><span class="pre">x</span></code> (in contravariant position) with <code class="docutils literal notranslate"><span class="pre">y</span></code> since the obtained goal
must imply the current one. On the contrary, if <code class="docutils literal notranslate"><span class="pre">k</span> <span class="pre">&lt;</span> <span class="pre">x</span> <span class="pre">/</span> <span class="pre">x</span></code> is an
hypothesis, it is possible to replace only the first occurrence of
<code class="docutils literal notranslate"><span class="pre">x</span></code> (in covariant position) with <code class="docutils literal notranslate"><span class="pre">y</span></code> since the current
hypothesis must imply the obtained one.</p>
<p>Contrary to the previous implementation, no specific error message
will be raised when trying to replace a term that occurs in the wrong
position. It will only fail because the rewriting constraints are not
satisfiable. However it is possible to use the at modifier to specify
which occurrences should be rewritten.</p>
<p>As expected, composing morphisms together propagates the variance
annotations by switching the variance every time a contravariant
position is traversed.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Example</p>
<p>Let us continue the previous example and let us consider
the goal <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">/</span> <span class="pre">(x</span> <span class="pre">/</span> <span class="pre">x)</span> <span class="pre">&lt;</span> <span class="pre">k</span></code>. The first and third occurrences of
<code class="docutils literal notranslate"><span class="pre">x</span></code> are in a contravariant position, while the second one is in
covariant position. More in detail, the second occurrence of <code class="docutils literal notranslate"><span class="pre">x</span></code>
occurs covariantly in <code class="docutils literal notranslate"><span class="pre">(x</span> <span class="pre">/</span> <span class="pre">x)</span></code> (since division is covariant in
its first argument), and thus contravariantly in <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">/</span> <span class="pre">(x</span> <span class="pre">/</span> <span class="pre">x)</span></code>
(since division is contravariant in its second argument), and finally
covariantly in <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">/</span> <span class="pre">(x</span> <span class="pre">/</span> <span class="pre">x)</span> <span class="pre">&lt;</span> <span class="pre">k</span></code> (since <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, as every
transitive relation, is contravariant in its first argument with
respect to the relation itself).</p>
</div>
</section>
<section id="rewriting-in-ambiguous-setoid-contexts">
<h3>Rewriting in ambiguous setoid contexts<a class="headerlink" href="#rewriting-in-ambiguous-setoid-contexts" title="Permalink to this headline">¶</a></h3>
<p>One function can respect several different relations and thus it can
be declared as a morphism having multiple signatures.</p>
<div class="admonition note">
<p class="admonition-title">Example</p>
<p>Union over homogeneous lists can be given all the
following signatures: <code class="docutils literal notranslate"><span class="pre">eq</span> <span class="pre">==&gt;</span> <span class="pre">eq</span> <span class="pre">==&gt;</span> <span class="pre">eq</span></code> (<code class="docutils literal notranslate"><span class="pre">eq</span></code> being the
equality over ordered lists) <code class="docutils literal notranslate"><span class="pre">set_eq</span> <span class="pre">==&gt;</span> <span class="pre">set_eq</span> <span class="pre">==&gt;</span> <span class="pre">set_eq</span></code>
(<code class="docutils literal notranslate"><span class="pre">set_eq</span></code> being the equality over unordered lists up to duplicates),
<code class="docutils literal notranslate"><span class="pre">multiset_eq</span> <span class="pre">==&gt;</span> <span class="pre">multiset_eq</span> <span class="pre">==&gt;</span> <span class="pre">multiset_eq</span></code> (<code class="docutils literal notranslate"><span class="pre">multiset_eq</span></code>
being the equality over unordered lists).</p>
</div>
<p>To declare multiple signatures for a morphism, repeat the <a class="reference internal" href="#coq:cmd.Add-Morphism" title="Add Morphism"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Add</span> <span class="pre">Morphism</span></code></a>
command.</p>
<p>When morphisms have multiple signatures it can be the case that a
rewrite request is ambiguous, since it is unclear what relations
should be used to perform the rewriting. Contrary to the previous
implementation, the tactic will always choose the first possible
solution to the set of constraints generated by a rewrite and will not
try to find <em>all</em> the possible solutions to warn the user about them.</p>
</section>
<section id="rewriting-with-type-valued-relations">
<h3>Rewriting with <code class="docutils literal notranslate"><span class="pre">Type</span></code> valued relations<a class="headerlink" href="#rewriting-with-type-valued-relations" title="Permalink to this headline">¶</a></h3>
<p>Definitions in <code class="docutils literal notranslate"><span class="pre">Classes.Relations</span></code>, <code class="docutils literal notranslate"><span class="pre">Classes.Morphisms</span></code> and
<code class="docutils literal notranslate"><span class="pre">Classes.Equivalence</span></code> are based on <code class="docutils literal notranslate"><span class="pre">Prop</span></code>. Analogous definitions with the
same names based on <code class="docutils literal notranslate"><span class="pre">Type</span></code> are in <code class="docutils literal notranslate"><span class="pre">Classes.CRelations</span></code>,
<code class="docutils literal notranslate"><span class="pre">Classes.CMorphisms</span></code> and <code class="docutils literal notranslate"><span class="pre">Classes.CEquivalence</span></code>. The <code class="docutils literal notranslate"><span class="pre">C</span></code> identifies the
&quot;computational&quot; versions.</p>
<p>Importing these modules allows for generalized rewriting with relations of the
form <code class="docutils literal notranslate"><span class="pre">R</span> <span class="pre">:</span> <span class="pre">A</span> <span class="pre">-&gt;</span> <span class="pre">A</span> <span class="pre">-&gt;</span> <span class="pre">Type</span></code> together with support for universe polymorphism.</p>
</section>
</section>
<section id="declaring-rewrite-relations">
<h2>Declaring rewrite relations<a class="headerlink" href="#declaring-rewrite-relations" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">RewriteRelation</span> <span class="pre">A</span> <span class="pre">R</span></code> typeclass, indexed by a type and relation, registers
relations that generalized rewriting handles.
The default instances of this class are the <code class="docutils literal notranslate"><span class="pre">iff`</span></code>, <code class="docutils literal notranslate"><span class="pre">impl</span></code> and <code class="docutils literal notranslate"><span class="pre">flip</span> <span class="pre">impl</span></code>
relations on <code class="docutils literal notranslate"><span class="pre">Prop</span></code>, any declared <code class="docutils literal notranslate"><span class="pre">Equivalence</span></code> on a type <code class="docutils literal notranslate"><span class="pre">A</span></code> (including <a class="reference internal" href="../proofs/writing-proofs/equality.html#term-Leibniz-equality"><span class="xref std std-term">Leibniz equality</span></a>),
and pointwise extensions of declared relations for function types.
Users can simply add new instances of this class to register relations with the generalized rewriting
machinery.
It is used in two cases:</p>
<blockquote>
<div><ul class="simple">
<li><p>Inference of morphisms:
In some cases, generalized rewriting might face constraints of the shape
<code class="docutils literal notranslate"><span class="pre">Proper</span> <span class="pre">(S</span> <span class="pre">==&gt;</span> <span class="pre">?R)</span> <span class="pre">f</span></code> for a function <code class="docutils literal notranslate"><span class="pre">f</span></code> with no matching <code class="docutils literal notranslate"><span class="pre">Proper</span></code> instance.
In this situation, the <code class="docutils literal notranslate"><span class="pre">RewriteRelation</span></code> instances are used to instantiate
the relation <code class="docutils literal notranslate"><span class="pre">?R</span></code>. If the instantiated relation is reflexive, then the <code class="docutils literal notranslate"><span class="pre">Proper</span></code>
constraint can be automatically discharged.</p></li>
<li><p>Compatibility with ssreflect's rewrite:
The <a class="reference internal" href="../proof-engine/ssreflect-proof-language.html#coq:tacn.rewrite-(ssreflect)" title="rewrite (ssreflect)"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">rewrite</span> <span class="pre">(ssreflect)</span></code></a> tactic uses generalized rewriting when possible, by
checking that a <code class="docutils literal notranslate"><span class="pre">RewriteRelation</span> <span class="pre">R</span></code> instance exists when rewriting with a
term of type <code class="docutils literal notranslate"><span class="pre">R</span> <span class="pre">t</span> <span class="pre">u</span></code>.</p></li>
</ul>
</div></blockquote>
</section>
<section id="commands-and-tactics">
<h2>Commands and tactics<a class="headerlink" href="#commands-and-tactics" title="Permalink to this headline">¶</a></h2>
<section id="first-class-setoids-and-morphisms">
<span id="id2"></span><h3>First class setoids and morphisms<a class="headerlink" href="#first-class-setoids-and-morphisms" title="Permalink to this headline">¶</a></h3>
<p>The implementation is based on a first-class representation of
properties of relations and morphisms as typeclasses. That is, the
various combinations of properties on relations and morphisms are
represented as records and instances of these classes are put in a
hint database. For example, the declaration:</p>
<div class="coqdoc literal-block docutils container">
<span><span></span><span class="coqdoc-keyword">Add</span><span> </span><span class="coqdoc-var">Parametric</span><span> </span><span class="coqdoc-var">Relation</span><span> (</span><span class="coqdoc-var">x1</span><span> : </span><span class="coqdoc-var">T1</span><span>) ... (</span><span class="coqdoc-var">xn</span><span> : </span><span class="coqdoc-var">Tn</span><span>) : (</span><span class="coqdoc-var">A</span><span> </span><span class="coqdoc-var">t1</span><span> ... </span><span class="coqdoc-var">tn</span><span>) (</span><span class="coqdoc-var">Aeq</span><span> </span><span class="coqdoc-var">t</span><span>′1 ... </span><span class="coqdoc-var">t</span><span>′</span><span class="coqdoc-var">m</span><span>)</span><span>
  [</span><span class="coqdoc-tactic">reflexivity</span><span> </span><span class="coqdoc-var">proved</span><span> </span><span class="coqdoc-tactic">by</span><span> </span><span class="coqdoc-var">refl</span><span>]</span><span>
  [</span><span class="coqdoc-tactic">symmetry</span><span> </span><span class="coqdoc-var">proved</span><span> </span><span class="coqdoc-tactic">by</span><span> </span><span class="coqdoc-var">sym</span><span>]</span><span>
  [</span><span class="coqdoc-tactic">transitivity</span><span> </span><span class="coqdoc-var">proved</span><span> </span><span class="coqdoc-tactic">by</span><span> </span><span class="coqdoc-var">trans</span><span>]</span><span>
  </span><span class="coqdoc-keyword">as</span><span> </span><span class="coqdoc-var">id</span><span>.</span><span>
</span></span></div>
<p>is equivalent to an instance declaration:</p>
<div class="coqdoc literal-block docutils container">
<span><span></span><span class="coqdoc-keyword">Instance</span><span> </span><span class="coqdoc-var">id</span><span> (</span><span class="coqdoc-var">x1</span><span> : </span><span class="coqdoc-var">T1</span><span>) ... (</span><span class="coqdoc-var">xn</span><span> : </span><span class="coqdoc-var">Tn</span><span>) : &#64;</span><span class="coqdoc-var">Equivalence</span><span> (</span><span class="coqdoc-var">A</span><span> </span><span class="coqdoc-var">t1</span><span> ... </span><span class="coqdoc-var">tn</span><span>) (</span><span class="coqdoc-var">Aeq</span><span> </span><span class="coqdoc-var">t</span><span>′1 ... </span><span class="coqdoc-var">t</span><span>′</span><span class="coqdoc-var">m</span><span>) :=</span><span>
  [</span><span class="coqdoc-var">Equivalence_Reflexive</span><span> := </span><span class="coqdoc-var">refl</span><span>]</span><span>
  [</span><span class="coqdoc-var">Equivalence_Symmetric</span><span> := </span><span class="coqdoc-var">sym</span><span>]</span><span>
  [</span><span class="coqdoc-var">Equivalence_Transitive</span><span> := </span><span class="coqdoc-var">trans</span><span>].</span><span>
</span></span></div>
<p>The declaration itself amounts to the definition of an object of the record type
<code class="docutils literal notranslate"><span class="pre">Coq.Classes.RelationClasses.Equivalence</span></code> and a hint added to the
of a typeclass named <code class="docutils literal notranslate"><span class="pre">Proper`</span></code> defined in <code class="docutils literal notranslate"><span class="pre">Classes.Morphisms</span></code>. See the
documentation on <a class="reference internal" href="type-classes.html#typeclasses"><span class="std std-ref">Typeclasses</span></a> and the theories files in Classes for
further explanations.</p>
<p>One can inform the rewrite tactic about morphisms and relations just
by using the typeclass mechanism to declare them using the <a class="reference internal" href="type-classes.html#coq:cmd.Instance" title="Instance"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Instance</span></code></a> and
<a class="reference internal" href="../language/core/sections.html#coq:cmd.Context" title="Context"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Context</span></code></a> commands. Any object of type <code class="docutils literal notranslate"><span class="pre">Proper</span></code> (the type of
morphism declarations) in the local context will also be automatically
used by the rewriting tactic to solve constraints.</p>
<p>Other representations of first class setoids and morphisms can also be
handled by encoding them as records. In the following example, the
projections of the setoid relation and of the morphism function can be
registered as parametric relations and morphisms.</p>
<div class="admonition note">
<p class="admonition-title">Example: First class setoids</p>
<div class="coqtop literal-block docutils container">
<span class="coqtop-reset"></span><dl>
<dt><span></span><span class="coqdoc-keyword">Require</span><span> </span><span class="coqdoc-keyword">Import</span><span> </span><span class="coqdoc-var">Relation_Definitions</span><span> </span><span class="coqdoc-var">Setoid</span><span>.</span><span>
</span></dt><dt><span></span><span>
</span><span class="coqdoc-keyword">Record</span><span> </span><span class="coqdoc-var">Setoid</span><span> : </span><span class="coqdoc-keyword">Type</span><span> :=</span><span>
{ </span><span class="coqdoc-var">car</span><span>: </span><span class="coqdoc-keyword">Type</span><span>;</span><span>
  </span><span class="coqdoc-var">eq</span><span>: </span><span class="coqdoc-var">car</span><span> -&gt; </span><span class="coqdoc-var">car</span><span> -&gt; </span><span class="coqdoc-keyword">Prop</span><span>;</span><span>
  </span><span class="coqdoc-var">refl</span><span>: </span><span class="coqdoc-var">reflexive</span><span> </span><span class="coqdoc-var">_</span><span> </span><span class="coqdoc-var">eq</span><span>;</span><span>
  </span><span class="coqdoc-var">sym</span><span>: </span><span class="coqdoc-var">symmetric</span><span> </span><span class="coqdoc-var">_</span><span> </span><span class="coqdoc-var">eq</span><span>;</span><span>
  </span><span class="coqdoc-var">trans</span><span>: </span><span class="coqdoc-var">transitive</span><span> </span><span class="coqdoc-var">_</span><span> </span><span class="coqdoc-var">eq</span><span>
}.</span><span>
</span></dt><dd class="coqtop-hidden"><span>Setoid is defined
car is defined
eq is defined
refl is defined
sym is defined
trans is defined
</span></dd>
<dt><span></span><span>
</span><span class="coqdoc-keyword">Add</span><span> </span><span class="coqdoc-var">Parametric</span><span> </span><span class="coqdoc-var">Relation</span><span> (</span><span class="coqdoc-var">s</span><span> : </span><span class="coqdoc-var">Setoid</span><span>) : (&#64;</span><span class="coqdoc-var">car</span><span> </span><span class="coqdoc-var">s</span><span>) (&#64;</span><span class="coqdoc-var">eq</span><span> </span><span class="coqdoc-var">s</span><span>)</span><span>
  </span><span class="coqdoc-tactic">reflexivity</span><span> </span><span class="coqdoc-var">proved</span><span> </span><span class="coqdoc-tactic">by</span><span> (</span><span class="coqdoc-var">refl</span><span> </span><span class="coqdoc-var">s</span><span>)</span><span>
  </span><span class="coqdoc-tactic">symmetry</span><span> </span><span class="coqdoc-var">proved</span><span> </span><span class="coqdoc-tactic">by</span><span> (</span><span class="coqdoc-var">sym</span><span> </span><span class="coqdoc-var">s</span><span>)</span><span>
  </span><span class="coqdoc-tactic">transitivity</span><span> </span><span class="coqdoc-var">proved</span><span> </span><span class="coqdoc-tactic">by</span><span> (</span><span class="coqdoc-var">trans</span><span> </span><span class="coqdoc-var">s</span><span>) </span><span class="coqdoc-keyword">as</span><span> </span><span class="coqdoc-var">eq_rel</span><span>.</span><span>
</span></dt><dd class="coqtop-hidden"><span>eq_rel_relation is defined
eq_rel_Reflexive is defined
eq_rel_Symmetric is defined
eq_rel_Transitive is defined
eq_rel is defined
</span></dd>
<dt><span></span><span>
</span><span class="coqdoc-keyword">Record</span><span> </span><span class="coqdoc-var">Morphism</span><span> (</span><span class="coqdoc-var">S1</span><span> </span><span class="coqdoc-var">S2</span><span> : </span><span class="coqdoc-var">Setoid</span><span>) : </span><span class="coqdoc-keyword">Type</span><span> :=</span><span>
{ </span><span class="coqdoc-var">f</span><span>: </span><span class="coqdoc-var">car</span><span> </span><span class="coqdoc-var">S1</span><span> -&gt; </span><span class="coqdoc-var">car</span><span> </span><span class="coqdoc-var">S2</span><span>;</span><span>
  </span><span class="coqdoc-var">compat</span><span>: </span><span class="coqdoc-keyword">forall</span><span> (</span><span class="coqdoc-var">x1</span><span> </span><span class="coqdoc-var">x2</span><span> : </span><span class="coqdoc-var">car</span><span> </span><span class="coqdoc-var">S1</span><span>), </span><span class="coqdoc-var">eq</span><span> </span><span class="coqdoc-var">S1</span><span> </span><span class="coqdoc-var">x1</span><span> </span><span class="coqdoc-var">x2</span><span> -&gt; </span><span class="coqdoc-var">eq</span><span> </span><span class="coqdoc-var">S2</span><span> (</span><span class="coqdoc-var">f</span><span> </span><span class="coqdoc-var">x1</span><span>) (</span><span class="coqdoc-var">f</span><span> </span><span class="coqdoc-var">x2</span><span>)</span><span>
}.</span><span>
</span></dt><dd class="coqtop-hidden"><span>Morphism is defined
f is defined
compat is defined
</span></dd>
<dt><span></span><span>
</span><span class="coqdoc-keyword">Add</span><span> </span><span class="coqdoc-var">Parametric</span><span> </span><span class="coqdoc-var">Morphism</span><span> (</span><span class="coqdoc-var">S1</span><span> </span><span class="coqdoc-var">S2</span><span> : </span><span class="coqdoc-var">Setoid</span><span>) (</span><span class="coqdoc-var">M</span><span> : </span><span class="coqdoc-var">Morphism</span><span> </span><span class="coqdoc-var">S1</span><span> </span><span class="coqdoc-var">S2</span><span>) :</span><span>
  (&#64;</span><span class="coqdoc-var">f</span><span> </span><span class="coqdoc-var">S1</span><span> </span><span class="coqdoc-var">S2</span><span> </span><span class="coqdoc-var">M</span><span>) </span><span class="coqdoc-keyword">with</span><span> </span><span class="coqdoc-var">signature</span><span> (&#64;</span><span class="coqdoc-var">eq</span><span> </span><span class="coqdoc-var">S1</span><span> ==&gt; &#64;</span><span class="coqdoc-var">eq</span><span> </span><span class="coqdoc-var">S2</span><span>) </span><span class="coqdoc-keyword">as</span><span> </span><span class="coqdoc-var">apply_mor</span><span>.</span><span>
</span></dt><dd class="coqtop-hidden"><span>1 goal
  
  S1, S2 : Setoid
  M : Morphism S1 S2
  ============================
  </span><span class="ansi-bold">forall</span><span> x y : car S1, eq S1 x y</span><span> -&gt;</span><span> eq S2 (f S1 S2 M x) (f S1 S2 M y)
</span></dd>
<dt><span></span><span class="coqdoc-keyword">Proof</span><span>. </span><span class="coqdoc-tactic">apply</span><span> (</span><span class="coqdoc-var">compat</span><span> </span><span class="coqdoc-var">S1</span><span> </span><span class="coqdoc-var">S2</span><span> </span><span class="coqdoc-var">M</span><span>). </span><span class="coqdoc-keyword">Qed</span><span>.</span><span>
</span></dt><dd class="coqtop-hidden"><span>
No more goals.

</span></dd>
<dt><span></span><span>
</span><span class="coqdoc-keyword">Lemma</span><span> </span><span class="coqdoc-var">test</span><span> : </span><span class="coqdoc-keyword">forall</span><span> (</span><span class="coqdoc-var">S1</span><span> </span><span class="coqdoc-var">S2</span><span> : </span><span class="coqdoc-var">Setoid</span><span>) (</span><span class="coqdoc-var">m</span><span> : </span><span class="coqdoc-var">Morphism</span><span> </span><span class="coqdoc-var">S1</span><span> </span><span class="coqdoc-var">S2</span><span>)</span><span>
  (</span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> : </span><span class="coqdoc-var">car</span><span> </span><span class="coqdoc-var">S1</span><span>), </span><span class="coqdoc-var">eq</span><span> </span><span class="coqdoc-var">S1</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> -&gt; </span><span class="coqdoc-var">eq</span><span> </span><span class="coqdoc-var">S2</span><span> (</span><span class="coqdoc-var">f</span><span> </span><span class="coqdoc-var">_</span><span> </span><span class="coqdoc-var">_</span><span> </span><span class="coqdoc-var">m</span><span> </span><span class="coqdoc-var">x</span><span>) (</span><span class="coqdoc-var">f</span><span> </span><span class="coqdoc-var">_</span><span> </span><span class="coqdoc-var">_</span><span> </span><span class="coqdoc-var">m</span><span> </span><span class="coqdoc-var">y</span><span>).</span><span>
</span></dt><dd class="coqtop-hidden"><span>1 goal
  
  ============================
  </span><span class="ansi-bold">forall</span><span> (S1 S2 : Setoid) (m : Morphism S1 S2) (x y : car S1),
  eq S1 x y</span><span> -&gt;</span><span> eq S2 (f S1 S2 m x) (f S1 S2 m y)
</span></dd>
<dt><span></span><span class="coqdoc-keyword">Proof</span><span>. </span><span class="coqdoc-tactic">intros</span><span>. </span><span class="coqdoc-tactic">rewrite</span><span> </span><span class="coqdoc-var">H</span><span>. </span><span class="coqdoc-tactic">reflexivity</span><span>. </span><span class="coqdoc-keyword">Qed</span><span>.</span><span>
</span></dt><dd class="coqtop-hidden"><span>
1 goal
  
  S1, S2 : Setoid
  m : Morphism S1 S2
  x, y : car S1
  H : eq S1 x y
  ============================
  eq S2 (f S1 S2 m x) (f S1 S2 m y)

1 goal
  
  S1, S2 : Setoid
  m : Morphism S1 S2
  x, y : car S1
  H : eq S1 x y
  ============================
  eq S2 (f S1 S2 m y) (f S1 S2 m y)

No more goals.

</span></dd>
</dl>
</div>
</div>
</section>
<section id="tactics-enabled-on-user-provided-relations">
<span id="id3"></span><h3>Tactics enabled on user provided relations<a class="headerlink" href="#tactics-enabled-on-user-provided-relations" title="Permalink to this headline">¶</a></h3>
<p>The following tactics, all prefixed by <code class="docutils literal notranslate"><span class="pre">setoid_</span></code>, deal with arbitrary
registered relations and morphisms. Moreover, all the corresponding
unprefixed tactics (i.e. <a class="reference internal" href="../proofs/writing-proofs/equality.html#coq:tacn.reflexivity" title="reflexivity"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">reflexivity</span></code></a>, <a class="reference internal" href="../proofs/writing-proofs/equality.html#coq:tacn.symmetry" title="symmetry"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">symmetry</span></code></a>, <a class="reference internal" href="../proofs/writing-proofs/equality.html#coq:tacn.transitivity" title="transitivity"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">transitivity</span></code></a>,
<a class="reference internal" href="../proofs/writing-proofs/equality.html#coq:tacn.replace" title="replace"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">replace</span></code></a>, <a class="reference internal" href="../proofs/writing-proofs/equality.html#coq:tacn.rewrite" title="rewrite"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">rewrite</span></code></a>) have been extended to fall back to their prefixed
counterparts when the relation involved is not Leibniz equality.
Notice, however, that using the prefixed tactics it is possible to
pass additional arguments such as <code class="docutils literal notranslate"><span class="pre">using</span> <span class="pre">relation</span></code>.</p>
<dl class="coq tacn">
<dt class="sig sig-object coq" id="coq:tacn.setoid_reflexivity">
<em class="property"><span class="sigannot"><span class="pre">Tactic</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">setoid</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">reflexivity</span></span></span></span></span><a class="headerlink" href="#coq:tacn.setoid_reflexivity" title="Permalink to this definition">¶</a></dt>
<dt class="sig sig-object coq" id="coq:tacn.setoid_symmetry">
<em class="property"><span class="sigannot"><span class="pre">Tactic</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">setoid</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">symmetry</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">in</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span></span></span><a class="headerlink" href="#coq:tacn.setoid_symmetry" title="Permalink to this definition">¶</a></dt>
<dt class="sig sig-object coq" id="coq:tacn.setoid_transitivity">
<em class="property"><span class="sigannot"><span class="pre">Tactic</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">setoid</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">transitivity</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a></span></span><a class="headerlink" href="#coq:tacn.setoid_transitivity" title="Permalink to this definition">¶</a></dt>
<dt class="sig sig-object coq" id="coq:tacn.setoid_etransitivity">
<em class="property"><span class="sigannot"><span class="pre">Tactic</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">setoid</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">etransitivity</span></span></span></span></span><a class="headerlink" href="#coq:tacn.setoid_etransitivity" title="Permalink to this definition">¶</a></dt>
<dt class="sig sig-object coq" id="coq:tacn.setoid_rewrite">
<em class="property"><span class="sigannot"><span class="pre">Tactic</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">setoid</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">rewrite</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span class="repeated-alternative"><span class="alternative-block"><span><span><span class="pre">-&gt;</span></span></span></span><span class="alternative-separator"><span class="pre">​</span></span><span class="alternative-block"><span><span><span class="pre">&lt;-</span></span></span></span></span></span><span class="notation-sup"><span class="pre">?</span></span></span> <a class="reference internal" href="../proof-engine/tactics.html#grammar-token-one_term_with_bindings"><span class="hole"><span class="pre">one_term_with_bindings</span></span></a> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">at</span></span></span> <a class="reference internal" href="#grammar-token-rewrite_occs"><span class="hole"><span class="pre">rewrite_occs</span></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">in</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span></span></span><a class="headerlink" href="#coq:tacn.setoid_rewrite" title="Permalink to this definition">¶</a></dt>
<dt class="sig sig-object coq" id="id4">
<em class="property"><span class="sigannot"><span class="pre">Tactic</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">setoid</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">rewrite</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span class="repeated-alternative"><span class="alternative-block"><span><span><span class="pre">-&gt;</span></span></span></span><span class="alternative-separator"><span class="pre">​</span></span><span class="alternative-block"><span><span><span class="pre">&lt;-</span></span></span></span></span></span><span class="notation-sup"><span class="pre">?</span></span></span> <a class="reference internal" href="../proof-engine/tactics.html#grammar-token-one_term_with_bindings"><span class="hole"><span class="pre">one_term_with_bindings</span></span></a> <span><span><span class="pre">in</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a> <span><span><span class="pre">at</span></span></span> <a class="reference internal" href="#grammar-token-rewrite_occs"><span class="hole"><span class="pre">rewrite_occs</span></span></a></span></span><a class="headerlink" href="#id4" title="Permalink to this definition">¶</a></dt>
<dt class="sig sig-object coq" id="coq:tacn.setoid_replace">
<em class="property"><span class="sigannot"><span class="pre">Tactic</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">setoid</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">replace</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a> <span><span><span class="pre">with</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">using</span></span></span> <span><span><span class="pre">relation</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">in</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">at</span></span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../proof-engine/ltac.html#grammar-token-int_or_var"><span class="hole"><span class="pre">int_or_var</span></span></a></span><span class="notation-sup"><span class="pre">+</span></span></span></span><span class="notation-sup"><span class="pre">?</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">by</span></span></span> <a class="reference internal" href="../proof-engine/ltac.html#grammar-token-ltac_expr3"><span class="hole"><span class="pre">ltac_expr3</span></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span></span></span><a class="headerlink" href="#coq:tacn.setoid_replace" title="Permalink to this definition">¶</a></dt>
<dd><span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-rewrite_occs"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-rewrite_occs"><span class="hole">rewrite_occs</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/core/basic.html#grammar-token-integer"><span class="hole">integer</span></a></span><span class="notation-sup">+</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><p>The <code class="docutils literal notranslate"><span class="pre">using</span> <span class="pre">relation</span></code> arguments cannot be passed to the unprefixed form.
The latter argument tells the tactic what parametric relation should
be used to replace the first tactic argument with the second one. If
omitted, it defaults to the <code class="docutils literal notranslate"><span class="pre">DefaultRelation</span></code> instance on the type of
the objects. By default, it means the most recent <code class="docutils literal notranslate"><span class="pre">Equivalence</span></code> instance
in the global environment, but it can be customized by declaring
new <code class="docutils literal notranslate"><span class="pre">DefaultRelation</span></code> instances. As Leibniz equality is a declared
equivalence, it will fall back to it if no other relation is declared
on a given type.</p>
</dd></dl>

<p>Every derived tactic that is based on the unprefixed forms of the
tactics considered above will also work up to user defined relations.
For instance, it is possible to register hints for <a class="reference internal" href="../proofs/automatic-tactics/auto.html#coq:tacn.autorewrite" title="autorewrite"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">autorewrite</span></code></a> that
are not proofs of Leibniz equalities. In particular it is possible to
exploit <a class="reference internal" href="../proofs/automatic-tactics/auto.html#coq:tacn.autorewrite" title="autorewrite"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">autorewrite</span></code></a> to simulate normalization in a term rewriting
system up to user defined equalities.</p>
</section>
<section id="printing-relations-and-morphisms">
<h3>Printing relations and morphisms<a class="headerlink" href="#printing-relations-and-morphisms" title="Permalink to this headline">¶</a></h3>
<p>Use the <a class="reference internal" href="type-classes.html#coq:cmd.Print-Instances" title="Print Instances"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Print</span> <span class="pre">Instances</span></code></a> command with the class names <code class="docutils literal notranslate"><span class="pre">Reflexive</span></code>, <code class="docutils literal notranslate"><span class="pre">Symmetric</span></code>
or <code class="docutils literal notranslate"><span class="pre">Transitive</span></code> to print registered reflexive, symmetric or transitive relations and
with the class name <code class="docutils literal notranslate"><span class="pre">Proper</span></code> to print morphisms.</p>
<p>When rewriting tactics refuse
to replace a term in a context because the latter is not a composition
of morphisms, this command can be useful to understand
what additional morphisms should be registered.</p>
</section>
<section id="deprecated-syntax-and-backward-incompatibilities">
<span id="deprecated-syntax-for-generalized-rewriting"></span><h3>Deprecated syntax and backward incompatibilities<a class="headerlink" href="#deprecated-syntax-and-backward-incompatibilities" title="Permalink to this headline">¶</a></h3>
<dl class="coq cmd">
<dt class="sig sig-object coq" id="coq:cmd.Add-Setoid">
<em class="property"><span class="sigannot"><span class="pre">Command</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">Add</span></span></span> <span><span><span class="pre">Setoid</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span><sub><span class="pre">carrier</span></sub></span></a> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span><sub><span class="pre">congruence</span></sub></span></a> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span><sub><span class="pre">proofs</span></sub></span></a> <span><span><span class="pre">as</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></span><a class="headerlink" href="#coq:cmd.Add-Setoid" title="Permalink to this definition">¶</a></dt>
<dd><p>This command for declaring setoids and morphisms is also accepted due
to backward compatibility reasons.</p>
<p>Here <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span><sub><span class="pre">congruence</span></sub></span></a></span></code> is a congruence relation without parameters,
<code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span><sub><span class="pre">carrier</span></sub></span></a></span></code> is its carrier and <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span><sub><span class="pre">proofs</span></sub></span></a></span></code> is an object
of type (<code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Setoid</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">Theory</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span><sub><span class="pre">carrier</span></sub></span></a> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span><sub><span class="pre">congruence</span></sub></span></a></span></code>) (i.e. a record
packing together the reflexivity, symmetry and transitivity lemmas).
Notice that the syntax is not completely backward compatible since the
identifier was not required.</p>
</dd></dl>

<dl class="coq cmd">
<dt class="sig sig-object coq" id="coq:cmd.Add-Parametric-Setoid">
<em class="property"><span class="sigannot"><span class="pre">Command</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">Add</span></span></span> <span><span><span class="pre">Parametric</span></span></span> <span><span><span class="pre">Setoid</span></span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/core/assumptions.html#grammar-token-binder"><span class="hole"><span class="pre">binder</span></span></a></span><span class="notation-sup"><span class="pre">*</span></span></span> <span><span><span class="pre">:</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a> <span><span><span class="pre">as</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></span><a class="headerlink" href="#coq:cmd.Add-Parametric-Setoid" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="coq cmd">
<dt class="sig sig-object coq" id="coq:cmd.Add-Morphism">
<em class="property"><span class="sigannot"><span class="pre">Command</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">Add</span></span></span> <span><span><span class="pre">Morphism</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a> <span><span><span class="pre">:</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></span><a class="headerlink" href="#coq:cmd.Add-Morphism" title="Permalink to this definition">¶</a></dt>
<dt class="sig sig-object coq" id="id5">
<em class="property"><span class="sigannot"><span class="pre">Command</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">Add</span></span></span> <span><span><span class="pre">Morphism</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a> <span><span><span class="pre">with</span></span></span> <span><span><span class="pre">signature</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole"><span class="pre">term</span></span></a> <span><span><span class="pre">as</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></span><a class="headerlink" href="#id5" title="Permalink to this definition">¶</a></dt>
<dd><p>This command is restricted to the declaration of morphisms
without parameters. It is not fully backward compatible since the
property the user is asked to prove is slightly different: for n-ary
morphisms the hypotheses of the property are permuted; moreover, when
the morphism returns a proposition, the property is now stated using a
bi-implication in place of a simple implication. In practice, porting
an old development to the new semantics is usually quite simple.</p>
</dd></dl>

<dl class="coq cmd">
<dt class="sig sig-object coq" id="coq:cmd.Declare-Morphism">
<em class="property"><span class="sigannot"><span class="pre">Command</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">Declare</span></span></span> <span><span><span class="pre">Morphism</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a> <span><span><span class="pre">:</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></span><a class="headerlink" href="#coq:cmd.Declare-Morphism" title="Permalink to this definition">¶</a></dt>
<dd><p>Declares a parameter in a module type that is a morphism.</p>
</dd></dl>

<p>Notice that several limitations of the old implementation have been
lifted. In particular, it is now possible to declare several relations
with the same carrier and several signatures for the same morphism.
Moreover, it is now also possible to declare several morphisms having
the same signature. Finally, the <a class="reference internal" href="../proofs/writing-proofs/equality.html#coq:tacn.replace" title="replace"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">replace</span></code></a> and <a class="reference internal" href="../proofs/writing-proofs/equality.html#coq:tacn.rewrite" title="rewrite"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">rewrite</span></code></a> tactics can be
used to replace terms in contexts that were refused by the old
implementation. As discussed in the next section, the semantics of the
new <a class="reference internal" href="#coq:tacn.setoid_rewrite" title="setoid_rewrite"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">setoid_rewrite</span></code></a> tactic differs slightly from the old one and
<a class="reference internal" href="../proofs/writing-proofs/equality.html#coq:tacn.rewrite" title="rewrite"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">rewrite</span></code></a>.</p>
<dl class="coq tacn">
<dt class="sig sig-object coq" id="coq:tacn.head_of_constr">
<em class="property"><span class="sigannot"><span class="pre">Tactic</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">head</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">of</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">constr</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a></span></span><a class="headerlink" href="#coq:tacn.head_of_constr" title="Permalink to this definition">¶</a></dt>
<dd><p>For internal use only.  It may be removed without warning.  Do not use.</p>
</dd></dl>

</section>
</section>
<section id="extensions">
<h2>Extensions<a class="headerlink" href="#extensions" title="Permalink to this headline">¶</a></h2>
<section id="rewriting-under-binders">
<h3>Rewriting under binders<a class="headerlink" href="#rewriting-under-binders" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Due to compatibility issues, this feature is enabled only
when calling the <a class="reference internal" href="#coq:tacn.setoid_rewrite" title="setoid_rewrite"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">setoid_rewrite</span></code></a> tactic directly and not <a class="reference internal" href="../proofs/writing-proofs/equality.html#coq:tacn.rewrite" title="rewrite"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">rewrite</span></code></a>.</p>
</div>
<p>To be able to rewrite under binding constructs, one must declare
morphisms with respect to pointwise (setoid) equivalence of functions.
Example of such morphisms are the standard <code class="docutils literal notranslate"><span class="pre">all</span></code> and <code class="docutils literal notranslate"><span class="pre">ex</span></code> combinators for
universal and existential quantification respectively. They are
declared as morphisms in the <code class="docutils literal notranslate"><span class="pre">Classes.Morphisms_Prop</span></code> module. For
example, to declare that universal quantification is a morphism for
logical equivalence:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="simple">
<dt class="coqtop-hidden"><span></span><span class="coqdoc-keyword">Require</span><span> </span><span class="coqdoc-keyword">Import</span><span> </span><span class="coqdoc-var">Morphisms</span><span>.</span><span>
</span></dt></dl>
<span></span><dl>
<dt><span></span><span class="coqdoc-keyword">Instance</span><span> </span><span class="coqdoc-var">all_iff_morphism</span><span> (</span><span class="coqdoc-var">A</span><span> : </span><span class="coqdoc-keyword">Type</span><span>) :</span><span>
         </span><span class="coqdoc-var">Proper</span><span> (</span><span class="coqdoc-var">pointwise_relation</span><span> </span><span class="coqdoc-var">A</span><span> </span><span class="coqdoc-var">iff</span><span> ==&gt; </span><span class="coqdoc-var">iff</span><span>) (&#64;</span><span class="coqdoc-var">all</span><span> </span><span class="coqdoc-var">A</span><span>).</span><span>
</span></dt><dd class="coqtop-hidden"><span>1 goal
  
  A : </span><span class="ansi-fg-yellow ansi-bold">Type</span><span>
  ============================
  Proper (pointwise_relation A iff</span><span> ==&gt;</span><span> iff) (all (A:=A))
</span></dd>
</dl>
<span></span><dl>
<dt><span></span><span class="coqdoc-keyword">Proof</span><span>. </span><span class="coqdoc-var">simpl_relation</span><span>.</span><span>
</span></dt><dd><span>
1 goal
  
  A : </span><span class="ansi-fg-yellow ansi-bold">Type</span><span>
  x, y : A</span><span> -&gt;</span><span> </span><span class="ansi-fg-yellow ansi-bold">Prop</span><span>
  H : pointwise_relation A iff x y
  ============================
  all x</span><span> &lt;-&gt;</span><span> all y
</span></dd>
</dl>
</div>
<p>One then has to show that if two predicates are equivalent at every
point, their universal quantifications are equivalent. Once we have
declared such a morphism, it will be used by the setoid rewriting
tactic each time we try to rewrite under an <code class="docutils literal notranslate"><span class="pre">all</span></code> application (products
in <code class="docutils literal notranslate"><span class="pre">Prop</span></code> are implicitly translated to such applications).</p>
<p>Indeed, when rewriting under a lambda, binding variable <code class="docutils literal notranslate"><span class="pre">x</span></code>, say from <code class="docutils literal notranslate"><span class="pre">P</span> <span class="pre">x</span></code>
to <code class="docutils literal notranslate"><span class="pre">Q</span> <span class="pre">x</span></code> using the relation iff, the tactic will generate a proof of
<code class="docutils literal notranslate"><span class="pre">pointwise_relation</span> <span class="pre">A</span> <span class="pre">iff</span> <span class="pre">(fun</span> <span class="pre">x</span> <span class="pre">=&gt;</span> <span class="pre">P</span> <span class="pre">x)</span> <span class="pre">(fun</span> <span class="pre">x</span> <span class="pre">=&gt;</span> <span class="pre">Q</span> <span class="pre">x)</span></code> from the proof
of <code class="docutils literal notranslate"><span class="pre">iff</span> <span class="pre">(P</span> <span class="pre">x)</span> <span class="pre">(Q</span> <span class="pre">x)</span></code> and a constraint of the form <code class="docutils literal notranslate"><span class="pre">Proper</span> <span class="pre">(pointwise_relation</span> <span class="pre">A</span> <span class="pre">iff</span> <span class="pre">==&gt;</span> <span class="pre">?)</span> <span class="pre">m</span></code>
will be generated for the surrounding morphism <code class="docutils literal notranslate"><span class="pre">m</span></code>.</p>
<p>Hence, one can add higher-order combinators as morphisms by providing
signatures using pointwise extension for the relations on the
functional arguments (or whatever subrelation of the pointwise
extension). For example, one could declare the <code class="docutils literal notranslate"><span class="pre">map</span></code> combinator on lists
as a morphism:</p>
<div class="coqdoc literal-block docutils container">
<span><span></span><span class="coqdoc-keyword">Instance</span><span> </span><span class="coqdoc-var">map_morphism</span><span> `{</span><span class="coqdoc-var">Equivalence</span><span> </span><span class="coqdoc-var">A</span><span> </span><span class="coqdoc-var">eqA</span><span>, </span><span class="coqdoc-var">Equivalence</span><span> </span><span class="coqdoc-var">B</span><span> </span><span class="coqdoc-var">eqB</span><span>} :</span><span>
         </span><span class="coqdoc-var">Proper</span><span> ((</span><span class="coqdoc-var">eqA</span><span> ==&gt; </span><span class="coqdoc-var">eqB</span><span>) ==&gt; </span><span class="coqdoc-var">list_equiv</span><span> </span><span class="coqdoc-var">eqA</span><span> ==&gt; </span><span class="coqdoc-var">list_equiv</span><span> </span><span class="coqdoc-var">eqB</span><span>) (&#64;</span><span class="coqdoc-var">map</span><span> </span><span class="coqdoc-var">A</span><span> </span><span class="coqdoc-var">B</span><span>).</span><span>
</span></span></div>
<p>where <code class="docutils literal notranslate"><span class="pre">list_equiv</span></code> implements an equivalence on lists parameterized by
an equivalence on the elements.</p>
<p>Note that when one does rewriting with a lemma under a binder using
<a class="reference internal" href="#coq:tacn.setoid_rewrite" title="setoid_rewrite"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">setoid_rewrite</span></code></a>, the application of the lemma may capture the bound
variable, as the semantics are different from rewrite where the lemma
is first matched on the whole term. With the new <a class="reference internal" href="#coq:tacn.setoid_rewrite" title="setoid_rewrite"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">setoid_rewrite</span></code></a>,
matching is done on each subterm separately and in its local
context, and all matches are rewritten <em>simultaneously</em> by
default. The semantics of the previous <a class="reference internal" href="#coq:tacn.setoid_rewrite" title="setoid_rewrite"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">setoid_rewrite</span></code></a> implementation
can almost be recovered using the <code class="docutils literal notranslate"><span class="pre">at</span> <span class="pre">1</span></code> modifier.</p>
</section>
<section id="subrelations">
<h3>Subrelations<a class="headerlink" href="#subrelations" title="Permalink to this headline">¶</a></h3>
<p>Subrelations can be used to specify that one relation is included in
another, so that morphism signatures for one can be used for the
other. If a signature mentions a relation <code class="docutils literal notranslate"><span class="pre">R</span></code> on the left of an
arrow <code class="docutils literal notranslate"><span class="pre">==&gt;</span></code>, then the signature also applies for any relation <code class="docutils literal notranslate"><span class="pre">S</span></code> that is
smaller than <code class="docutils literal notranslate"><span class="pre">R</span></code>, and the inverse applies on the right of an arrow. One
can then declare only a few morphisms instances that generate the
complete set of signatures for a particular <a class="reference internal" href="../language/core/definitions.html#term-constant"><span class="xref std std-term">constant</span></a>. By default, the
only declared subrelation is <code class="docutils literal notranslate"><span class="pre">iff</span></code>, which is a subrelation of <code class="docutils literal notranslate"><span class="pre">impl</span></code> and
<code class="docutils literal notranslate"><span class="pre">inverse</span> <span class="pre">impl</span></code> (the dual of implication). That’s why we can declare only
two morphisms for conjunction: <code class="docutils literal notranslate"><span class="pre">Proper</span> <span class="pre">(impl</span> <span class="pre">==&gt;</span> <span class="pre">impl</span> <span class="pre">==&gt;</span> <span class="pre">impl)</span> <span class="pre">and</span></code> and
<code class="docutils literal notranslate"><span class="pre">Proper</span> <span class="pre">(iff</span> <span class="pre">==&gt;</span> <span class="pre">iff</span> <span class="pre">==&gt;</span> <span class="pre">iff)</span> <span class="pre">and</span></code>. This is sufficient to satisfy any
rewriting constraints arising from a rewrite using <code class="docutils literal notranslate"><span class="pre">iff</span></code>, <code class="docutils literal notranslate"><span class="pre">impl</span></code> or
<code class="docutils literal notranslate"><span class="pre">inverse</span> <span class="pre">impl</span></code> through <code class="docutils literal notranslate"><span class="pre">and</span></code>.</p>
<p>Subrelations are implemented in <code class="docutils literal notranslate"><span class="pre">Classes.Morphisms</span></code> and are a prime
example of a mostly user-space extension of the algorithm.</p>
</section>
<section id="constant-unfolding">
<h3>Constant unfolding<a class="headerlink" href="#constant-unfolding" title="Permalink to this headline">¶</a></h3>
<p>The resolution tactic is based on typeclasses and hence regards user-defined
<a class="reference internal" href="../language/core/definitions.html#term-constant"><span class="xref std std-term">constants</span></a> as transparent by default. This may slow down the
resolution due to a lot of unifications (all the declared <code class="docutils literal notranslate"><span class="pre">Proper</span></code>
instances are tried at each node of the search tree). To speed it up,
declare your constant as rigid for proof search using the command
<a class="reference internal" href="type-classes.html#coq:cmd.Typeclasses-Opaque" title="Typeclasses Opaque"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Typeclasses</span> <span class="pre">Opaque</span></code></a>.</p>
</section>
</section>
<section id="strategies-for-rewriting">
<span id="strategies4rewriting"></span><h2>Strategies for rewriting<a class="headerlink" href="#strategies-for-rewriting" title="Permalink to this headline">¶</a></h2>
<section id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<dl class="coq tacn">
<dt class="sig sig-object coq" id="coq:tacn.rewrite_strat">
<em class="property"><span class="sigannot"><span class="pre">Tactic</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">rewrite</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">strat</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">in</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span></span></span><a class="headerlink" href="#coq:tacn.rewrite_strat" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite using <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a></span></code> in the conclusion or in the hypothesis <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></code>.</p>
<dl class="coq exn">
<dt class="sig sig-object coq" id="coq:exn.Nothing-to-rewrite">
<em class="property"><span class="sigannot"><span class="pre">Error</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">Nothing</span></span></span> <span><span><span class="pre">to</span></span></span> <span><span><span class="pre">rewrite.</span></span></span></span></span><a class="headerlink" href="#coq:exn.Nothing-to-rewrite" title="Permalink to this definition">¶</a></dt>
<dd><p>The strategy didn't find any matches.</p>
</dd></dl>

<dl class="coq exn">
<dt class="sig sig-object coq" id="coq:exn.No-progress-made">
<em class="property"><span class="sigannot"><span class="pre">Error</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">No</span></span></span> <span><span><span class="pre">progress</span></span></span> <span><span><span class="pre">made.</span></span></span></span></span><a class="headerlink" href="#coq:exn.No-progress-made" title="Permalink to this definition">¶</a></dt>
<dd><p>If the strategy succeeded but made no progress.</p>
</dd></dl>

<dl class="coq exn">
<dt class="sig sig-object coq" id="coq:exn.Unable-to-satisfy-the-rewriting-constraints">
<em class="property"><span class="sigannot"><span class="pre">Error</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">Unable</span></span></span> <span><span><span class="pre">to</span></span></span> <span><span><span class="pre">satisfy</span></span></span> <span><span><span class="pre">the</span></span></span> <span><span><span class="pre">rewriting</span></span></span> <span><span><span class="pre">constraints.</span></span></span></span></span><a class="headerlink" href="#coq:exn.Unable-to-satisfy-the-rewriting-constraints" title="Permalink to this definition">¶</a></dt>
<dd><p>If the strategy succeeded and made progress but the
corresponding rewriting constraints are not satisfied.</p>
</dd></dl>

<p><a class="reference internal" href="#coq:tacn.setoid_rewrite" title="setoid_rewrite"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">setoid_rewrite</span></code></a> <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a></span></code> is basically equivalent to
<code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">rewrite</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">strat</span></span></span> <span><span><span class="pre">outermost</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a></span></code>.</p>
</dd></dl>

<dl class="coq tacn">
<dt class="sig sig-object coq" id="coq:tacn.rewrite_db">
<em class="property"><span class="sigannot"><span class="pre">Tactic</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">rewrite</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">db</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span><sub><span class="pre">1</span></sub></span></a> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">in</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span><sub><span class="pre">2</span></sub></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span></span></span><a class="headerlink" href="#coq:tacn.rewrite_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to <a class="reference internal" href="#coq:tacn.rewrite_strat" title="rewrite_strat"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">rewrite_strat</span></code></a> <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">(topdown</span></span></span> <span><span><span class="pre">(hints</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span><sub><span class="pre">1</span></sub></span></a><span><span><span class="pre">))</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">in</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span><sub><span class="pre">2</span></sub></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span></span></code></p>
</dd></dl>

</section>
<section id="definitions">
<h3>Definitions<a class="headerlink" href="#definitions" title="Permalink to this headline">¶</a></h3>
<p>The generalized rewriting tactic is based on a set of strategies that can be
combined to create custom rewriting procedures. Its set of strategies is based
on the programmable rewriting strategies with generic traversals by Visser et al.
<a class="reference internal" href="../zebibliography.html#luttik97specificationof" id="id6">[LV97]</a> <a class="reference internal" href="../zebibliography.html#visser98" id="id7">[VBT98]</a>, which formed the core of
the Stratego transformation language <a class="reference internal" href="../zebibliography.html#visser01" id="id8">[Vis01]</a>. Rewriting strategies
are applied using the tactic <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">rewrite</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">strat</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a></span></code>.</p>
<span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-rewstrategy"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole">rewstrategy</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole">one_term</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>&lt;-</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole">one_term</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>fail</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>id</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>refl</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>progress</span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole">rewstrategy</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>try</span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole">rewstrategy</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole">rewstrategy</span></a> <span><span>;</span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole">rewstrategy</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>choice</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole">rewstrategy</span></a></span><span class="notation-sup">+</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>repeat</span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole">rewstrategy</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>any</span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole">rewstrategy</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>subterm</span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole">rewstrategy</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>subterms</span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole">rewstrategy</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>innermost</span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole">rewstrategy</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>outermost</span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole">rewstrategy</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>bottomup</span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole">rewstrategy</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>topdown</span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole">rewstrategy</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>hints</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>terms</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole">one_term</span></a></span><span class="notation-sup">*</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>eval</span></span> <a class="reference internal" href="../proofs/writing-proofs/equality.html#grammar-token-red_expr"><span class="hole">red_expr</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>fold</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole">one_term</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>(</span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole">rewstrategy</span></a> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>old</span></span><span><span>_</span></span><span><span>hints</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a></span></code></dt><dd><p>lemma, left to right</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">&lt;-</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a></span></code></dt><dd><p>lemma, right to left</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">fail</span></span></span></span></code></dt><dd><p>failure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">id</span></span></span></span></code></dt><dd><p>identity</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">refl</span></span></span></span></code></dt><dd><p>reflexivity</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">progress</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a></span></code></dt><dd><p>progress</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">try</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a></span></code></dt><dd><p>try catch</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a> <span><span><span class="pre">;</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a></span></code></dt><dd><p>composition</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">choice</span></span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a></span><span class="notation-sup"><span class="pre">+</span></span></span></span></code></dt><dd><p>first successful strategy</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">repeat</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a></span></code></dt><dd><p>one or more</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">any</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a></span></code></dt><dd><p>zero or more</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">subterm</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a></span></code></dt><dd><p>one subterm</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">subterms</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a></span></code></dt><dd><p>all subterms</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">innermost</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a></span></code></dt><dd><p>Innermost first.
When there are multiple nested matches in a subterm, the innermost subterm
is rewritten.  For <a class="reference internal" href="#rewrite-strat-innermost-outermost"><span class="std std-ref">example</span></a>,
rewriting <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">(a</span></span></span> <span><span><span class="pre">+</span></span></span> <span><span><span class="pre">b)</span></span></span> <span><span><span class="pre">+</span></span></span> <span><span><span class="pre">c</span></span></span></span></code> with Nat.add_comm gives <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">(b</span></span></span> <span><span><span class="pre">+</span></span></span> <span><span><span class="pre">a)</span></span></span> <span><span><span class="pre">+</span></span></span> <span><span><span class="pre">c</span></span></span></span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">outermost</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a></span></code></dt><dd><p>Outermost first.
When there are multiple nested matches in a subterm, the outermost subterm
is rewritten.  For <a class="reference internal" href="#rewrite-strat-innermost-outermost"><span class="std std-ref">example</span></a>,
rewriting <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">(a</span></span></span> <span><span><span class="pre">+</span></span></span> <span><span><span class="pre">b)</span></span></span> <span><span><span class="pre">+</span></span></span> <span><span><span class="pre">c</span></span></span></span></code> with Nat.add_comm gives <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">c</span></span></span> <span><span><span class="pre">+</span></span></span> <span><span><span class="pre">(a</span></span></span> <span><span><span class="pre">+</span></span></span> <span><span><span class="pre">b)</span></span></span></span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">bottomup</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a></span></code></dt><dd><p>bottom-up</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">topdown</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a></span></code></dt><dd><p>top-down</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">hints</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></code></dt><dd><p>apply hints from hint database</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">terms</span></span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/core/basic.html#grammar-token-one_term"><span class="hole"><span class="pre">one_term</span></span></a></span><span class="notation-sup"><span class="pre">*</span></span></span></span></code></dt><dd><p>any of the terms</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">eval</span></span></span> <a class="reference internal" href="../proofs/writing-proofs/equality.html#grammar-token-red_expr"><span class="hole"><span class="pre">red_expr</span></span></a></span></code></dt><dd><p>apply reduction</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">fold</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole"><span class="pre">term</span></span></a></span></code></dt><dd><p>unify</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">(</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a> <span><span><span class="pre">)</span></span></span></span></code></dt><dd><p>to be documented</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">old</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">hints</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></code></dt><dd><p>to be documented</p>
</dd>
</dl>
<p>Conceptually, a few of these are defined in terms of the others using a
primitive fixpoint operator <code class="docutils literal notranslate"><span class="pre">fix</span></code>, which the tactic doesn't currently support:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">try</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">choice</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a> <span><span><span class="pre">id</span></span></span></span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">any</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">fix</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a><span><span><span class="pre">.</span></span></span> <span><span><span class="pre">try</span></span></span> <span><span><span class="pre">(</span></span></span><a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a> <span><span><span class="pre">;</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a><span><span><span class="pre">)</span></span></span></span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">repeat</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a> <span><span><span class="pre">:=</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a><span><span><span class="pre">;</span></span></span> <span><span><span class="pre">any</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a></span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">bottomup</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">fix</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a><span><span><span class="pre">.</span></span></span> <span><span><span class="pre">(choice</span></span></span> <span><span><span class="pre">(progress</span></span></span> <span><span><span class="pre">(subterms</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a><span><span><span class="pre">))</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a><span><span><span class="pre">)</span></span></span> <span><span><span class="pre">;</span></span></span> <span><span><span class="pre">try</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">topdown</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">fix</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a><span><span><span class="pre">.</span></span></span> <span><span><span class="pre">(choice</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a> <span><span><span class="pre">(progress</span></span></span> <span><span><span class="pre">(subterms</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a><span><span><span class="pre">)))</span></span></span> <span><span><span class="pre">;</span></span></span> <span><span><span class="pre">try</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">innermost</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">fix</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a><span><span><span class="pre">.</span></span></span> <span><span><span class="pre">(choice</span></span></span> <span><span><span class="pre">(subterm</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a><span><span><span class="pre">)</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a><span><span><span class="pre">)</span></span></span></span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">outermost</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">fix</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a><span><span><span class="pre">.</span></span></span> <span><span><span class="pre">(choice</span></span></span> <a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a> <span><span><span class="pre">(subterm</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a><span><span><span class="pre">))</span></span></span></span></code></p></li>
</ul>
<p>The basic control strategy semantics are straightforward: strategies
are applied to subterms of the term to rewrite, starting from the root
of the term. The lemma strategies unify the left-hand-side of the
lemma with the current subterm and on success rewrite it to the right-
hand-side. Composition can be used to continue rewriting on the
current subterm. The <code class="docutils literal notranslate"><span class="pre">fail</span></code> strategy always fails while the identity
strategy succeeds without making progress. The reflexivity strategy
succeeds, making progress using a reflexivity proof of rewriting.
<code class="docutils literal notranslate"><span class="pre">progress</span></code> tests progress of the argument <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a></span></code> and
fails if no progress was made, while <code class="docutils literal notranslate"><span class="pre">try</span></code> always succeeds, catching
failures. <code class="docutils literal notranslate"><span class="pre">choice</span></code> uses the first successful strategy in the list of
&#64;rewstrategy. One can iterate a strategy at least 1 time using
<code class="docutils literal notranslate"><span class="pre">repeat</span></code> and at least 0 times using <code class="docutils literal notranslate"><span class="pre">any</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">subterm</span></code> and <code class="docutils literal notranslate"><span class="pre">subterms</span></code> strategies apply their argument <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a></span></code> to
respectively one or all subterms of the current term under
consideration, left-to-right. <code class="docutils literal notranslate"><span class="pre">subterm</span></code> stops at the first subterm for
which <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a></span></code> made progress. The composite strategies <code class="docutils literal notranslate"><span class="pre">innermost</span></code> and <code class="docutils literal notranslate"><span class="pre">outermost</span></code>
perform a single innermost or outermost rewrite using their argument
<code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-rewstrategy"><span class="hole"><span class="pre">rewstrategy</span></span></a></span></code>. Their counterparts <code class="docutils literal notranslate"><span class="pre">bottomup</span></code> and <code class="docutils literal notranslate"><span class="pre">topdown</span></code> perform as many
rewritings as possible, starting from the bottom or the top of the
term.</p>
<p>Hint databases created for <a class="reference internal" href="../proofs/automatic-tactics/auto.html#coq:tacn.autorewrite" title="autorewrite"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">autorewrite</span></code></a> can also be used
by <a class="reference internal" href="#coq:tacn.rewrite_strat" title="rewrite_strat"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">rewrite_strat</span></code></a> using the <code class="docutils literal notranslate"><span class="pre">hints</span></code> strategy that applies any of the
lemmas at the current subterm. The <code class="docutils literal notranslate"><span class="pre">terms</span></code> strategy takes the lemma
names directly as arguments. The <code class="docutils literal notranslate"><span class="pre">eval</span></code> strategy expects a reduction
expression (see <a class="reference internal" href="../proofs/writing-proofs/equality.html#applyingconversionrules"><span class="std std-ref">Applying conversion rules</span></a>) and succeeds
if it reduces the subterm under consideration. The <code class="docutils literal notranslate"><span class="pre">fold</span></code> strategy takes
a <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><code class="xref std std-token docutils literal notranslate"><span class="pre">term</span></code></a> and tries to <em>unify</em> it to the current subterm, converting it to <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><code class="xref std std-token docutils literal notranslate"><span class="pre">term</span></code></a>
on success. It is stronger than the tactic <code class="docutils literal notranslate"><span class="pre">fold</span></code>.</p>
<div class="admonition note" id="rewrite-strat-innermost-outermost">
<p class="admonition-title">Example: <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">innermost</span></span></span></span></code> and <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">outermost</span></span></span></span></code></p>
<p>The type of <code class="docutils literal notranslate"><span class="pre">Nat.add_comm</span></code> is <code class="docutils literal notranslate"><span class="pre">forall</span> <span class="pre">n</span> <span class="pre">m</span> <span class="pre">:</span> <span class="pre">nat,</span> <span class="pre">n</span> <span class="pre">+</span> <span class="pre">m</span> <span class="pre">=</span> <span class="pre">m</span> <span class="pre">+</span> <span class="pre">n</span></code>.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span></span><span class="coqdoc-keyword">Require</span><span> </span><span class="coqdoc-keyword">Import</span><span> </span><span class="coqdoc-var">Coq.Arith.Arith</span><span>.</span><span>
</span></dt><dd><span>[Loading ML file ring_plugin.cmxs (using legacy method) ... done]
</span></dd>
<dt><span></span><span class="coqdoc-keyword">Set</span><span> </span><span class="coqdoc-keyword">Printing</span><span> </span><span class="coqdoc-var">Parentheses</span><span>.</span><span>
</span></dt><dt><span></span><span class="coqdoc-keyword">Goal</span><span> </span><span class="coqdoc-keyword">forall</span><span> </span><span class="coqdoc-var">a</span><span> </span><span class="coqdoc-var">b</span><span> </span><span class="coqdoc-var">c</span><span>: </span><span class="coqdoc-var">nat</span><span>, </span><span class="coqdoc-var">a</span><span> + </span><span class="coqdoc-var">b</span><span> + </span><span class="coqdoc-var">c</span><span> = 0.</span><span>
</span></dt><dd><span>1 goal
  
  ============================
  </span><span class="ansi-bold">forall</span><span> a b c : nat, ((a</span><span> +</span><span> b)</span><span> +</span><span> c)</span><span> =</span><span> 0
</span></dd>
<dt><span></span><span class="coqdoc-var">rewrite_strat</span><span> </span><span class="coqdoc-var">innermost</span><span> </span><span class="coqdoc-var">Nat.add_comm</span><span>.</span><span>
</span></dt><dd><span>1 goal
  
  ============================
  </span><span class="ansi-bold">forall</span><span> a b c : nat, ((b</span><span> +</span><span> a)</span><span> +</span><span> c)</span><span> =</span><span> 0
</span></dd>
</dl>
<span></span><dl>
<dt class="coqtop-hidden"><span></span><span class="coqdoc-keyword">Abort</span><span>.</span><span>
</span></dt><dt class="coqtop-hidden"><span></span><span class="coqdoc-keyword">Goal</span><span> </span><span class="coqdoc-keyword">forall</span><span> </span><span class="coqdoc-var">a</span><span> </span><span class="coqdoc-var">b</span><span> </span><span class="coqdoc-var">c</span><span>: </span><span class="coqdoc-var">nat</span><span>, </span><span class="coqdoc-var">a</span><span> + </span><span class="coqdoc-var">b</span><span> + </span><span class="coqdoc-var">c</span><span> = 0.</span><span>
</span></dt><dd class="coqtop-hidden"><span>1 goal
  
  ============================
  </span><span class="ansi-bold">forall</span><span> a b c : nat, ((a</span><span> +</span><span> b)</span><span> +</span><span> c)</span><span> =</span><span> 0
</span></dd>
</dl>
</div>
<p>Using <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">outermost</span></span></span></span></code> instead gives this result:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span></span><span class="coqdoc-var">rewrite_strat</span><span> </span><span class="coqdoc-var">outermost</span><span> </span><span class="coqdoc-var">Nat.add_comm</span><span>.</span><span>
</span></dt><dd><span>1 goal
  
  ============================
  </span><span class="ansi-bold">forall</span><span> a b c : nat, (c</span><span> +</span><span> (a</span><span> +</span><span> b))</span><span> =</span><span> 0
</span></dd>
</dl>
<span></span><dl class="simple">
<dt class="coqtop-hidden"><span></span><span class="coqdoc-keyword">Abort</span><span>.</span><span>
</span></dt></dl>
</div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../proofs/automatic-tactics/auto.html" class="btn btn-neutral float-left" title="Programmable proof search" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../proofs/creating-tactics/index.html" class="btn btn-neutral float-right" title="Creating new tactics" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 1999-2021, Inria, CNRS and contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  




  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Other versions</span>
      v: 8.18.0
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="https://coq.github.io/doc/master/refman/">dev</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/current/refman/">stable</a></dd>
        
          <dd><a href="https://coq.github.io/doc/v8.18/refman/">8.18</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.17.1/refman/">8.17</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.16.1/refman/">8.16</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.15.2/refman/">8.15</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.14.1/refman/">8.14</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.13.2/refman/">8.13</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.12.2/refman/">8.12</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.11.2/refman/">8.11</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.10.2/refman/">8.10</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.9.1/refman/">8.9</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.8.2/refman/">8.8</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.7.2/refman/">8.7</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.6.1/refman/">8.6</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.5pl3/refman/">8.5</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.4pl6/refman/">8.4</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.3pl5/refman/">8.3</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.2pl3/refman/">8.2</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.1pl6/refman/">8.1</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.0/doc/">8.0</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="https://github.com/coq/coq/releases/download/V8.18.0/coq-8.18.0-reference-manual.pdf">PDF</a></dd>
        
      </dl>
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>