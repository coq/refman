<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ltac2 &mdash; Coq 8.18.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/ansi.css" type="text/css" />
      <link rel="stylesheet" href="../_static/coqdoc.css" type="text/css" />
      <link rel="stylesheet" href="../_static/notations.css" type="text/css" />
      <link rel="stylesheet" href="../_static/pre-text.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/notations.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Libraries and plugins" href="../using/libraries/index.html" />
    <link rel="prev" title="Ltac" href="ltac.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Coq
          </a>
              <div class="version">
                8.18.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Introduction and Contents</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Specification language</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language/core/index.html">Core language</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../language/core/basic.html">Basic notions and conventions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/core/basic.html#syntax-and-lexical-conventions">Syntax and lexical conventions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/core/basic.html#syntax-conventions">Syntax conventions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/core/basic.html#lexical-conventions">Lexical conventions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/basic.html#essential-vocabulary">Essential vocabulary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/basic.html#settings">Settings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/core/basic.html#attributes">Attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/core/basic.html#flags-options-and-tables">Flags, Options and Tables</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/core/sorts.html">Sorts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../language/core/assumptions.html">Functions and assumptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/core/assumptions.html#binders">Binders</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/assumptions.html#functions-fun-and-function-types-forall">Functions (fun) and function types (forall)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/assumptions.html#function-application">Function application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/assumptions.html#assumptions">Assumptions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/core/definitions.html">Definitions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/core/definitions.html#let-in-definitions">Let-in definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/definitions.html#type-cast">Type cast</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/definitions.html#top-level-definitions">Top-level definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/definitions.html#assertions-and-proofs">Assertions and proofs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/core/conversion.html">Conversion rules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/core/conversion.html#conversion">α-conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/conversion.html#reduction">β-reduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/conversion.html#delta-reduction-sect">δ-reduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/conversion.html#id4">ι-reduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/conversion.html#id7">ζ-reduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/conversion.html#expansion">η-expansion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/conversion.html#examples">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/conversion.html#proof-irrelevance">Proof Irrelevance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/conversion.html#convertibility">Convertibility</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/cic.html">Typing rules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/cic.html#the-terms">The terms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/cic.html#id6">Typing rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/cic.html#subtyping-rules">Subtyping rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/cic.html#the-calculus-of-inductive-constructions-with-impredicative-set">The Calculus of Inductive Constructions with impredicative Set</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/core/variants.html">Variants and the <code class="docutils literal notranslate"><span class="pre">match</span></code> construct</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/core/variants.html#id1">Variants</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/core/variants.html#private-matching-inductive-types">Private (matching) inductive types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/variants.html#definition-by-cases-match">Definition by cases: match</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/core/records.html">Record types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/core/records.html#defining-record-types">Defining record types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/records.html#constructing-records">Constructing records</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/records.html#accessing-fields-projections">Accessing fields (projections)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/records.html#settings-for-printing-records">Settings for printing records</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/records.html#primitive-projections">Primitive Projections</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/core/records.html#reduction">Reduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/core/records.html#compatibility-constants-for-projections">Compatibility Constants for Projections</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/core/inductive.html">Inductive types and recursive functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/core/inductive.html#inductive-types">Inductive types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/core/inductive.html#simple-inductive-types">Simple inductive types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/core/inductive.html#simple-indexed-inductive-types">Simple indexed inductive types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/core/inductive.html#parameterized-inductive-types">Parameterized inductive types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/core/inductive.html#mutually-defined-inductive-types">Mutually defined inductive types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/inductive.html#recursive-functions-fix">Recursive functions: fix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/inductive.html#top-level-recursive-functions">Top-level recursive functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/inductive.html#theory-of-inductive-definitions">Theory of inductive definitions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/core/inductive.html#types-of-inductive-objects">Types of inductive objects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/core/inductive.html#well-formed-inductive-definitions">Well-formed inductive definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/core/inductive.html#destructors">Destructors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/core/inductive.html#fixpoint-definitions">Fixpoint definitions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/core/coinductive.html">Coinductive types and corecursive functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/core/coinductive.html#coinductive-types">Coinductive types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/core/coinductive.html#caveat">Caveat</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/coinductive.html#co-recursive-functions-cofix">Co-recursive functions: cofix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/coinductive.html#top-level-definitions-of-corecursive-functions">Top-level definitions of corecursive functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/core/sections.html">Sections</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/core/sections.html#typing-rules-used-at-the-end-of-a-section">Typing rules used at the end of a section</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/core/modules.html">The Module System</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/core/modules.html#modules-and-module-types">Modules and module types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/modules.html#using-modules">Using modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/core/modules.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/modules.html#typing-modules">Typing Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/modules.html#qualified-names">Qualified names</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/modules.html#controlling-the-scope-of-commands-with-locality-attributes">Controlling the scope of commands with locality attributes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/core/primitive.html">Primitive objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/core/primitive.html#primitive-integers">Primitive Integers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/primitive.html#primitive-floats">Primitive Floats</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/core/primitive.html#primitive-arrays">Primitive Arrays</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/universe-polymorphism.html">Polymorphic Universes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/universe-polymorphism.html#general-presentation">General Presentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/universe-polymorphism.html#polymorphic-monomorphic">Polymorphic, Monomorphic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/universe-polymorphism.html#cumulative-noncumulative">Cumulative, NonCumulative</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../addendum/universe-polymorphism.html#specifying-cumulativity">Specifying cumulativity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/universe-polymorphism.html#cumulativity-weak-constraints">Cumulativity Weak Constraints</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/universe-polymorphism.html#global-and-local-universes">Global and local universes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/universe-polymorphism.html#conversion-and-unification">Conversion and unification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/universe-polymorphism.html#minimization">Minimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/universe-polymorphism.html#explicit-universes">Explicit Universes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/universe-polymorphism.html#printing-universes">Printing universes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../addendum/universe-polymorphism.html#polymorphic-definitions">Polymorphic definitions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/universe-polymorphism.html#universe-polymorphism-and-sections">Universe polymorphism and sections</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/sprop.html">SProp (proof irrelevant propositions)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/sprop.html#basic-constructs">Basic constructs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/sprop.html#encodings-for-strict-propositions">Encodings for strict propositions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/sprop.html#definitional-uip">Definitional UIP</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../addendum/sprop.html#non-termination-with-uip">Non Termination with UIP</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/sprop.html#lack-of-tactic-support">Lack of tactic support</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../language/extensions/index.html">Language extensions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../language/extensions/evars.html">Existential variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/evars.html#inferable-subterms">Inferable subterms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/evars.html#e-tactics-that-can-create-existential-variables">e* tactics that can create existential variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/evars.html#automatic-resolution-of-existential-variables">Automatic resolution of existential variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/evars.html#explicit-display-of-existential-instances-for-pretty-printing">Explicit display of existential instances for pretty-printing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/evars.html#solving-existential-variables-using-tactics">Solving existential variables using tactics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/extensions/implicit-arguments.html">Implicit arguments</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/implicit-arguments.html#the-different-kinds-of-implicit-arguments">The different kinds of implicit arguments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/implicit-arguments.html#implicit-arguments-inferable-from-the-knowledge-of-other-arguments-of-a-function">Implicit arguments inferable from the knowledge of other arguments of a function</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/implicit-arguments.html#implicit-arguments-inferable-by-resolution">Implicit arguments inferable by resolution</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/implicit-arguments.html#maximal-and-non-maximal-insertion-of-implicit-arguments">Maximal and non-maximal insertion of implicit arguments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/implicit-arguments.html#trailing-implicit-arguments">Trailing Implicit Arguments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/implicit-arguments.html#casual-use-of-implicit-arguments">Casual use of implicit arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/implicit-arguments.html#declaration-of-implicit-arguments">Declaration of implicit arguments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/implicit-arguments.html#implicit-argument-binders">Implicit Argument Binders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/implicit-arguments.html#mode-for-automatic-declaration-of-implicit-arguments">Mode for automatic declaration of implicit arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/implicit-arguments.html#controlling-strict-implicit-arguments">Controlling strict implicit arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/implicit-arguments.html#controlling-contextual-implicit-arguments">Controlling contextual implicit arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/implicit-arguments.html#controlling-reversible-pattern-implicit-arguments">Controlling reversible-pattern implicit arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/implicit-arguments.html#controlling-the-insertion-of-implicit-arguments-not-followed-by-explicit-arguments">Controlling the insertion of implicit arguments not followed by explicit arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/implicit-arguments.html#combining-manual-declaration-and-automatic-declaration">Combining manual declaration and automatic declaration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/implicit-arguments.html#explicit-applications">Explicit applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/implicit-arguments.html#displaying-implicit-arguments">Displaying implicit arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/implicit-arguments.html#displaying-implicit-arguments-when-pretty-printing">Displaying implicit arguments when pretty-printing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/implicit-arguments.html#interaction-with-subtyping">Interaction with subtyping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/implicit-arguments.html#deactivation-of-implicit-arguments-for-parsing">Deactivation of implicit arguments for parsing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/implicit-arguments.html#implicit-types-of-variables">Implicit types of variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/implicit-arguments.html#implicit-generalization">Implicit generalization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/extensions/match.html">Extended pattern matching</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#variants-and-extensions-of-match">Variants and extensions of <code class="code Coq docutils literal notranslate"><span class="keyword"><span class="pre">match</span></span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/match.html#multiple-and-nested-pattern-matching">Multiple and nested pattern matching</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/match.html#pattern-matching-on-boolean-values-the-if-expression">Pattern-matching on boolean values: the if expression</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/match.html#irrefutable-patterns-the-destructuring-let-variants">Irrefutable patterns: the destructuring let variants</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/match.html#controlling-pretty-printing-of-match-expressions">Controlling pretty-printing of match expressions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/match.html#conventions-about-unused-pattern-matching-variables">Conventions about unused pattern-matching variables</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#patterns">Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#multiple-patterns">Multiple patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#aliasing-subpatterns">Aliasing subpatterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#nested-patterns">Nested patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#disjunctive-patterns">Disjunctive patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#about-patterns-of-parametric-types">About patterns of parametric types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/match.html#parameters-in-patterns">Parameters in patterns</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#implicit-arguments-in-patterns">Implicit arguments in patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#matching-objects-of-dependent-types">Matching objects of dependent types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#understanding-dependencies-in-patterns">Understanding dependencies in patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#when-the-elimination-predicate-must-be-provided">When the elimination predicate must be provided</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/match.html#dependent-pattern-matching">Dependent pattern matching</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/match.html#multiple-dependent-pattern-matching">Multiple dependent pattern matching</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/match.html#patterns-in-in">Patterns in <code class="docutils literal notranslate"><span class="pre">in</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#using-pattern-matching-to-write-proofs">Using pattern matching to write proofs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#pattern-matching-on-inductive-objects-involving-local-definitions">Pattern-matching on inductive objects involving local definitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#pattern-matching-and-coercions">Pattern-matching and coercions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/match.html#when-does-the-expansion-strategy-fail">When does the expansion strategy fail?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user-extensions/syntax-extensions.html">Syntax extensions and notation scopes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#notations">Notations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#basic-notations">Basic notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#precedences-and-associativity">Precedences and associativity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#complex-notations">Complex notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#simple-factorization-rules">Simple factorization rules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#use-of-notations-for-printing">Use of notations for printing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#the-infix-command">The Infix command</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#reserving-notations">Reserving notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#simultaneous-definition-of-terms-and-notations">Simultaneous definition of terms and notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#enabling-and-disabling-notations">Enabling and disabling notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#displaying-information-about-notations">Displaying information about notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#locating-notations">Locating notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#inheritance-of-the-properties-of-arguments-of-constants-bound-to-a-notation">Inheritance of the properties of arguments of constants bound to a notation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#notations-and-binders">Notations and binders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#notations-with-recursive-patterns">Notations with recursive patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#notations-with-recursive-patterns-involving-binders">Notations with recursive patterns involving binders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#predefined-entries">Predefined entries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#custom-entries">Custom entries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#syntax">Syntax</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#notation-scopes">Notation scopes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#global-interpretation-rules-for-notations">Global interpretation rules for notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#local-interpretation-rules-for-notations">Local interpretation rules for notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#the-type-scope-notation-scope">The <code class="docutils literal notranslate"><span class="pre">type_scope</span></code> notation scope</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#the-function-scope-notation-scope">The <code class="docutils literal notranslate"><span class="pre">function_scope</span></code> notation scope</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#notation-scopes-used-in-the-standard-library-of-coq">Notation scopes used in the standard library of Coq</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#displaying-information-about-scopes">Displaying information about scopes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#abbreviations">Abbreviations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#numbers-and-strings">Numbers and strings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#number-notations">Number notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-extensions/syntax-extensions.html#string-notations">String notations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user-extensions/syntax-extensions.html#tactic-notations">Tactic Notations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/extensions/arguments-command.html">Setting properties of a function's arguments</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/arguments-command.html#manual-declaration-of-implicit-arguments">Manual declaration of implicit arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/arguments-command.html#automatic-declaration-of-implicit-arguments">Automatic declaration of implicit arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/arguments-command.html#renaming-implicit-arguments">Renaming implicit arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/arguments-command.html#binding-arguments-to-scopes">Binding arguments to scopes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/arguments-command.html#effects-of-arguments-on-unfolding">Effects of <code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Arguments</span></code> on unfolding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/arguments-command.html#bidirectionality-hints">Bidirectionality hints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/implicit-coercions.html">Implicit Coercions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/implicit-coercions.html#general-presentation">General Presentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/implicit-coercions.html#coercion-classes">Coercion Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/implicit-coercions.html#id1">Coercions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/implicit-coercions.html#reversible-coercions">Reversible Coercions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/implicit-coercions.html#identity-coercions">Identity Coercions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/implicit-coercions.html#inheritance-graph">Inheritance Graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/implicit-coercions.html#id2">Coercion Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/implicit-coercions.html#displaying-available-coercions">Displaying Available Coercions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/implicit-coercions.html#activating-the-printing-of-coercions">Activating the Printing of Coercions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/implicit-coercions.html#classes-as-records">Classes as Records</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/implicit-coercions.html#coercions-and-sections">Coercions and Sections</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/implicit-coercions.html#coercions-and-modules">Coercions and Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/implicit-coercions.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/type-classes.html">Typeclasses</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/type-classes.html#typeclass-and-instance-declarations">Typeclass and instance declarations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/type-classes.html#binding-typeclasses">Binding typeclasses</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/type-classes.html#parameterized-instances">Parameterized instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/type-classes.html#sections-and-contexts">Sections and contexts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/type-classes.html#building-hierarchies">Building hierarchies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../addendum/type-classes.html#superclasses">Superclasses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/type-classes.html#substructures">Substructures</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/type-classes.html#command-summary">Command summary</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../addendum/type-classes.html#typeclasses-transparent-typeclasses-opaque">Typeclasses Transparent, Typeclasses Opaque</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/type-classes.html#settings">Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/type-classes.html#typeclasses-eauto">Typeclasses eauto</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../language/extensions/canonical.html">Canonical Structures</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/canonical.html#declaration-of-canonical-structures">Declaration of canonical structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/canonical.html#notation-overloading">Notation overloading</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/canonical.html#derived-canonical-structures">Derived Canonical Structures</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/extensions/canonical.html#hierarchy-of-structures">Hierarchy of structures</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/extensions/canonical.html#compact-declaration-of-canonical-structures">Compact declaration of Canonical Structures</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/program.html">Program</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/program.html#elaborating-programs">Elaborating programs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../addendum/program.html#syntactic-control-over-equalities">Syntactic control over equalities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/program.html#program-definition">Program Definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/program.html#program-fixpoint">Program Fixpoint</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/program.html#program-lemma">Program Lemma</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/program.html#solving-obligations">Solving obligations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/program.html#frequently-asked-questions">Frequently Asked Questions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="vernacular-commands.html">Commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="vernacular-commands.html#displaying">Displaying</a></li>
<li class="toctree-l3"><a class="reference internal" href="vernacular-commands.html#query-commands">Query commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="vernacular-commands.html#requests-to-the-environment">Requests to the environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="vernacular-commands.html#printing-flags">Printing flags</a></li>
<li class="toctree-l3"><a class="reference internal" href="vernacular-commands.html#loading-files">Loading files</a></li>
<li class="toctree-l3"><a class="reference internal" href="vernacular-commands.html#compiled-files">Compiled files</a></li>
<li class="toctree-l3"><a class="reference internal" href="vernacular-commands.html#load-paths">Load paths</a></li>
<li class="toctree-l3"><a class="reference internal" href="vernacular-commands.html#extra-dependencies">Extra Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="vernacular-commands.html#backtracking">Backtracking</a></li>
<li class="toctree-l3"><a class="reference internal" href="vernacular-commands.html#quitting-and-debugging">Quitting and debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="vernacular-commands.html#controlling-display">Controlling display</a></li>
<li class="toctree-l3"><a class="reference internal" href="vernacular-commands.html#printing-constructions-in-full">Printing constructions in full</a></li>
<li class="toctree-l3"><a class="reference internal" href="vernacular-commands.html#controlling-typing-flags">Controlling Typing Flags</a></li>
<li class="toctree-l3"><a class="reference internal" href="vernacular-commands.html#internal-registration-commands">Internal registration commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="vernacular-commands.html#exposing-constants-to-ocaml-libraries">Exposing constants to OCaml libraries</a></li>
<li class="toctree-l4"><a class="reference internal" href="vernacular-commands.html#inlining-hints-for-the-fast-reduction-machines">Inlining hints for the fast reduction machines</a></li>
<li class="toctree-l4"><a class="reference internal" href="vernacular-commands.html#registering-primitive-operations">Registering primitive operations</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Proofs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../proofs/writing-proofs/index.html">Basic proof writing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html">Proof mode</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#proof-state">Proof State</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#entering-and-exiting-proof-mode">Entering and exiting proof mode</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#proof-using-options">Proof using options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#name-a-set-of-section-hypotheses-for-proof-using">Name a set of section hypotheses for <code class="docutils literal notranslate"><span class="pre">Proof</span> <span class="pre">using</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#proof-modes">Proof modes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#managing-goals">Managing goals</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#focusing-goals">Focusing goals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#shelving-goals">Shelving goals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#reordering-goals">Reordering goals</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#proving-a-subgoal-as-a-separate-lemma-abstract">Proving a subgoal as a separate lemma: abstract</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#requesting-information">Requesting information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#showing-differences-between-proof-steps">Showing differences between proof steps</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#how-to-enable-diffs">How to enable diffs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#how-diffs-are-calculated">How diffs are calculated</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#show-proof-differences">&quot;Show Proof&quot; differences</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#delaying-solving-unification-constraints">Delaying solving unification constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#proof-maintenance">Proof maintenance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#controlling-proof-mode">Controlling proof mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#controlling-memory-usage">Controlling memory usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tactics.html">Tactics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tactics.html#common-elements-of-tactics">Common elements of tactics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="tactics.html#reserved-keywords">Reserved keywords</a></li>
<li class="toctree-l4"><a class="reference internal" href="tactics.html#invocation-of-tactics">Invocation of tactics</a></li>
<li class="toctree-l4"><a class="reference internal" href="tactics.html#bindings">Bindings</a></li>
<li class="toctree-l4"><a class="reference internal" href="tactics.html#intro-patterns">Intro patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="tactics.html#occurrence-clauses">Occurrence clauses</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="tactics.html#applying-theorems">Applying theorems</a></li>
<li class="toctree-l3"><a class="reference internal" href="tactics.html#managing-the-local-context">Managing the local context</a></li>
<li class="toctree-l3"><a class="reference internal" href="tactics.html#controlling-the-proof-flow">Controlling the proof flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="tactics.html#classical-tactics">Classical tactics</a></li>
<li class="toctree-l3"><a class="reference internal" href="tactics.html#performance-oriented-tactic-variants">Performance-oriented tactic variants</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../proofs/writing-proofs/equality.html">Reasoning with equalities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/equality.html#tactics-for-simple-equalities">Tactics for simple equalities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/equality.html#rewriting-with-leibniz-and-setoid-equality">Rewriting with Leibniz and setoid equality</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/equality.html#rewriting-with-definitional-equality">Rewriting with definitional equality</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/equality.html#applying-conversion-rules">Applying conversion rules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/equality.html#fast-reduction-tactics-vm-compute-and-native-compute">Fast reduction tactics: vm_compute and native_compute</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/equality.html#computing-in-a-term-eval-and-eval">Computing in a term: eval and Eval</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/equality.html#controlling-reduction-strategies-and-the-conversion-algorithm">Controlling reduction strategies and the conversion algorithm</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html">Reasoning with inductive types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#applying-constructors">Applying constructors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#case-analysis">Case analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#induction">Induction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#equality-of-inductive-types">Equality of inductive types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#helper-tactics">Helper tactics</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#generation-of-induction-principles-with-scheme">Generation of induction principles with <code class="docutils literal notranslate"><span class="pre">Scheme</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#automatic-declaration-of-schemes">Automatic declaration of schemes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#combined-scheme">Combined Scheme</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#generation-of-inversion-principles-with-derive-inversion">Generation of inversion principles with <code class="docutils literal notranslate"><span class="pre">Derive</span></code> <code class="docutils literal notranslate"><span class="pre">Inversion</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#examples-of-dependent-destruction-dependent-induction">Examples of <code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">dependent</span> <span class="pre">destruction</span></code> / <code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">dependent</span> <span class="pre">induction</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#a-larger-example">A larger example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ssreflect-proof-language.html">The <span class="smallcaps">SSReflect</span> proof language</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#introduction">Introduction</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#acknowledgments">Acknowledgments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#usage">Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#getting-started">Getting started</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#compatibility-issues">Compatibility issues</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#gallina-extensions">Gallina extensions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#pattern-assignment">Pattern assignment</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#pattern-conditional">Pattern conditional</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#parametric-polymorphism">Parametric polymorphism</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#anonymous-arguments">Anonymous arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#wildcards">Wildcards</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#definitions">Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#abbreviations">Abbreviations</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#basic-localization">Basic localization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#basic-tactics">Basic tactics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#bookkeeping">Bookkeeping</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#the-defective-tactics">The defective tactics</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#discharge">Discharge</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#introduction-in-the-context">Introduction in the context</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#generation-of-equations">Generation of equations</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#type-families">Type families</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#control-flow">Control flow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#indentation-and-bullets">Indentation and bullets</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#terminators">Terminators</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#selectors">Selectors</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#iteration">Iteration</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#localization">Localization</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#structure">Structure</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#rewriting">Rewriting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#an-extended-rewrite-tactic">An extended rewrite tactic</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#remarks-and-examples">Remarks and examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#rewriting-under-binders">Rewriting under binders</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#locking-unlocking">Locking, unlocking</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#congruence">Congruence</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#contextual-patterns">Contextual patterns</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#syntax">Syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#matching-contextual-patterns">Matching contextual patterns</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#examples">Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#patterns-for-recurrent-contexts">Patterns for recurrent contexts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#views-and-reflection">Views and reflection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#interpreting-eliminations">Interpreting eliminations</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#interpreting-assumptions">Interpreting assumptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#interpreting-goals">Interpreting goals</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#boolean-reflection">Boolean reflection</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#the-reflect-predicate">The reflect predicate</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#general-mechanism-for-interpreting-goals-and-assumptions">General mechanism for interpreting goals and assumptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#interpreting-equivalences">Interpreting equivalences</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#declaring-new-hint-views">Declaring new Hint Views</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#multiple-views">Multiple views</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ssreflect-proof-language.html#synopsis-and-index">Synopsis and Index</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#items-and-switches">Items and switches</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#tactics">Tactics</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#tacticals">Tacticals</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#commands">Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="ssreflect-proof-language.html#settings">Settings</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../proofs/automatic-tactics/index.html">Automatic solvers and programmable tactics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../proofs/automatic-tactics/logic.html">Solvers for logic and equality</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/micromega.html">Micromega: solvers for arithmetic goals over ordered rings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/micromega.html#short-description-of-the-tactics">Short description of the tactics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/micromega.html#positivstellensatz-refutations"><em>Positivstellensatz</em> refutations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/micromega.html#lra-a-decision-procedure-for-linear-real-and-rational-arithmetic"><code class="docutils literal notranslate"><span class="pre">lra</span></code>: a decision procedure for linear real and rational arithmetic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/micromega.html#lia-a-tactic-for-linear-integer-arithmetic"><code class="docutils literal notranslate"><span class="pre">lia</span></code>: a tactic for linear integer arithmetic</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../addendum/micromega.html#high-level-view-of-lia">High level view of <code class="docutils literal notranslate"><span class="pre">lia</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/micromega.html#cutting-plane-proofs">Cutting plane proofs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/micromega.html#case-split">Case split</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/micromega.html#nra-a-proof-procedure-for-non-linear-arithmetic"><code class="docutils literal notranslate"><span class="pre">nra</span></code>: a proof procedure for non-linear arithmetic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/micromega.html#nia-a-proof-procedure-for-non-linear-integer-arithmetic"><code class="docutils literal notranslate"><span class="pre">nia</span></code>: a proof procedure for non-linear integer arithmetic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/micromega.html#psatz-a-proof-procedure-for-non-linear-arithmetic"><code class="docutils literal notranslate"><span class="pre">psatz</span></code>: a proof procedure for non-linear arithmetic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/micromega.html#zify-pre-processing-of-arithmetic-goals"><code class="docutils literal notranslate"><span class="pre">zify</span></code>: pre-processing of arithmetic goals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/ring.html">ring and field: solvers for polynomial and rational equations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/ring.html#what-does-this-tactic-do">What does this tactic do?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/ring.html#the-variables-map">The variables map</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/ring.html#is-it-automatic">Is it automatic?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/ring.html#concrete-usage-in-coq">Concrete usage in Coq</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/ring.html#adding-a-ring-structure">Adding a ring structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/ring.html#how-does-it-work">How does it work?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/ring.html#dealing-with-fields">Dealing with fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/ring.html#adding-a-new-field-structure">Adding a new field structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/ring.html#history-of-ring">History of ring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/ring.html#discussion">Discussion</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/nsatz.html">Nsatz: a solver for equalities in integral domains</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/nsatz.html#more-about-nsatz">More about <code class="docutils literal notranslate"><span class="pre">nsatz</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../proofs/automatic-tactics/auto.html">Programmable proof search</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../proofs/automatic-tactics/auto.html#tactics">Tactics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/automatic-tactics/auto.html#hint-databases">Hint databases</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proofs/automatic-tactics/auto.html#creating-hint-databases">Creating hint databases</a></li>
<li class="toctree-l4"><a class="reference internal" href="../proofs/automatic-tactics/auto.html#hint-databases-defined-in-the-coq-standard-library">Hint databases defined in the Coq standard library</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/automatic-tactics/auto.html#creating-hints">Creating Hints</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../proofs/automatic-tactics/auto.html#hint-locality">Hint locality</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../proofs/automatic-tactics/auto.html#setting-implicit-automation-tactics">Setting implicit automation tactics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/generalized-rewriting.html">Generalized rewriting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/generalized-rewriting.html#introduction-to-generalized-rewriting">Introduction to generalized rewriting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../addendum/generalized-rewriting.html#relations-and-morphisms">Relations and morphisms</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/generalized-rewriting.html#adding-new-relations-and-morphisms">Adding new relations and morphisms</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/generalized-rewriting.html#rewriting-and-nonreflexive-relations">Rewriting and nonreflexive relations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/generalized-rewriting.html#rewriting-and-nonsymmetric-relations">Rewriting and nonsymmetric relations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/generalized-rewriting.html#rewriting-in-ambiguous-setoid-contexts">Rewriting in ambiguous setoid contexts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/generalized-rewriting.html#rewriting-with-type-valued-relations">Rewriting with <code class="docutils literal notranslate"><span class="pre">Type</span></code> valued relations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/generalized-rewriting.html#declaring-rewrite-relations">Declaring rewrite relations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/generalized-rewriting.html#commands-and-tactics">Commands and tactics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../addendum/generalized-rewriting.html#first-class-setoids-and-morphisms">First class setoids and morphisms</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/generalized-rewriting.html#tactics-enabled-on-user-provided-relations">Tactics enabled on user provided relations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/generalized-rewriting.html#printing-relations-and-morphisms">Printing relations and morphisms</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/generalized-rewriting.html#deprecated-syntax-and-backward-incompatibilities">Deprecated syntax and backward incompatibilities</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/generalized-rewriting.html#extensions">Extensions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../addendum/generalized-rewriting.html#rewriting-under-binders">Rewriting under binders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/generalized-rewriting.html#subrelations">Subrelations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/generalized-rewriting.html#constant-unfolding">Constant unfolding</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/generalized-rewriting.html#strategies-for-rewriting">Strategies for rewriting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../addendum/generalized-rewriting.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/generalized-rewriting.html#definitions">Definitions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../proofs/creating-tactics/index.html">Creating new tactics</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ltac.html">Ltac</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#syntax">Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#values">Values</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#syntactic-values">Syntactic values</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#substitution">Substitution</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#local-definitions-let">Local definitions: let</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#function-construction-and-application">Function construction and application</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#tactics-in-terms">Tactics in terms</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#goal-selectors">Goal selectors</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#processing-multiple-goals">Processing multiple goals</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#branching-and-backtracking">Branching and backtracking</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#control-flow">Control flow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#sequence">Sequence: ;</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#do-loop">Do loop</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#repeat-loop">Repeat loop</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#catching-errors-try">Catching errors: try</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#conditional-branching-tryif">Conditional branching: tryif</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#alternatives">Alternatives</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#branching-with-backtracking">Branching with backtracking: +</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#local-application-of-tactics">Local application of tactics: [&gt; ... ]</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#first-tactic-to-succeed">First tactic to succeed</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#solving">Solving</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#first-tactic-to-make-progress">First tactic to make progress: ||</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#detecting-progress">Detecting progress</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#success-and-failure">Success and failure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#checking-for-success-assert-succeeds">Checking for success: assert_succeeds</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#checking-for-failure-assert-fails">Checking for failure: assert_fails</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#failing">Failing</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#soft-cut-once">Soft cut: once</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#checking-for-a-single-success-exactly-once">Checking for a single success: exactly_once</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#manipulating-values">Manipulating values</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#pattern-matching-on-terms-match">Pattern matching on terms: match</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#pattern-matching-on-goals-and-hypotheses-match-goal">Pattern matching on goals and hypotheses: match goal</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#filling-a-term-context">Filling a term context</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#generating-fresh-hypothesis-names">Generating fresh hypothesis names</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#computing-in-a-term-eval">Computing in a term: eval</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#getting-the-type-of-a-term">Getting the type of a term</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#manipulating-untyped-terms-type-term">Manipulating untyped terms: type_term</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#counting-goals-numgoals">Counting goals: numgoals</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#testing-boolean-expressions-guard">Testing boolean expressions: guard</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#checking-properties-of-terms">Checking properties of terms</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#timing">Timing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#timeout">Timeout</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#timing-a-tactic">Timing a tactic</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#timing-a-tactic-that-evaluates-to-a-term-time-constr">Timing a tactic that evaluates to a term: time_constr</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#print-identity-tactic-idtac">Print/identity tactic: idtac</a></li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#tactic-toplevel-definitions">Tactic toplevel definitions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#defining-ltac-symbols">Defining <code class="docutils literal notranslate"><span class="pre">L</span></code><sub>tac</sub> symbols</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#printing-ltac-tactics">Printing <code class="docutils literal notranslate"><span class="pre">L</span></code><sub>tac</sub> tactics</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#examples-of-using-ltac">Examples of using <code class="docutils literal notranslate"><span class="pre">L</span></code><sub>tac</sub></a><ul>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#proof-that-the-natural-numbers-have-at-least-two-elements">Proof that the natural numbers have at least two elements</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#proving-that-a-list-is-a-permutation-of-a-second-list">Proving that a list is a permutation of a second list</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#deciding-intuitionistic-propositional-logic">Deciding intuitionistic propositional logic</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#deciding-type-isomorphisms">Deciding type isomorphisms</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ltac.html#debugging-ltac-tactics">Debugging <code class="docutils literal notranslate"><span class="pre">L</span></code><sub>tac</sub> tactics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#backtraces">Backtraces</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#tracing-execution">Tracing execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#interactive-debugger">Interactive debugger</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#profiling-ltac-tactics">Profiling <code class="docutils literal notranslate"><span class="pre">L</span></code><sub>tac</sub> tactics</a></li>
<li class="toctree-l4"><a class="reference internal" href="ltac.html#run-time-optimization-tactic">Run-time optimization tactic</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Ltac2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#general-design">General design</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ml-component">ML component</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#type-syntax">Type Syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="#type-declarations">Type declarations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#apis">APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#term-syntax">Term Syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ltac2-definitions">Ltac2 Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#printing-ltac2-tactics">Printing Ltac2 tactics</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reduction">Reduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#typing">Typing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#effects">Effects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#meta-programming">Meta-programming</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#quotations">Quotations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#term-antiquotations">Term Antiquotations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#match-over-terms">Match over terms</a></li>
<li class="toctree-l4"><a class="reference internal" href="#match-over-goals">Match over goals</a></li>
<li class="toctree-l4"><a class="reference internal" href="#match-on-values">Match on values</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#notations">Notations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#abbreviations">Abbreviations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#defining-tactics">Defining tactics</a></li>
<li class="toctree-l4"><a class="reference internal" href="#syntactic-classes">Syntactic classes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#evaluation">Evaluation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#debug">Debug</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compatibility-layer-with-ltac1">Compatibility layer with Ltac1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ltac1-from-ltac2">Ltac1 from Ltac2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ltac2-from-ltac1">Ltac2 from Ltac1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#switching-between-ltac-languages">Switching between Ltac languages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#transition-from-ltac1">Transition from Ltac1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#syntax-changes">Syntax changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tactic-delay">Tactic delay</a></li>
<li class="toctree-l4"><a class="reference internal" href="#variable-binding">Variable binding</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exception-catching">Exception catching</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using Coq</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../using/libraries/index.html">Libraries and plugins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../language/coq-library.html">The Coq library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../language/coq-library.html#the-prelude">The prelude</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#notations">Notations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#logic">Logic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#datatypes">Datatypes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#specification">Specification</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#basic-arithmetic">Basic Arithmetic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#well-founded-recursion">Well-founded recursion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#accessing-the-type-level">Accessing the Type level</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#tactics">Tactics</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/coq-library.html#the-standard-library">The standard library</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#survey">Survey</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#peanos-arithmetic-nat">Peano’s arithmetic (nat)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#notations-for-integer-arithmetic">Notations for integer arithmetic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#real-numbers-library">Real numbers library</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#list-library">List library</a></li>
<li class="toctree-l4"><a class="reference internal" href="../language/coq-library.html#floats-library">Floats library</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../language/coq-library.html#users-contributions">Users’ contributions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/extraction.html">Program extraction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/extraction.html#generating-ml-code">Generating ML Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/extraction.html#extraction-options">Extraction Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../addendum/extraction.html#setting-the-target-language">Setting the target language</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/extraction.html#inlining-and-optimizations">Inlining and optimizations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/extraction.html#extra-elimination-of-useless-arguments">Extra elimination of useless arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/extraction.html#realizing-axioms">Realizing axioms</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/extraction.html#realizing-inductive-types">Realizing inductive types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/extraction.html#avoiding-conflicts-with-existing-filenames">Avoiding conflicts with existing filenames</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/extraction.html#additional-settings">Additional settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/extraction.html#differences-between-coq-and-ml-type-systems">Differences between Coq and ML type systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/extraction.html#some-examples">Some examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../addendum/extraction.html#a-detailed-example-euclidean-division">A detailed example: Euclidean division</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/extraction.html#extraction-s-horror-museum">Extraction's horror museum</a></li>
<li class="toctree-l4"><a class="reference internal" href="../addendum/extraction.html#users-contributions">Users' Contributions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/miscellaneous-extensions.html">Program derivation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using/libraries/funind.html">Functional induction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../using/libraries/funind.html#advanced-recursive-functions">Advanced recursive functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using/libraries/funind.html#tactics">Tactics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../using/libraries/funind.html#generation-of-induction-principles-with-functional-scheme">Generation of induction principles with <code class="docutils literal notranslate"><span class="pre">Functional</span></code> <code class="docutils literal notranslate"><span class="pre">Scheme</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../using/libraries/writing.html">Writing Coq libraries and plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../using/libraries/writing.html#deprecating-library-objects-or-tactics">Deprecating library objects or tactics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../using/tools/index.html">Command-line and graphical tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/utilities.html">Building Coq Projects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/utilities.html#coq-configuration-basics">Coq configuration basics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#installing-coq-and-coq-packages-with-opam">Installing Coq and Coq packages with opam</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#setup-for-working-on-your-own-projects">Setup for working on your own projects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#building-a-project-with-coqproject-overview">Building a project with _CoqProject (overview)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#logical-paths-and-the-load-path">Logical paths and the load path</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#modifying-multiple-interdependent-projects-at-the-same-time">Modifying multiple interdependent projects at the same time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#installed-and-uninstalled-packages">Installed and uninstalled packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#upgrading-to-a-new-version-of-coq">Upgrading to a new version of Coq</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/utilities.html#building-a-coq-project-with-coq-makefile-details">Building a Coq project with coq_makefile (details)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/utilities.html#comments">Comments</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/utilities.html#building-a-coq-project-with-dune">Building a Coq project with Dune</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/utilities.html#coqdep-computing-module-dependencies">coqdep: Computing Module dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/utilities.html#split-compilation-of-native-computation-files">Split compilation of native computation files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/utilities.html#using-coq-as-a-library">Using Coq as a library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/utilities.html#embedded-coq-phrases-inside-latex-documents">Embedded Coq phrases inside <span class="smallcaps">LaTeX</span> documents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/utilities.html#man-pages">Man pages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/coq-commands.html">Coq commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coq-commands.html#interactive-use-coqtop">Interactive use (coqtop)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coq-commands.html#batch-compilation-coqc">Batch compilation (coqc)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coq-commands.html#customization-at-launch-time">Customization at launch time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coq-commands.html#command-parameters">Command parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coq-commands.html#coqrc-start-up-script"><code class="docutils literal notranslate"><span class="pre">coqrc</span></code> start up script</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coq-commands.html#environment-variables">Environment variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coq-commands.html#command-line-options">Command line options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coq-commands.html#compiled-interfaces-produced-using-vos">Compiled interfaces (produced using <code class="docutils literal notranslate"><span class="pre">-vos</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coq-commands.html#compiled-libraries-checker-coqchk">Compiled libraries checker (coqchk)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../using/tools/coqdoc.html">Documenting Coq files with coqdoc</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../using/tools/coqdoc.html#principles">Principles</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../using/tools/coqdoc.html#coq-material-inside-documentation">Coq material inside documentation.</a></li>
<li class="toctree-l4"><a class="reference internal" href="../using/tools/coqdoc.html#pretty-printing">Pretty-printing.</a></li>
<li class="toctree-l4"><a class="reference internal" href="../using/tools/coqdoc.html#sections">Sections</a></li>
<li class="toctree-l4"><a class="reference internal" href="../using/tools/coqdoc.html#lists">Lists.</a></li>
<li class="toctree-l4"><a class="reference internal" href="../using/tools/coqdoc.html#rules">Rules.</a></li>
<li class="toctree-l4"><a class="reference internal" href="../using/tools/coqdoc.html#emphasis">Emphasis.</a></li>
<li class="toctree-l4"><a class="reference internal" href="../using/tools/coqdoc.html#escaping-to-latex-and-html">Escaping to <span class="smallcaps">LaTeX</span> and HTML.</a></li>
<li class="toctree-l4"><a class="reference internal" href="../using/tools/coqdoc.html#verbatim">Verbatim</a></li>
<li class="toctree-l4"><a class="reference internal" href="../using/tools/coqdoc.html#hyperlinks">Hyperlinks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../using/tools/coqdoc.html#hiding-showing-parts-of-the-source">Hiding / Showing parts of the source</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../using/tools/coqdoc.html#usage">Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../using/tools/coqdoc.html#command-line-options">Command line options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../using/tools/coqdoc.html#the-coqdoc-latex-style-file">The coqdoc <span class="smallcaps">LaTeX</span> style file</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../practical-tools/coqide.html">CoqIDE</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coqide.html#managing-files-and-buffers-basic-editing">Managing files and buffers, basic editing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coqide.html#running-coq-scripts">Running Coq scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coqide.html#asynchronous-mode">Asynchronous mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coqide.html#commands-and-templates">Commands and templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coqide.html#queries">Queries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coqide.html#compilation">Compilation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coqide.html#customizations">Customizations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coqide.html#preferences">Preferences</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coqide.html#key-bindings">Key bindings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coqide.html#using-unicode-symbols">Using Unicode symbols</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coqide.html#displaying-unicode-symbols">Displaying Unicode symbols</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coqide.html#bindings-for-input-of-unicode-symbols">Bindings for input of Unicode symbols</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coqide.html#adding-custom-bindings">Adding custom bindings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coqide.html#character-encoding-for-saved-files">Character encoding for saved files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../practical-tools/coqide.html#debugger">Debugger</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coqide.html#breakpoints">Breakpoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coqide.html#call-stack-and-variables">Call Stack and Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../practical-tools/coqide.html#supported-use-cases">Supported use cases</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../addendum/parallel-proof-processing.html">Asynchronous and Parallel Proof Processing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../addendum/parallel-proof-processing.html#proof-annotations">Proof annotations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../addendum/parallel-proof-processing.html#automatic-suggestion-of-proof-annotations">Automatic suggestion of proof annotations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/parallel-proof-processing.html#proof-blocks-and-error-resilience">Proof blocks and error resilience</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../addendum/parallel-proof-processing.html#caveats">Caveats</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/parallel-proof-processing.html#interactive-mode">Interactive mode</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../addendum/parallel-proof-processing.html#id3">Caveats</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/parallel-proof-processing.html#batch-mode">Batch mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../addendum/parallel-proof-processing.html#limiting-the-number-of-parallel-workers">Limiting the number of parallel workers</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendix/history-and-changes/index.html">History and recent changes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../history.html">Early history of Coq</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../history.html#historical-roots">Historical roots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../history.html#versions-1-to-5">Versions 1 to 5</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../history.html#version-1">Version 1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../history.html#version-2">Version 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../history.html#version-3">Version 3</a></li>
<li class="toctree-l4"><a class="reference internal" href="../history.html#version-4">Version 4</a></li>
<li class="toctree-l4"><a class="reference internal" href="../history.html#version-5">Version 5</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../history.html#versions-6">Versions 6</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../history.html#version-6-1">Version 6.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../history.html#version-6-2">Version 6.2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../history.html#version-6-3">Version 6.3</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../history.html#versions-7">Versions 7</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../history.html#summary-of-changes">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../history.html#details-of-changes-in-7-0-and-7-1">Details of changes in 7.0 and 7.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../history.html#details-of-changes-in-7-2">Details of changes in 7.2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../history.html#details-of-changes-in-7-3">Details of changes in 7.3</a></li>
<li class="toctree-l4"><a class="reference internal" href="../history.html#details-of-changes-in-7-4">Details of changes in 7.4</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../changes.html">Recent changes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-18">Version 8.18</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#summary-of-changes">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-18-0">Changes in 8.18.0</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-17">Version 8.17</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id141">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-17-0">Changes in 8.17.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-17-1">Changes in 8.17.1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-16">Version 8.16</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id295">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-16-0">Changes in 8.16.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-16-1">Changes in 8.16.1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-15">Version 8.15</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id458">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-15-0">Changes in 8.15.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-15-1">Changes in 8.15.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-15-2">Changes in 8.15.2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-14">Version 8.14</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id686">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-14-0">Changes in 8.14.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-14-1">Changes in 8.14.1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-13">Version 8.13</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id882">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-13-beta1">Changes in 8.13+beta1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-13-0">Changes in 8.13.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-13-1">Changes in 8.13.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-13-2">Changes in 8.13.2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-12">Version 8.12</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1046">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-12-beta1">Changes in 8.12+beta1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-12-0">Changes in 8.12.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-12-1">Changes in 8.12.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-12-2">Changes in 8.12.2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-11">Version 8.11</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1352">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-11-beta1">Changes in 8.11+beta1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-11-0">Changes in 8.11.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-11-1">Changes in 8.11.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-11-2">Changes in 8.11.2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-10">Version 8.10</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1490">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#other-changes-in-8-10-beta1">Other changes in 8.10+beta1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-10-beta2">Changes in 8.10+beta2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-10-beta3">Changes in 8.10+beta3</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-10-0">Changes in 8.10.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-10-1">Changes in 8.10.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-10-2">Changes in 8.10.2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-9">Version 8.9</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1637">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-9-beta1">Details of changes in 8.9+beta1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-8-0">Changes in 8.8.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#changes-in-8-8-1">Changes in 8.8.1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-8">Version 8.8</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1639">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-8-beta1">Details of changes in 8.8+beta1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-8-0">Details of changes in 8.8.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-8-1">Details of changes in 8.8.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-8-2">Details of changes in 8.8.2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-7">Version 8.7</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1640">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#potential-compatibility-issues">Potential compatibility issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-7-beta1">Details of changes in 8.7+beta1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-7-beta2">Details of changes in 8.7+beta2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-7-0">Details of changes in 8.7.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-7-1">Details of changes in 8.7.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-7-2">Details of changes in 8.7.2</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-6">Version 8.6</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1641">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#potential-sources-of-incompatibilities">Potential sources of incompatibilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-6beta1">Details of changes in 8.6beta1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-6">Details of changes in 8.6</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-6-1">Details of changes in 8.6.1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-5">Version 8.5</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1642">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1643">Potential sources of incompatibilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-5beta1">Details of changes in 8.5beta1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-5beta2">Details of changes in 8.5beta2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-5beta3">Details of changes in 8.5beta3</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-5">Details of changes in 8.5</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-5pl1">Details of changes in 8.5pl1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-5pl2">Details of changes in 8.5pl2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-5pl3">Details of changes in 8.5pl3</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-4">Version 8.4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1644">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1646">Potential sources of incompatibilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-4beta">Details of changes in 8.4beta</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-4beta2">Details of changes in 8.4beta2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-4">Details of changes in 8.4</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-3">Version 8.3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1647">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes">Details of changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-2">Version 8.2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1648">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1649">Details of changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-1">Version 8.1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1650">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-1beta">Details of changes in 8.1beta</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-1gamma">Details of changes in 8.1gamma</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-1">Details of changes in 8.1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../changes.html#version-8-0">Version 8.0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#id1651">Summary of changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-0beta-old-syntax">Details of changes in 8.0beta old syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-0beta-new-syntax">Details of changes in 8.0beta new syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="../changes.html#details-of-changes-in-8-0">Details of changes in 8.0</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/indexes/index.html">Indexes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../std-glossindex.html">Glossary index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../coq-cmdindex.html">Command index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../coq-tacindex.html">Tactic index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../coq-attrindex.html">Attribute index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../coq-optindex.html">Flags, options and tables index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../coq-exnindex.html">Errors and warnings index</a></li>
<li class="toctree-l2"><a class="reference internal" href="../genindex.html">General index</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../zebibliography.html">Bibliography</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Coq</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../proofs/creating-tactics/index.html">Creating new tactics</a> &raquo;</li>
      <li>Ltac2</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/coq/coq/blob/master/doc/sphinx/proof-engine/ltac2.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="math-preamble math notranslate nohighlight">
\[\begin{split}\newcommand{\as}{\kw{as}}
\newcommand{\case}{\kw{case}}
\newcommand{\cons}{\textsf{cons}}
\newcommand{\consf}{\textsf{consf}}
\newcommand{\emptyf}{\textsf{emptyf}}
\newcommand{\End}{\kw{End}}
\newcommand{\kwend}{\kw{end}}
\newcommand{\even}{\textsf{even}}
\newcommand{\evenO}{\textsf{even}_\textsf{O}}
\newcommand{\evenS}{\textsf{even}_\textsf{S}}
\newcommand{\Fix}{\kw{Fix}}
\newcommand{\fix}{\kw{fix}}
\newcommand{\for}{\textsf{for}}
\newcommand{\forest}{\textsf{forest}}
\newcommand{\Functor}{\kw{Functor}}
\newcommand{\In}{\kw{in}}
\newcommand{\ind}[3]{\kw{Ind}~[#1]\left(#2\mathrm{~:=~}#3\right)}
\newcommand{\Indp}[4]{\kw{Ind}_{#4}[#1](#2:=#3)}
\newcommand{\Indpstr}[5]{\kw{Ind}_{#4}[#1](#2:=#3)/{#5}}
\newcommand{\injective}{\kw{injective}}
\newcommand{\kw}[1]{\textsf{#1}}
\newcommand{\length}{\textsf{length}}
\newcommand{\letin}[3]{\kw{let}~#1:=#2~\kw{in}~#3}
\newcommand{\List}{\textsf{list}}
\newcommand{\lra}{\longrightarrow}
\newcommand{\Match}{\kw{match}}
\newcommand{\Mod}[3]{{\kw{Mod}}({#1}:{#2}\,\zeroone{:={#3}})}
\newcommand{\ModImp}[3]{{\kw{Mod}}({#1}:{#2}:={#3})}
\newcommand{\ModA}[2]{{\kw{ModA}}({#1}=={#2})}
\newcommand{\ModS}[2]{{\kw{Mod}}({#1}:{#2})}
\newcommand{\ModType}[2]{{\kw{ModType}}({#1}:={#2})}
\newcommand{\mto}{.\;}
\newcommand{\nat}{\textsf{nat}}
\newcommand{\Nil}{\textsf{nil}}
\newcommand{\nilhl}{\textsf{nil\_hl}}
\newcommand{\nO}{\textsf{O}}
\newcommand{\node}{\textsf{node}}
\newcommand{\nS}{\textsf{S}}
\newcommand{\odd}{\textsf{odd}}
\newcommand{\oddS}{\textsf{odd}_\textsf{S}}
\newcommand{\ovl}[1]{\overline{#1}}
\newcommand{\Pair}{\textsf{pair}}
\newcommand{\plus}{\mathsf{plus}}
\newcommand{\SProp}{\textsf{SProp}}
\newcommand{\Prop}{\textsf{Prop}}
\newcommand{\return}{\kw{return}}
\newcommand{\Set}{\textsf{Set}}
\newcommand{\Sort}{\mathcal{S}}
\newcommand{\Str}{\textsf{Stream}}
\newcommand{\Struct}{\kw{Struct}}
\newcommand{\subst}[3]{#1\{#2/#3\}}
\newcommand{\tl}{\textsf{tl}}
\newcommand{\tree}{\textsf{tree}}
\newcommand{\trii}{\triangleright_\iota}
\newcommand{\Type}{\textsf{Type}}
\newcommand{\WEV}[3]{\mbox{$#1[] \vdash #2 \lra  #3$}}
\newcommand{\WEVT}[3]{\mbox{$#1[] \vdash #2 \lra$}\\ \mbox{$ #3$}}
\newcommand{\WF}[2]{{\mathcal{W\!F}}(#1)[#2]}
\newcommand{\WFE}[1]{\WF{E}{#1}}
\newcommand{\WFT}[2]{#1[] \vdash {\mathcal{W\!F}}(#2)}
\newcommand{\WFTWOLINES}[2]{{\mathcal{W\!F}}\begin{array}{l}(#1)\\\mbox{}[{#2}]\end{array}}
\newcommand{\with}{\kw{with}}
\newcommand{\WS}[3]{#1[] \vdash #2 &lt;: #3}
\newcommand{\WSE}[2]{\WS{E}{#1}{#2}}
\newcommand{\WT}[4]{#1[#2] \vdash #3 : #4}
\newcommand{\WTE}[3]{\WT{E}{#1}{#2}{#3}}
\newcommand{\WTEG}[2]{\WTE{\Gamma}{#1}{#2}}
\newcommand{\WTM}[3]{\WT{#1}{}{#2}{#3}}
\newcommand{\zeroone}[1]{[{#1}]}
\end{split}\]</div>
<section id="ltac2">
<span id="id1"></span><h1>Ltac2<a class="headerlink" href="#ltac2" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">L</span></code><sub>tac</sub> tactic language is probably one of the ingredients of the success of
Coq, yet it is at the same time its Achilles' heel. Indeed, <code class="docutils literal notranslate"><span class="pre">L</span></code><sub>tac</sub>:</p>
<ul class="simple">
<li><p>has often unclear semantics</p></li>
<li><p>is very non-uniform due to organic growth</p></li>
<li><p>lacks expressivity (data structures, combinators, types, ...)</p></li>
<li><p>is slow</p></li>
<li><p>is error-prone and fragile</p></li>
<li><p>has an intricate implementation</p></li>
</ul>
<p>Following the need of users who are developing huge projects relying
critically on Ltac, we believe that we should offer a proper modern language
that features at least the following:</p>
<ul class="simple">
<li><p>at least informal, predictable semantics</p></li>
<li><p>a type system</p></li>
<li><p>standard programming facilities (e.g., datatypes)</p></li>
</ul>
<p>This new language, called Ltac2, is described in this chapter. It is still
experimental but we nonetheless encourage users to start testing it,
especially wherever an advanced tactic language is needed. The previous
implementation of Ltac, described in the previous chapter, will be referred to
as Ltac1.</p>
<p>Current limitations include:</p>
<ul class="simple">
<li><p>There are a number of tactics that are not yet supported in Ltac2 because
the interface OCaml and/or Ltac2 notations haven't been written.  See
<a class="reference internal" href="#defining-tactics"><span class="std std-ref">Defining tactics</span></a>.</p></li>
<li><p>Missing usability features such as:</p>
<ul>
<li><p>Printing functions are limited and awkward to use.  Only a few data types are
printable.</p></li>
</ul>
</li>
<li><p>Error messages may be cryptic.</p></li>
</ul>
<section id="general-design">
<span id="ltac2-design"></span><h2>General design<a class="headerlink" href="#general-design" title="Permalink to this headline">¶</a></h2>
<p>There are various alternatives to Ltac1, such as Mtac or Rtac for instance.
While those alternatives can be quite different from Ltac1, we designed
Ltac2 to be as close as reasonably possible to Ltac1, while fixing the
aforementioned defects.</p>
<p>In particular, Ltac2 is:</p>
<ul class="simple">
<li><p>a member of the ML family of languages, i.e.</p>
<ul>
<li><p>a call-by-value functional language</p></li>
<li><p>with effects</p></li>
<li><p>together with the Hindley-Milner type system</p></li>
</ul>
</li>
<li><p>a language featuring meta-programming facilities for the manipulation of
Coq-side terms</p></li>
<li><p>a language featuring notation facilities to help write palatable scripts</p></li>
</ul>
<p>We describe these in more detail in the remainder of this document.</p>
</section>
<section id="ml-component">
<h2>ML component<a class="headerlink" href="#ml-component" title="Permalink to this headline">¶</a></h2>
<section id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h3>
<p>Ltac2 is a member of the ML family of languages, in the sense that it is an
effectful call-by-value functional language, with static typing à la
Hindley-Milner (see <a class="reference internal" href="../zebibliography.html#milnerprincipaltypeschemes" id="id2">[DM82]</a>). It is commonly accepted
that ML constitutes a sweet spot in PL design, as it is relatively expressive
while not being either too lax (unlike dynamic typing) nor too strict
(unlike, say, dependent types).</p>
<p>The main goal of Ltac2 is to serve as a meta-language for Coq. As such, it
naturally fits in the ML lineage, just as the historical ML was designed as
the tactic language for the LCF prover. It can also be seen as a general-purpose
language, by simply forgetting about the Coq-specific features.</p>
<p>Sticking to a standard ML type system can be considered somewhat weak for a
meta-language designed to manipulate Coq terms. In particular, there is no
way to statically guarantee that a Coq term resulting from an Ltac2
computation will be well-typed. This is actually a design choice, motivated
by backward compatibility with Ltac1. Instead, well-typedness is deferred to
dynamic checks, allowing many primitive functions to fail whenever they are
provided with an ill-typed term.</p>
<p>The language is naturally effectful as it manipulates the global state of the
proof engine. This allows to think of proof-modifying primitives as effects
in a straightforward way. Semantically, proof manipulation lives in a monad,
which allows to ensure that Ltac2 satisfies the same equations as a generic ML
with unspecified effects would do, e.g. function reduction is substitution
by a value.</p>
<p>Use the following command to import Ltac2:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span></span><span class="coqdoc-keyword">From</span><span> </span><span class="coqdoc-var">Ltac2</span><span> </span><span class="coqdoc-keyword">Require</span><span> </span><span class="coqdoc-keyword">Import</span><span> </span><span class="coqdoc-var">Ltac2</span><span>.</span><span>
</span></dt><dd class="coqtop-hidden"><span>[Loading ML file ltac2_plugin.cmxs (using legacy method) ... done]
</span></dd>
</dl>
</div>
</section>
<section id="type-syntax">
<h3>Type Syntax<a class="headerlink" href="#type-syntax" title="Permalink to this headline">¶</a></h3>
<p>At the level of terms, we simply elaborate on Ltac1 syntax, which is quite
close to OCaml. Types follow the simply-typed syntax of OCaml.</p>
<span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_type"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_type"><span class="hole">ltac2_type</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_type2"><span class="hole">ltac2_type2</span></a> <span><span>-&gt;</span></span> <a class="reference internal" href="#grammar-token-ltac2_type"><span class="hole">ltac2_type</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_type2"><span class="hole">ltac2_type2</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_type2"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_type2"><span class="hole">ltac2_type2</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_type1"><span class="hole">ltac2_type1</span></a> <span><span>*</span></span> <span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_type1"><span class="hole">ltac2_type1</span></a></span><span class="notation-sup">+</span><span class="notation-sub">*</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_type1"><span class="hole">ltac2_type1</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_type1"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_type1"><span class="hole">ltac2_type1</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_type0"><span class="hole">ltac2_type0</span></a> <a class="reference internal" href="../language/core/modules.html#grammar-token-qualid"><span class="hole">qualid</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_type0"><span class="hole">ltac2_type0</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_type0"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_type0"><span class="hole">ltac2_type0</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>(</span></span> <span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_type"><span class="hole">ltac2_type</span></a></span><span class="notation-sup">+</span><span class="notation-sub">,</span></span> <span><span>)</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/core/modules.html#grammar-token-qualid"><span class="hole">qualid</span></a></span><span class="notation-sup">?</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_typevar"><span class="hole">ltac2_typevar</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>_</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/modules.html#grammar-token-qualid"><span class="hole">qualid</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_typevar"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_typevar"><span class="hole">ltac2_typevar</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span>'</span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><p>The set of base types can be extended thanks to the usual ML type
declarations such as algebraic datatypes and records.</p>
<p>Built-in types include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">int</span></code>, machine integers (size not specified, in practice inherited from OCaml)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">string</span></code>, mutable strings</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'a</span> <span class="pre">array</span></code>, mutable arrays</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exn</span></code>, exceptions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">constr</span></code>, kernel-side terms</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pattern</span></code>, term patterns</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ident</span></code>, well-formed identifiers</p></li>
</ul>
</section>
<section id="type-declarations">
<h3>Type declarations<a class="headerlink" href="#type-declarations" title="Permalink to this headline">¶</a></h3>
<p>One can define new types with the following commands.</p>
<dl class="coq cmd">
<dt class="sig sig-object coq" id="coq:cmd.Ltac2-Type">
<em class="property"><span class="sigannot"><span class="pre">Command</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">Type</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">rec</span></span></span></span><span class="notation-sup"><span class="pre">?</span></span></span> <a class="reference internal" href="#grammar-token-tac2typ_def"><span class="hole"><span class="pre">tac2typ_def</span></span></a> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">with</span></span></span> <a class="reference internal" href="#grammar-token-tac2typ_def"><span class="hole"><span class="pre">tac2typ_def</span></span></a></span><span class="notation-sup"><span class="pre">*</span></span></span></span></span><a class="headerlink" href="#coq:cmd.Ltac2-Type" title="Permalink to this definition">¶</a></dt>
<dd><span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-tac2typ_def"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-tac2typ_def"><span class="hole">tac2typ_def</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-tac2typ_prm"><span class="hole">tac2typ_prm</span></a></span><span class="notation-sup">?</span></span> <a class="reference internal" href="../language/core/modules.html#grammar-token-qualid"><span class="hole">qualid</span></a> <span class="repeat-wrapper"><span class="repeat"><span class="alternative"><span class="alternative-block"><span><span>:=</span></span></span><span class="alternative-separator">​</span><span class="alternative-block"><span><span>::=</span></span></span></span> <a class="reference internal" href="#grammar-token-tac2typ_knd"><span class="hole">tac2typ_knd</span></a></span><span class="notation-sup">?</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-tac2typ_prm"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-tac2typ_prm"><span class="hole">tac2typ_prm</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_typevar"><span class="hole">ltac2_typevar</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>(</span></span> <span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_typevar"><span class="hole">ltac2_typevar</span></a></span><span class="notation-sup">+</span><span class="notation-sub">,</span></span> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-tac2typ_knd"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-tac2typ_knd"><span class="hole">tac2typ_knd</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_type"><span class="hole">ltac2_type</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>[</span></span> <span class="repeat-wrapper"><span class="repeat"><span class="repeat-wrapper"><span class="repeat"><span><span>|</span></span></span><span class="notation-sup">?</span></span> <span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-tac2alg_constructor"><span class="hole">tac2alg_constructor</span></a></span><span class="notation-sup">+</span><span class="notation-sub">|</span></span></span><span class="notation-sup">?</span></span> <span><span>]</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>[</span></span> <span><span>..</span></span> <span><span>]</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>{</span></span> <span class="repeat-wrapper"><span class="repeat"><span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-tac2rec_field"><span class="hole">tac2rec_field</span></a></span><span class="notation-sup">+</span><span class="notation-sub">;</span></span> <span class="repeat-wrapper"><span class="repeat"><span><span>;</span></span></span><span class="notation-sup">?</span></span></span><span class="notation-sup">?</span></span> <span><span>}</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-tac2alg_constructor"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-tac2alg_constructor"><span class="hole">tac2alg_constructor</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a> <span><span>(</span></span> <span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_type"><span class="hole">ltac2_type</span></a></span><span class="notation-sup">*</span><span class="notation-sub">,</span></span> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-tac2rec_field"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-tac2rec_field"><span class="hole">tac2rec_field</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><span><span>mutable</span></span></span><span class="notation-sup">?</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a> <span><span>:</span></span> <a class="reference internal" href="#grammar-token-ltac2_type"><span class="hole">ltac2_type</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">:=</span></span></span></span></code></dt><dd><p>Defines a type with with an explicit set of constructors</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">::=</span></span></span></span></code></dt><dd><p>Extends an existing open variant type, a special kind of variant type whose constructors are not
statically defined, but can instead be extended dynamically. A typical example
is the standard <code class="docutils literal notranslate"><span class="pre">exn</span></code> type for exceptions. Pattern matching on open variants must always
include a catch-all clause. They can be extended with this form, in which case
<a class="reference internal" href="#grammar-token-tac2typ_knd"><code class="xref std std-token docutils literal notranslate"><span class="pre">tac2typ_knd</span></code></a> should be in the form <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">[</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">|</span></span></span></span><span class="notation-sup"><span class="pre">?</span></span></span> <span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-tac2alg_constructor"><span class="hole"><span class="pre">tac2alg_constructor</span></span></a></span><span class="notation-sup"><span class="pre">+</span></span><span class="notation-sub"><span class="pre">|</span></span></span></span><span class="notation-sup"><span class="pre">?</span></span></span> <span><span><span class="pre">]</span></span></span></span></code>.</p>
</dd>
<dt>Without <code class="docutils literal notranslate"><span class="notation"><span class="alternative"><span class="alternative-block"><span><span><span class="pre">:=</span></span></span></span><span class="alternative-separator"><span class="pre">​</span></span><span class="alternative-block"><span><span><span class="pre">::=</span></span></span></span></span></span></code></dt><dd><p>Defines an abstract type for use representing data from OCaml.  Not for
end users.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">with</span></span></span> <a class="reference internal" href="#grammar-token-tac2typ_def"><span class="hole"><span class="pre">tac2typ_def</span></span></a></span></code></dt><dd><p>Permits definition of mutually recursive type definitions.</p>
</dd>
</dl>
<p>Each production of <a class="reference internal" href="#grammar-token-tac2typ_knd"><code class="xref std std-token docutils literal notranslate"><span class="pre">tac2typ_knd</span></code></a> defines one of four possible kinds
of definitions, respectively: alias, variant, open variant and record types.</p>
<p>Aliases are names for a given type expression and are transparently
unfoldable to that expression. They cannot be recursive.</p>
<p>Variants are sum types defined by constructors and eliminated by
pattern-matching. They can be recursive, but the <code class="docutils literal notranslate"><span class="pre">rec</span></code> flag must be
explicitly set. Pattern matching must be exhaustive.</p>
<p>Open variants can be extended with additional constructors using the <code class="docutils literal notranslate"><span class="pre">::=</span></code> form.</p>
<p>Records are product types with named fields and eliminated by projection.
Likewise they can be recursive if the <code class="docutils literal notranslate"><span class="pre">rec</span></code> flag is set.</p>
</dd></dl>

<dl class="coq cmd">
<dt class="sig sig-object coq" id="coq:cmd.Ltac2-external">
<em class="property"><span class="sigannot"><span class="pre">Command</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">&#64;</span></span></span> <span><span><span class="pre">external</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a> <span><span><span class="pre">:</span></span></span> <a class="reference internal" href="#grammar-token-ltac2_type"><span class="hole"><span class="pre">ltac2_type</span></span></a> <span><span><span class="pre">:=</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-string"><span class="hole"><span class="pre">string</span><sub><span class="pre">plugin</span></sub></span></a> <a class="reference internal" href="../language/core/basic.html#grammar-token-string"><span class="hole"><span class="pre">string</span><sub><span class="pre">function</span></sub></span></a></span></span><a class="headerlink" href="#coq:cmd.Ltac2-external" title="Permalink to this definition">¶</a></dt>
<dd><p>Declares functions defined in OCaml. <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-string"><span class="hole"><span class="pre">string</span><sub><span class="pre">plugin</span></sub></span></a></span></code> is the
plugin name defining the function.  <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-string"><span class="hole"><span class="pre">string</span><sub><span class="pre">function</span></sub></span></a></span></code> is the internal name
of the function.</p>
<p>This command supports the <a class="reference internal" href="../using/libraries/writing.html#coq:attr.deprecated" title="deprecated"><code class="xref coq coq-attr docutils literal notranslate"><span class="pre">deprecated</span></code></a> attribute.</p>
</dd></dl>

</section>
<section id="apis">
<h3>APIs<a class="headerlink" href="#apis" title="Permalink to this headline">¶</a></h3>
<p>Ltac2 provides over 150 API functions that provide various capabilities.  These
are declared with <a class="reference internal" href="#coq:cmd.Ltac2-external" title="Ltac2 external"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Ltac2</span> <span class="pre">external</span></code></a> in <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">lib/coq/user-contrib/Ltac2/*.v</span></span></span></span></code>.
For example, <code class="docutils literal notranslate"><span class="pre">Message.print</span></code> defined in <code class="docutils literal notranslate"><span class="pre">Message.v</span></code> is used to print messages:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt class="coqtop-hidden"><span></span><span class="coqdoc-keyword">Goal</span><span> </span><span class="coqdoc-var">True</span><span>.</span><span>
</span></dt><dd class="coqtop-hidden"><span>1 goal
  
  ============================
  True
</span></dd>
</dl>
<span></span><dl>
<dt><span></span><span class="coqdoc-var">Message.print</span><span> (</span><span class="coqdoc-var">Message.of_string</span><span> &quot;fully qualified calls&quot;).</span><span>
</span></dt><dd><span>fully qualified calls
</span></dd>
<dt><span></span><span class="coqdoc-keyword">From</span><span> </span><span class="coqdoc-var">Ltac2</span><span> </span><span class="coqdoc-keyword">Require</span><span> </span><span class="coqdoc-keyword">Import</span><span> </span><span class="coqdoc-var">Message</span><span>.</span><span>
</span></dt><dt><span></span><span class="coqdoc-var">print</span><span> (</span><span class="coqdoc-var">of_string</span><span> &quot;unqualified calls&quot;).</span><span>
</span></dt><dd><span>unqualified calls
</span></dd>
</dl>
</div>
</section>
<section id="term-syntax">
<h3>Term Syntax<a class="headerlink" href="#term-syntax" title="Permalink to this headline">¶</a></h3>
<p>The syntax of the functional fragment is very close to that of Ltac1, except
that it adds a true pattern-matching feature, as well as a few standard
constructs from ML.</p>
<p>In practice, there is some additional syntactic sugar that allows the
user to bind a variable and match on it at the same time, in the usual ML style.</p>
<p>There is dedicated syntax for list and array literals.</p>
<span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_expr"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole">ltac2_expr</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr5"><span class="hole">ltac2_expr5</span></a> <span><span>;</span></span> <a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole">ltac2_expr</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr5"><span class="hole">ltac2_expr5</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_expr5"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr5"><span class="hole">ltac2_expr5</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>fun</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-tac2pat0"><span class="hole">tac2pat0</span></a></span><span class="notation-sup">+</span></span> <span class="repeat-wrapper"><span class="repeat"><span><span>:</span></span> <a class="reference internal" href="#grammar-token-ltac2_type"><span class="hole">ltac2_type</span></a></span><span class="notation-sup">?</span></span> <span><span>=&gt;</span></span> <a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole">ltac2_expr</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>let</span></span> <span class="repeat-wrapper"><span class="repeat"><span><span>rec</span></span></span><span class="notation-sup">?</span></span> <a class="reference internal" href="#grammar-token-ltac2_let_clause"><span class="hole">ltac2_let_clause</span></a> <span class="repeat-wrapper"><span class="repeat"><span><span>with</span></span> <a class="reference internal" href="#grammar-token-ltac2_let_clause"><span class="hole">ltac2_let_clause</span></a></span><span class="notation-sup">*</span></span> <span><span>in</span></span> <a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole">ltac2_expr</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr3"><span class="hole">ltac2_expr3</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_let_clause"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_let_clause"><span class="hole">ltac2_let_clause</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-tac2pat0"><span class="hole">tac2pat0</span></a></span><span class="notation-sup">+</span></span> <span class="repeat-wrapper"><span class="repeat"><span><span>:</span></span> <a class="reference internal" href="#grammar-token-ltac2_type"><span class="hole">ltac2_type</span></a></span><span class="notation-sup">?</span></span> <span><span>:=</span></span> <a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole">ltac2_expr</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_expr3"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr3"><span class="hole">ltac2_expr3</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_expr2"><span class="hole">ltac2_expr2</span></a></span><span class="notation-sup">+</span><span class="notation-sub">,</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_expr2"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr2"><span class="hole">ltac2_expr2</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr1"><span class="hole">ltac2_expr1</span></a> <span><span>::</span></span> <a class="reference internal" href="#grammar-token-ltac2_expr2"><span class="hole">ltac2_expr2</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr1"><span class="hole">ltac2_expr1</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_expr1"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr1"><span class="hole">ltac2_expr1</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr0"><span class="hole">ltac2_expr0</span></a> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_expr0"><span class="hole">ltac2_expr0</span></a></span><span class="notation-sup">+</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr0"><span class="hole">ltac2_expr0</span></a> <span><span>.(</span></span> <a class="reference internal" href="../language/core/modules.html#grammar-token-qualid"><span class="hole">qualid</span></a> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr0"><span class="hole">ltac2_expr0</span></a> <span><span>.(</span></span> <a class="reference internal" href="../language/core/modules.html#grammar-token-qualid"><span class="hole">qualid</span></a> <span><span>)</span></span> <span><span>:=</span></span> <a class="reference internal" href="#grammar-token-ltac2_expr5"><span class="hole">ltac2_expr5</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr0"><span class="hole">ltac2_expr0</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-tac2rec_fieldexpr"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-tac2rec_fieldexpr"><span class="hole">tac2rec_fieldexpr</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/modules.html#grammar-token-qualid"><span class="hole">qualid</span></a> <span class="repeat-wrapper"><span class="repeat"><span><span>:=</span></span> <a class="reference internal" href="#grammar-token-ltac2_expr1"><span class="hole">ltac2_expr1</span></a></span><span class="notation-sup">?</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_expr0"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr0"><span class="hole">ltac2_expr0</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>(</span></span> <a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole">ltac2_expr</span></a> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>(</span></span> <a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole">ltac2_expr</span></a> <span><span>:</span></span> <a class="reference internal" href="#grammar-token-ltac2_type"><span class="hole">ltac2_type</span></a> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>()</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>[</span></span> <span><span>|</span></span> <span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_expr5"><span class="hole">ltac2_expr5</span></a></span><span class="notation-sup">*</span><span class="notation-sub">;</span></span> <span><span>|</span></span> <span><span>]</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>[</span></span> <span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_expr5"><span class="hole">ltac2_expr5</span></a></span><span class="notation-sup">*</span><span class="notation-sub">;</span></span> <span><span>]</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>{</span></span> <a class="reference internal" href="#grammar-token-ltac2_expr0"><span class="hole">ltac2_expr0</span></a> <span><span>with</span></span> <span class="repeat-wrapper"><span class="repeat"><span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-tac2rec_fieldexpr"><span class="hole">tac2rec_fieldexpr</span></a></span><span class="notation-sup">+</span><span class="notation-sub">;</span></span> <span class="repeat-wrapper"><span class="repeat"><span><span>;</span></span></span><span class="notation-sup">?</span></span></span><span class="notation-sup">?</span></span> <span><span>}</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>{</span></span> <span class="repeat-wrapper"><span class="repeat"><span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-tac2rec_fieldexpr"><span class="hole">tac2rec_fieldexpr</span></a></span><span class="notation-sup">+</span><span class="notation-sub">;</span></span> <span class="repeat-wrapper"><span class="repeat"><span><span>;</span></span></span><span class="notation-sup">?</span></span></span><span class="notation-sup">?</span></span> <span><span>}</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_tactic_atom"><span class="hole">ltac2_tactic_atom</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-tac2rec_fieldpats"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-tac2rec_fieldpats"><span class="hole">tac2rec_fieldpats</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-tac2rec_fieldpat"><span class="hole">tac2rec_fieldpat</span></a> <span><span>;</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-tac2rec_fieldpats"><span class="hole">tac2rec_fieldpats</span></a></span><span class="notation-sup">?</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-tac2rec_fieldpat"><span class="hole">tac2rec_fieldpat</span></a> <span><span>;</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-tac2rec_fieldpat"><span class="hole">tac2rec_fieldpat</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-tac2rec_fieldpat"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-tac2rec_fieldpat"><span class="hole">tac2rec_fieldpat</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/modules.html#grammar-token-qualid"><span class="hole">qualid</span></a> <span class="repeat-wrapper"><span class="repeat"><span><span>:=</span></span> <a class="reference internal" href="#grammar-token-tac2pat1"><span class="hole">tac2pat1</span></a></span><span class="notation-sup">?</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_tactic_atom"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_tactic_atom"><span class="hole">ltac2_tactic_atom</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-integer"><span class="hole">integer</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-string"><span class="hole">string</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/modules.html#grammar-token-qualid"><span class="hole">qualid</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>&#64;</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>&amp;</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span>'</span> <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole">term</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_quotations"><span class="hole">ltac2_quotations</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><p>The non-terminal <span class="inline-grammar-production"><span class="target" id="grammar-token-lident"></span><code class="docutils literal notranslate"><span class="pre">lident</span></code></span> designates identifiers starting with a
lowercase letter.</p>
<p><code class="docutils literal notranslate"><span class="notation"><span>'</span><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole"><span class="pre">term</span></span></a></span></code> is equivalent to <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">open</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">constr:(</span></span></span><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole"><span class="pre">term</span></span></a><span><span><span class="pre">)</span></span></span></span></code>.</p>
<p>Record expressions and patterns support &quot;punning&quot;: in
<code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-tac2rec_fieldexpr"><span class="hole"><span class="pre">tac2rec_fieldexpr</span></span></a></span></code> and <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-tac2rec_fieldpat"><span class="hole"><span class="pre">tac2rec_fieldpat</span></span></a></span></code>, omitting the
optional part is equivalent to using <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">:=</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></code> where the
identifier is the identifier part of the field name (i.e. the <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/modules.html#grammar-token-qualid"><span class="hole"><span class="pre">qualid</span></span></a></span></code>).</p>
<p>A record value can be built from another by changing only a subset of
its fields with the syntax <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">{</span></span></span> <a class="reference internal" href="#grammar-token-ltac2_expr0"><span class="hole"><span class="pre">ltac2_expr0</span></span></a> <span><span><span class="pre">with</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="../language/core/modules.html#grammar-token-qualid"><span class="hole"><span class="pre">qualid</span></span></a> <span><span><span class="pre">:=</span></span></span> <a class="reference internal" href="#grammar-token-ltac2_expr1"><span class="hole"><span class="pre">ltac2_expr1</span></span></a></span><span class="notation-sup"><span class="pre">+</span></span><span class="notation-sub"><span class="pre">;</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">;</span></span></span></span><span class="notation-sup"><span class="pre">?</span></span></span></span><span class="notation-sup"><span class="pre">?</span></span></span> <span><span><span class="pre">}</span></span></span></span></code>. Fields
that are not explicitly assigned a value take
their value from <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr0"><span class="hole"><span class="pre">ltac2_expr0</span></span></a></span></code>.</p>
</section>
<section id="ltac2-definitions">
<h3>Ltac2 Definitions<a class="headerlink" href="#ltac2-definitions" title="Permalink to this headline">¶</a></h3>
<dl class="coq cmd">
<dt class="sig sig-object coq" id="coq:cmd.Ltac2">
<em class="property"><span class="sigannot"><span class="pre">Command</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">mutable</span></span></span></span><span class="notation-sup"><span class="pre">?</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">rec</span></span></span></span><span class="notation-sup"><span class="pre">?</span></span></span> <a class="reference internal" href="#grammar-token-tac2def_body"><span class="hole"><span class="pre">tac2def_body</span></span></a> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">with</span></span></span> <a class="reference internal" href="#grammar-token-tac2def_body"><span class="hole"><span class="pre">tac2def_body</span></span></a></span><span class="notation-sup"><span class="pre">*</span></span></span></span></span><a class="headerlink" href="#coq:cmd.Ltac2" title="Permalink to this definition">¶</a></dt>
<dd><span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-tac2def_body"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-tac2def_body"><span class="hole">tac2def_body</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="alternative"><span class="alternative-block"><span><span>_</span></span></span><span class="alternative-separator">​</span><span class="alternative-block"><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-tac2pat0"><span class="hole">tac2pat0</span></a></span><span class="notation-sup">*</span></span> <span class="repeat-wrapper"><span class="repeat"><span><span>:</span></span> <a class="reference internal" href="#grammar-token-ltac2_type"><span class="hole">ltac2_type</span></a></span><span class="notation-sup">?</span></span> <span><span>:=</span></span> <a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole">ltac2_expr</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><p>This command defines a new global Ltac2 value.  If one or more <a class="reference internal" href="#grammar-token-tac2pat0"><code class="xref std std-token docutils literal notranslate"><span class="pre">tac2pat0</span></code></a>
are specified, the new value is a function.  This is a shortcut for one of the
<a class="reference internal" href="#grammar-token-ltac2_expr5"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_expr5</span></code></a> productions.  For example: <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">foo</span></span></span> <span><span><span class="pre">a</span></span></span> <span><span><span class="pre">b</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">…</span></span></span></span></code> is equivalent
to <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">foo</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">fun</span></span></span> <span><span><span class="pre">a</span></span></span> <span><span><span class="pre">b</span></span></span> <span><span><span class="pre">=&gt;</span></span></span> <span><span><span class="pre">…</span></span></span></span></code>.</p>
<p>The body of an Ltac2 definition is required to be a syntactical value
that is, a function, a constant, a pure constructor recursively applied to
values or a (non-recursive) let binding of a value in a value.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">rec</span></code> is set, the tactic is expanded into a recursive binding.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">mutable</span></code> is set, the definition can be redefined at a later stage (see below).</p>
<p>This command supports the <a class="reference internal" href="../using/libraries/writing.html#coq:attr.deprecated" title="deprecated"><code class="xref coq coq-attr docutils literal notranslate"><span class="pre">deprecated</span></code></a> attribute.</p>
</dd></dl>

<dl class="coq cmd">
<dt class="sig sig-object coq" id="coq:cmd.Ltac2-Set">
<em class="property"><span class="sigannot"><span class="pre">Command</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">Set</span></span></span> <a class="reference internal" href="../language/core/modules.html#grammar-token-qualid"><span class="hole"><span class="pre">qualid</span></span></a> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">as</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span> <span><span><span class="pre">:=</span></span></span> <a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole"><span class="pre">ltac2_expr</span></span></a></span></span><a class="headerlink" href="#coq:cmd.Ltac2-Set" title="Permalink to this definition">¶</a></dt>
<dd><p>This command redefines a previous <code class="docutils literal notranslate"><span class="pre">mutable</span></code> definition.
Mutable definitions act like dynamic binding, i.e. at runtime, the last defined
value for this entry is chosen. This is useful for global flags and the like.
The previous value of the binding can be optionally accessed using the <code class="docutils literal notranslate"><span class="pre">as</span></code>
binding syntax.</p>
<div class="admonition note">
<p class="admonition-title">Example: Dynamic nature of mutable cells</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span></span><span class="coqdoc-keyword">Ltac</span><span>2 </span><span class="coqdoc-var">mutable</span><span> </span><span class="coqdoc-var">x</span><span> := </span><span class="coqdoc-var">true</span><span>.</span><span>
</span></dt><dt><span></span><span class="coqdoc-keyword">Ltac</span><span>2 </span><span class="coqdoc-var">y</span><span> := </span><span class="coqdoc-var">x</span><span>.</span><span>
</span></dt><dt><span></span><span class="coqdoc-keyword">Ltac</span><span>2 </span><span class="coqdoc-keyword">Eval</span><span> </span><span class="coqdoc-var">y</span><span>.</span><span>
</span></dt><dd><span>- : bool = true
</span></dd>
<dt><span></span><span class="coqdoc-keyword">Ltac</span><span>2 </span><span class="coqdoc-keyword">Set</span><span> </span><span class="coqdoc-var">x</span><span> := </span><span class="coqdoc-var">false</span><span>.</span><span>
</span></dt><dt><span></span><span class="coqdoc-keyword">Ltac</span><span>2 </span><span class="coqdoc-keyword">Eval</span><span> </span><span class="coqdoc-var">y</span><span>.</span><span>
</span></dt><dd><span>- : bool = false
</span></dd>
</dl>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Example: Interaction with recursive calls</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span></span><span class="coqdoc-keyword">Ltac</span><span>2 </span><span class="coqdoc-var">mutable</span><span> </span><span class="coqdoc-keyword">rec</span><span> </span><span class="coqdoc-var">f</span><span> </span><span class="coqdoc-var">b</span><span> := </span><span class="coqdoc-keyword">if</span><span> </span><span class="coqdoc-var">b</span><span> </span><span class="coqdoc-keyword">then</span><span> 0 </span><span class="coqdoc-keyword">else</span><span> </span><span class="coqdoc-var">f</span><span> </span><span class="coqdoc-var">true</span><span>.</span><span>
</span></dt><dt><span></span><span class="coqdoc-keyword">Ltac</span><span>2 </span><span class="coqdoc-keyword">Set</span><span> </span><span class="coqdoc-var">f</span><span> := </span><span class="coqdoc-keyword">fun</span><span> </span><span class="coqdoc-var">b</span><span> =&gt; </span><span class="coqdoc-keyword">if</span><span> </span><span class="coqdoc-var">b</span><span> </span><span class="coqdoc-keyword">then</span><span> 1 </span><span class="coqdoc-keyword">else</span><span> </span><span class="coqdoc-var">f</span><span> </span><span class="coqdoc-var">true</span><span>.</span><span>
</span></dt><dt><span></span><span class="coqdoc-keyword">Ltac</span><span>2 </span><span class="coqdoc-keyword">Eval</span><span> (</span><span class="coqdoc-var">f</span><span> </span><span class="coqdoc-var">false</span><span>).</span><span>
</span></dt><dd><span>- : int = 1
</span></dd>
<dt><span></span><span class="coqdoc-keyword">Ltac</span><span>2 </span><span class="coqdoc-keyword">Set</span><span> </span><span class="coqdoc-var">f</span><span> </span><span class="coqdoc-keyword">as</span><span> </span><span class="coqdoc-var">oldf</span><span> := </span><span class="coqdoc-keyword">fun</span><span> </span><span class="coqdoc-var">b</span><span> =&gt; </span><span class="coqdoc-keyword">if</span><span> </span><span class="coqdoc-var">b</span><span> </span><span class="coqdoc-keyword">then</span><span>  2 </span><span class="coqdoc-keyword">else</span><span> </span><span class="coqdoc-var">oldf</span><span> </span><span class="coqdoc-var">false</span><span>.</span><span>
</span></dt><dt><span></span><span class="coqdoc-keyword">Ltac</span><span>2 </span><span class="coqdoc-keyword">Eval</span><span> (</span><span class="coqdoc-var">f</span><span> </span><span class="coqdoc-var">false</span><span>).</span><span>
</span></dt><dd><span>- : int = 2
</span></dd>
</dl>
</div>
<p>In the definition, the <code class="docutils literal notranslate"><span class="pre">f</span></code> in the body is resolved statically
because the definition is marked recursive. In the first re-definition,
the <code class="docutils literal notranslate"><span class="pre">f</span></code> in the body is resolved dynamically. This is witnessed by
the second re-definition.</p>
</div>
</dd></dl>

</section>
<section id="printing-ltac2-tactics">
<h3>Printing Ltac2 tactics<a class="headerlink" href="#printing-ltac2-tactics" title="Permalink to this headline">¶</a></h3>
<dl class="coq cmd">
<dt class="sig sig-object coq" id="coq:cmd.Print-Ltac2">
<em class="property"><span class="sigannot"><span class="pre">Command</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">Print</span></span></span> <span><span><span class="pre">Ltac2</span></span></span> <a class="reference internal" href="../language/core/modules.html#grammar-token-qualid"><span class="hole"><span class="pre">qualid</span></span></a></span></span><a class="headerlink" href="#coq:cmd.Print-Ltac2" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="vernacular-commands.html#coq:cmd.Print" title="Print"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Print</span></code></a> can print defined Ltac2 tactics and can avoid printing
other objects by using <code class="docutils literal notranslate"><span class="pre">Print</span> <span class="pre">Ltac2</span></code>.</p>
</dd></dl>

<dl class="coq cmd">
<dt class="sig sig-object coq" id="coq:cmd.Print-Ltac2-Signatures">
<em class="property"><span class="sigannot"><span class="pre">Command</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">Print</span></span></span> <span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">Signatures</span></span></span></span></span><a class="headerlink" href="#coq:cmd.Print-Ltac2-Signatures" title="Permalink to this definition">¶</a></dt>
<dd><p>This command displays a list of all defined tactics in scope with their types.</p>
</dd></dl>

</section>
<section id="reduction">
<h3>Reduction<a class="headerlink" href="#reduction" title="Permalink to this headline">¶</a></h3>
<p>We use the usual ML call-by-value reduction, with an otherwise unspecified
evaluation order. This is a design choice making it compatible with OCaml,
if ever we implement native compilation. The expected equations are as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(fun x =&gt; t) V ≡ t{x := V} (βv)

let x := V in t ≡ t{x := V} (let)

match C V₀ ... Vₙ with ... | C x₀ ... xₙ  =&gt; t | ... end ≡ t {xᵢ := Vᵢ} (ι)

(t any term, V values, C constructor)
</pre></div>
</div>
<p>Note that call-by-value reduction is already a departure from Ltac1 which uses
heuristics to decide when to evaluate an expression. For instance, the following
expressions do not evaluate the same way in Ltac1.</p>
<p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">foo</span></span></span> <span><span><span class="pre">(idtac;</span></span></span> <span><span><span class="pre">let</span></span></span> <span><span><span class="pre">x</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">0</span></span></span> <span><span><span class="pre">in</span></span></span> <span><span><span class="pre">bar)</span></span></span></span></code></p>
<p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">foo</span></span></span> <span><span><span class="pre">(let</span></span></span> <span><span><span class="pre">x</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">0</span></span></span> <span><span><span class="pre">in</span></span></span> <span><span><span class="pre">bar)</span></span></span></span></code></p>
<p>Instead of relying on the <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">idtac</span></span></span></span></code> idiom, we would now require an explicit thunk
to not compute the argument, and <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">foo</span></span></span></span></code> would have e.g. type
<code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">(unit</span></span></span> <span><span><span class="pre">-&gt;</span></span></span> <span><span><span class="pre">unit)</span></span></span> <span><span><span class="pre">-&gt;</span></span></span> <span><span><span class="pre">unit</span></span></span></span></code>.</p>
<p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">foo</span></span></span> <span><span><span class="pre">(fun</span></span></span> <span><span><span class="pre">()</span></span></span> <span><span><span class="pre">=&gt;</span></span></span> <span><span><span class="pre">let</span></span></span> <span><span><span class="pre">x</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">0</span></span></span> <span><span><span class="pre">in</span></span></span> <span><span><span class="pre">bar)</span></span></span></span></code></p>
</section>
<section id="typing">
<h3>Typing<a class="headerlink" href="#typing" title="Permalink to this headline">¶</a></h3>
<p>Typing is strict and follows the Hindley-Milner system. Unlike Ltac1, there
are no type casts at runtime, and one has to resort to conversion
functions. See notations though to make things more palatable.</p>
<p>In this setting, all the usual argument-free tactics have type <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">unit</span></span></span> <span><span><span class="pre">-&gt;</span></span></span> <span><span><span class="pre">unit</span></span></span></span></code>, but
one can return a value of type <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">t</span></span></span></span></code> thanks to terms of type <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">unit</span></span></span> <span><span><span class="pre">-&gt;</span></span></span> <span><span><span class="pre">t</span></span></span></span></code>,
or take additional arguments.</p>
</section>
<section id="effects">
<h3>Effects<a class="headerlink" href="#effects" title="Permalink to this headline">¶</a></h3>
<p>Effects in Ltac2 are straightforward, except that instead of using the
standard IO monad as the ambient effectful world, Ltac2 has a tactic monad.</p>
<p>Note that the order of evaluation of application is <em>not</em> specified and is
implementation-dependent, as in OCaml.</p>
<p>We recall that the <code class="docutils literal notranslate"><span class="pre">Proofview.tactic</span></code> monad is essentially a IO monad together
with backtracking state representing the proof state.</p>
<p>Intuitively a thunk of type <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">unit</span></span></span> <span><span><span class="pre">-&gt;</span></span></span> <span>'<span><span class="pre">a</span></span></span></span></code> can do the following:</p>
<ul class="simple">
<li><p>It can perform non-backtracking IO like printing and setting mutable variables</p></li>
<li><p>It can fail in a non-recoverable way</p></li>
<li><p>It can use first-class backtracking. One way to think about this is that
thunks are isomorphic to this type:
<code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">(unit</span></span></span> <span><span><span class="pre">-&gt;</span></span></span> <span>'<span><span class="pre">a)</span></span></span> <span><span><span class="pre">~</span></span></span> <span><span><span class="pre">(unit</span></span></span> <span><span><span class="pre">-&gt;</span></span></span> <span><span><span class="pre">exn</span></span></span> <span><span><span class="pre">+</span></span></span> <span><span><span class="pre">(</span></span>'<span><span class="pre">a</span></span></span> <span><span><span class="pre">*</span></span></span> <span><span><span class="pre">(exn</span></span></span> <span><span><span class="pre">-&gt;</span></span></span> <span>'<span><span class="pre">a)))</span></span></span></span></code>
i.e. thunks can produce a lazy list of results where each
tail is waiting for a continuation exception.</p></li>
<li><p>It can access a backtracking proof state, consisting among other things of
the current evar assignment and the list of goals under focus.</p></li>
</ul>
<p>We now describe more thoroughly the various effects in Ltac2.</p>
<section id="standard-io">
<h4>Standard IO<a class="headerlink" href="#standard-io" title="Permalink to this headline">¶</a></h4>
<p>The Ltac2 language features non-backtracking IO, notably mutable data and
printing operations.</p>
<p>Mutable fields of records can be modified using the set syntax. Likewise,
built-in types like <code class="docutils literal notranslate"><span class="pre">string</span></code> and <code class="docutils literal notranslate"><span class="pre">array</span></code> feature imperative assignment. See
modules <code class="docutils literal notranslate"><span class="pre">String</span></code> and <code class="docutils literal notranslate"><span class="pre">Array</span></code> respectively.</p>
<p>A few printing primitives are provided in the <code class="docutils literal notranslate"><span class="pre">Message</span></code> module for
displaying information to the user.</p>
</section>
<section id="fatal-errors">
<h4>Fatal errors<a class="headerlink" href="#fatal-errors" title="Permalink to this headline">¶</a></h4>
<p>The Ltac2 language provides non-backtracking exceptions, also known as <em>panics</em>,
through the following primitive in module <code class="docutils literal notranslate"><span class="pre">Control</span></code>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>val throw : exn -&gt; &#39;a
</pre></div>
</div>
<p>Unlike backtracking exceptions from the next section, this kind of error
is never caught by backtracking primitives, that is, throwing an exception
destroys the stack. This is codified by the following equation, where <code class="docutils literal notranslate"><span class="pre">E</span></code>
is an evaluation context:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>E[throw e] ≡ throw e

(e value)
</pre></div>
</div>
<p>There is currently no way to catch such an exception, which is a deliberate design choice.
Eventually there might be a way to catch it and
destroy all backtrack and return values.</p>
</section>
<section id="backtracking">
<h4>Backtracking<a class="headerlink" href="#backtracking" title="Permalink to this headline">¶</a></h4>
<p>In Ltac2, we have the following backtracking primitives, defined in the
<code class="docutils literal notranslate"><span class="pre">Control</span></code> module:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Ltac2 Type &#39;a result := [ Val (&#39;a) | Err (exn) ].

val zero : exn -&gt; &#39;a
val plus : (unit -&gt; &#39;a) -&gt; (exn -&gt; &#39;a) -&gt; &#39;a
val case : (unit -&gt; &#39;a) -&gt; (&#39;a * (exn -&gt; &#39;a)) result
</pre></div>
</div>
<p>If one views thunks as lazy lists, then <code class="docutils literal notranslate"><span class="pre">zero</span></code> is the empty list and <code class="docutils literal notranslate"><span class="pre">plus</span></code> is
list concatenation, while <code class="docutils literal notranslate"><span class="pre">case</span></code> is pattern-matching.</p>
<p>The backtracking is first-class, i.e. one can write
<code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">plus</span></span></span> <span><span><span class="pre">(fun</span></span></span> <span><span><span class="pre">()</span></span></span> <span><span><span class="pre">=&gt;</span></span></span> <span><span><span class="pre">&quot;x&quot;)</span></span></span> <span><span><span class="pre">(fun</span></span></span> <span><span><span class="pre">_</span></span></span> <span><span><span class="pre">=&gt;</span></span></span> <span><span><span class="pre">&quot;y&quot;)</span></span></span> <span><span><span class="pre">:</span></span></span> <span><span><span class="pre">string</span></span></span></span></code> producing a backtracking string.</p>
<p>These operations are expected to satisfy a few equations, most notably that they
form a monoid compatible with sequentialization.:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>plus t zero ≡ t ()
plus (fun () =&gt; zero e) f ≡ f e
plus (plus t f) g ≡ plus t (fun e =&gt; plus (f e) g)

case (fun () =&gt; zero e) ≡ Err e
case (fun () =&gt; plus (fun () =&gt; t) f) ≡ Val (t,f)

let x := zero e in u ≡ zero e
let x := plus t f in u ≡ plus (fun () =&gt; let x := t in u) (fun e =&gt; let x := f e in u)

(t, u, f, g, e values)
</pre></div>
</div>
</section>
<section id="goals">
<h4>Goals<a class="headerlink" href="#goals" title="Permalink to this headline">¶</a></h4>
<p>A goal is given by the data of its conclusion and hypotheses, i.e. it can be
represented as <code class="docutils literal notranslate"><span class="pre">[Γ</span> <span class="pre">⊢</span> <span class="pre">A]</span></code>.</p>
<p>The tactic monad naturally operates over the whole proofview, which may
represent several goals, including none. Thus, there is no such thing as
<em>the current goal</em>. Goals are naturally ordered, though.</p>
<p>It is natural to do the same in Ltac2, but we must provide a way to get access
to a given goal. This is the role of the <code class="docutils literal notranslate"><span class="pre">enter</span></code> primitive, which applies a
tactic to each currently focused goal in turn:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>val enter : (unit -&gt; unit) -&gt; unit
</pre></div>
</div>
<p>It is guaranteed that when evaluating <code class="docutils literal notranslate"><span class="pre">enter</span> <span class="pre">f</span></code>, <code class="docutils literal notranslate"><span class="pre">f</span></code> is called with exactly one
goal under focus. Note that <code class="docutils literal notranslate"><span class="pre">f</span></code> may be called several times, or never, depending
on the number of goals under focus before the call to <code class="docutils literal notranslate"><span class="pre">enter</span></code>.</p>
<p>Accessing the goal data is then implicit in the Ltac2 primitives, and may panic
if the invariants are not respected. The two essential functions for observing
goals are given below.:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>val hyp : ident -&gt; constr
val goal : unit -&gt; constr
</pre></div>
</div>
<p>The two above functions panic if there is not exactly one goal under focus.
In addition, <code class="docutils literal notranslate"><span class="pre">hyp</span></code> may also fail if there is no hypothesis with the
corresponding name.</p>
</section>
</section>
</section>
<section id="meta-programming">
<h2>Meta-programming<a class="headerlink" href="#meta-programming" title="Permalink to this headline">¶</a></h2>
<section id="id3">
<h3>Overview<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>One of the major implementation issues of Ltac1 is the fact that it is
never clear whether an object refers to the object world or the meta-world.
This is an incredible source of slowness, as the interpretation must be
aware of bound variables and must use heuristics to decide whether a variable
is a proper one or referring to something in the Ltac context.</p>
<p>Likewise, in Ltac1, constr parsing is implicit, so that <code class="docutils literal notranslate"><span class="pre">foo</span> <span class="pre">0</span></code> is
not <code class="docutils literal notranslate"><span class="pre">foo</span></code> applied to the Ltac integer expression <code class="docutils literal notranslate"><span class="pre">0</span></code> (<code class="docutils literal notranslate"><span class="pre">L</span></code><sub>tac</sub> does have a
notion of integers, though it is not first-class), but rather the Coq term
<code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">Datatypes.O</span></span></code>.</p>
<p>The implicit parsing is confusing to users and often gives unexpected results.
Ltac2 makes these explicit using quoting and unquoting notation, although there
are notations to do it in a short and elegant way so as not to be too cumbersome
to the user.</p>
</section>
<section id="quotations">
<h3>Quotations<a class="headerlink" href="#quotations" title="Permalink to this headline">¶</a></h3>
<section id="built-in-quotations">
<span id="ltac2-built-in-quotations"></span><h4>Built-in quotations<a class="headerlink" href="#built-in-quotations" title="Permalink to this headline">¶</a></h4>
<span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_quotations"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_quotations"><span class="hole">ltac2_quotations</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>ident</span></span> <span><span>:</span></span> <span><span>(</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>constr</span></span> <span><span>:</span></span> <span><span>(</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole">term</span></a> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>open</span></span><span><span>_</span></span><span><span>constr</span></span> <span><span>:</span></span> <span><span>(</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole">term</span></a> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>preterm</span></span> <span><span>:</span></span> <span><span>(</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole">term</span></a> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>pat</span></span> <span><span>:</span></span> <span><span>(</span></span> <a class="reference internal" href="ltac.html#grammar-token-cpattern"><span class="hole">cpattern</span></a> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>reference</span></span> <span><span>:</span></span> <span><span>(</span></span> <span class="alternative"><span class="alternative-block"><span><span>&amp;</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span><span class="alternative-separator">​</span><span class="alternative-block"><a class="reference internal" href="../language/core/modules.html#grammar-token-qualid"><span class="hole">qualid</span></a></span></span> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>ltac1</span></span> <span><span>:</span></span> <span><span>(</span></span> <a class="reference internal" href="#grammar-token-ltac1_expr_in_env"><span class="hole">ltac1_expr_in_env</span></a> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>ltac1val</span></span> <span><span>:</span></span> <span><span>(</span></span> <a class="reference internal" href="#grammar-token-ltac1_expr_in_env"><span class="hole">ltac1_expr_in_env</span></a> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac1_expr_in_env"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac1_expr_in_env"><span class="hole">ltac1_expr_in_env</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="ltac.html#grammar-token-ltac_expr"><span class="hole">ltac_expr</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span><span class="notation-sup">*</span></span> <span><span>|-</span></span> <a class="reference internal" href="ltac.html#grammar-token-ltac_expr"><span class="hole">ltac_expr</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><p>The current implementation recognizes the following built-in quotations:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ident</span></code>, which parses identifiers (type <code class="docutils literal notranslate"><span class="pre">Init.ident</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">constr</span></code>, which parses Coq terms and produces an-evar free term at runtime
(type <code class="docutils literal notranslate"><span class="pre">Init.constr</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">open_constr</span></code>, which parses Coq terms and produces a term potentially with
holes at runtime (type <code class="docutils literal notranslate"><span class="pre">Init.constr</span></code> as well).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">preterm</span></code>, which parses Coq terms and produces a value which must
be typechecked with <code class="docutils literal notranslate"><span class="pre">Constr.pretype</span></code> (type <code class="docutils literal notranslate"><span class="pre">Init.preterm</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pat</span></code>, which parses Coq patterns and produces a pattern used for term
matching (type <code class="docutils literal notranslate"><span class="pre">Init.pattern</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reference</span></code>  Qualified names
are globalized at internalization into the corresponding global reference,
while <code class="docutils literal notranslate"><span class="pre">&amp;id</span></code> is turned into <code class="docutils literal notranslate"><span class="pre">Std.VarRef</span> <span class="pre">id</span></code>. This produces at runtime a
<code class="docutils literal notranslate"><span class="pre">Std.reference</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ltac1</span></code>, for calling Ltac1 code, described in <a class="reference internal" href="#simple-api"><span class="std std-ref">Simple API</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ltac1val</span></code>, for manipulating Ltac1 values, described in <a class="reference internal" href="#low-level-api"><span class="std std-ref">Low-level API</span></a>.</p></li>
</ul>
<p>The following syntactic sugar is provided for two common cases:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&#64;id</span></code> is the same as <code class="docutils literal notranslate"><span class="pre">ident:(id)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="notation"><span>'</span><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole"><span class="pre">term</span></span></a></span></code> is the same as <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">open</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">constr:(</span></span></span><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole"><span class="pre">term</span></span></a><span><span><span class="pre">)</span></span></span></span></code></p></li>
</ul>
</section>
<section id="strict-vs-non-strict-mode">
<h4>Strict vs. non-strict mode<a class="headerlink" href="#strict-vs-non-strict-mode" title="Permalink to this headline">¶</a></h4>
<p>Depending on the context, quotation-producing terms (i.e. <code class="docutils literal notranslate"><span class="pre">constr</span></code>,
<code class="docutils literal notranslate"><span class="pre">open_constr</span></code> or <code class="docutils literal notranslate"><span class="pre">preterm</span></code>) are not internalized in the same way.
There are two possible modes, the <em>strict</em> and the <em>non-strict</em> mode.</p>
<ul class="simple">
<li><p>In strict mode, all simple identifiers appearing in a term quotation are
required to be resolvable statically. That is, they must be the short name of
a declaration which is defined globally, excluding section variables and
hypotheses. If this doesn't hold, internalization will fail. To work around
this error, one has to specifically use the <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> notation.</p></li>
<li><p>In non-strict mode, any simple identifier appearing in a term quotation which
is not bound in the global environment is turned into a dynamic reference to a
hypothesis. That is to say, internalization will succeed, but the evaluation
of the term at runtime will fail if there is no such variable in the dynamic
context.</p></li>
</ul>
<p>Strict mode is enforced by default, such as for all Ltac2 definitions. Non-strict
mode is only set when evaluating Ltac2 snippets in interactive proof mode. The
rationale is that it is cumbersome to explicitly add <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> interactively, while it
is expected that global tactics enforce more invariants on their code.</p>
</section>
</section>
<section id="term-antiquotations">
<span id="id4"></span><h3>Term Antiquotations<a class="headerlink" href="#term-antiquotations" title="Permalink to this headline">¶</a></h3>
<section id="syntax">
<h4>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h4>
<p>One can also insert Ltac2 code into Coq terms, similar to what is possible in
Ltac1.</p>
<span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-term"></span></span><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole">term</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">+=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>ltac2:(</span></span> <a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole">ltac2_expr</span></a> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><p>Antiquoted terms are expected to have type <code class="docutils literal notranslate"><span class="pre">unit</span></code>, as they are only evaluated
for their side-effects.</p>
</section>
<section id="semantics">
<h4>Semantics<a class="headerlink" href="#semantics" title="Permalink to this headline">¶</a></h4>
<p>A quoted Coq term is interpreted in two phases, internalization and
evaluation.</p>
<ul class="simple">
<li><p>Internalization is part of the static semantics, that is, it is done at Ltac2
typing time.</p></li>
<li><p>Evaluation is part of the dynamic semantics, that is, it is done when
a term gets effectively computed by Ltac2.</p></li>
</ul>
<p>Note that typing of Coq terms is a <em>dynamic</em> process occurring at Ltac2
evaluation time, and not at Ltac2 typing time.</p>
<section id="static-semantics">
<h5>Static semantics<a class="headerlink" href="#static-semantics" title="Permalink to this headline">¶</a></h5>
<p>During internalization, Coq variables are resolved and antiquotations are
type checked as Ltac2 terms, effectively producing a <code class="docutils literal notranslate"><span class="pre">glob_constr</span></code> in Coq
implementation terminology. Note that although it went through the
type checking of <strong>Ltac2</strong>, the resulting term has not been fully computed and
is potentially ill-typed as a runtime <strong>Coq</strong> term.</p>
<div class="admonition note">
<p class="admonition-title">Example</p>
<p>The following term is valid (with type <code class="docutils literal notranslate"><span class="pre">unit</span> <span class="pre">-&gt;</span> <span class="pre">constr</span></code>), but will fail at runtime:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="simple">
<dt><span></span><span class="coqdoc-keyword">Ltac</span><span>2 </span><span class="coqdoc-var">myconstr</span><span> () := </span><span class="coqdoc-keyword">constr</span><span>:(</span><span class="coqdoc-var">nat</span><span> -&gt; 0).</span><span>
</span></dt></dl>
</div>
</div>
<p>Term antiquotations are type checked in the enclosing Ltac2 typing context
of the corresponding term expression.</p>
<div class="admonition note">
<p class="admonition-title">Example</p>
<p>The following will type check, with type <code class="docutils literal notranslate"><span class="pre">constr</span></code>.</p>
<div class="coqdoc literal-block docutils container">
<span><span></span><span class="coqdoc-keyword">let</span><span> </span><span class="coqdoc-var">x</span><span> := '0 </span><span class="coqdoc-tactic">in</span><span> </span><span class="coqdoc-keyword">constr</span><span>:(1 + </span><span class="coqdoc-var">ltac2</span><span>:(</span><span class="coqdoc-tactic">exact</span><span> </span><span class="coqdoc-var">x</span><span>))</span></span></div>
</div>
<p>Beware that the typing environment of antiquotations is <strong>not</strong>
expanded by the Coq binders from the term.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Example</p>
<p>The following Ltac2 expression will <strong>not</strong> type check:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>`constr:(fun x : nat =&gt; ltac2:(exact x))`
`(* Error: Unbound variable &#39;x&#39; *)`
</pre></div>
</div>
</div>
</div></blockquote>
<p>There is a simple reason for that, which is that the following expression would
not make sense in general.</p>
<p><code class="docutils literal notranslate"><span class="pre">constr:(fun</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">nat</span> <span class="pre">=&gt;</span> <span class="pre">ltac2:(clear</span> <span class="pre">&#64;x;</span> <span class="pre">exact</span> <span class="pre">x))</span></code></p>
<p>Indeed, a hypothesis can suddenly disappear from the runtime context if some
other tactic pulls the rug from under you.</p>
<p>Rather, the tactic writer has to resort to the <strong>dynamic</strong> goal environment,
and must write instead explicitly that she is accessing a hypothesis, typically
as follows.</p>
<p><code class="docutils literal notranslate"><span class="pre">constr:(fun</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">nat</span> <span class="pre">=&gt;</span> <span class="pre">ltac2:(exact</span> <span class="pre">(hyp</span> <span class="pre">&#64;x)))</span></code></p>
<p>This pattern is so common that we provide dedicated Ltac2 and Coq term notations
for it.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&amp;x</span></code> as an Ltac2 expression expands to <code class="docutils literal notranslate"><span class="pre">hyp</span> <span class="pre">&#64;x</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&amp;x</span></code> as a Coq constr expression expands to
<code class="docutils literal notranslate"><span class="pre">ltac2:(Control.refine</span> <span class="pre">(fun</span> <span class="pre">()</span> <span class="pre">=&gt;</span> <span class="pre">hyp</span> <span class="pre">&#64;x))</span></code>.</p></li>
</ul>
<p>In the special case where Ltac2 antiquotations appear inside a Coq term
notation, the notation variables are systematically bound in the body
of the tactic expression with type <code class="docutils literal notranslate"><span class="pre">Ltac2.Init.preterm</span></code>. Such a type represents
untyped syntactic Coq expressions, which can by typed in the
current context using the <code class="docutils literal notranslate"><span class="pre">Ltac2.Constr.pretype</span></code> function.</p>
<div class="admonition note">
<p class="admonition-title">Example</p>
<p>The following notation is essentially the identity.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="simple">
<dt><span></span><span class="coqdoc-keyword">Notation</span><span> &quot;[ x ]&quot; := </span><span class="coqdoc-var">ltac2</span><span>:(</span><span class="coqdoc-keyword">let</span><span> </span><span class="coqdoc-var">x</span><span> := </span><span class="coqdoc-var">Ltac2.Constr.pretype</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-tactic">in</span><span> </span><span class="coqdoc-tactic">exact</span><span> $</span><span class="coqdoc-var">x</span><span>) (</span><span class="coqdoc-var">only</span><span> </span><span class="coqdoc-var">parsing</span><span>).</span><span>
</span></dt></dl>
</div>
</div>
</section>
<section id="dynamic-semantics">
<h5>Dynamic semantics<a class="headerlink" href="#dynamic-semantics" title="Permalink to this headline">¶</a></h5>
<p>During evaluation, a quoted term is fully evaluated to a kernel term, and is
in particular type checked in the current environment.</p>
<p>Evaluation of a quoted term goes as follows.</p>
<ul class="simple">
<li><p>The quoted term is first evaluated by the pretyper.</p></li>
<li><p>Antiquotations are then evaluated in a context where there is exactly one goal
under focus, with the hypotheses coming from the current environment extended
with the bound variables of the term, and the resulting term is fed into the
quoted term.</p></li>
</ul>
<p>Relative orders of evaluation of antiquotations and quoted term are not
specified.</p>
<p>For instance, in the following example, <code class="docutils literal notranslate"><span class="pre">tac</span></code> will be evaluated in a context
with exactly one goal under focus, whose last hypothesis is <code class="docutils literal notranslate"><span class="pre">H</span> <span class="pre">:</span> <span class="pre">nat</span></code>. The
whole expression will thus evaluate to the term <code class="code Coq docutils literal notranslate"><span class="keyword"><span class="pre">fun</span></span> <span class="name"><span class="pre">H</span></span> <span class="operator"><span class="pre">:</span></span> <span class="name"><span class="pre">nat</span></span> <span class="operator"><span class="pre">=&gt;</span></span> <span class="name"><span class="pre">H</span></span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">let</span> <span class="pre">tac</span> <span class="pre">()</span> <span class="pre">:=</span> <span class="pre">hyp</span> <span class="pre">&#64;H</span> <span class="pre">in</span> <span class="pre">constr:(fun</span> <span class="pre">H</span> <span class="pre">:</span> <span class="pre">nat</span> <span class="pre">=&gt;</span> <span class="pre">ltac2:(tac</span> <span class="pre">()))</span></code></p>
<p>Many standard tactics perform type checking of their argument before going
further. It is your duty to ensure that terms are well-typed when calling
such tactics. Failure to do so will result in non-recoverable exceptions.</p>
<p><strong>Trivial Term Antiquotations</strong></p>
<p>It is possible to refer to a variable of type <code class="docutils literal notranslate"><span class="pre">constr</span></code> in the Ltac2 environment
through a specific syntax consistent with the antiquotations presented in
the notation section.</p>
<span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-term"></span></span><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole">term</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">+=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>$</span></span><a class="reference internal" href="#grammar-token-lident"><span class="hole">lident</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><p>or equivalently</p>
<span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-term"></span></span><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole">term</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">+=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>$constr:</span></span><a class="reference internal" href="#grammar-token-lident"><span class="hole">lident</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><p>In a Coq term, writing <code class="code Coq docutils literal notranslate"><span class="operator"><span class="pre">$</span></span><span class="name"><span class="pre">x</span></span></code> is semantically equivalent to
<code class="code Coq docutils literal notranslate"><span class="name"><span class="pre">ltac2</span></span><span class="operator"><span class="pre">:(</span></span><span class="name"><span class="pre">Control.refine</span></span> <span class="operator"><span class="pre">(</span></span><span class="keyword"><span class="pre">fun</span></span> <span class="name builtin pseudo"><span class="pre">()</span></span> <span class="operator"><span class="pre">=&gt;</span></span> <span class="name"><span class="pre">x</span></span><span class="operator"><span class="pre">))</span></span></code>, up to re-typechecking. It allows to
insert in a concise way an Ltac2 variable of type <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">constr</span></span></span></span></code> into a Coq term.</p>
<p>Similarly variables of type <code class="docutils literal notranslate"><span class="pre">preterm</span></code> have an antiquotation</p>
<span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-term"></span></span><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole">term</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">+=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>$preterm:</span></span><a class="reference internal" href="#grammar-token-lident"><span class="hole">lident</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><p>It is equivalent to pretyping the preterm with the appropriate typing constraint.</p>
</section>
</section>
</section>
<section id="match-over-terms">
<h3>Match over terms<a class="headerlink" href="#match-over-terms" title="Permalink to this headline">¶</a></h3>
<p>Ltac2 features a construction similar to Ltac1 <a class="reference internal" href="ltac.html#coq:tacn.match" title="match"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">match</span></code></a> over terms, although
in a less hard-wired way.</p>
<dl class="coq tacn">
<dt class="sig sig-object coq" id="coq:tacn.lazy_match!">
<span id="coq:tacn.match!"></span><span id="coq:tacn.multi_match!"></span><em class="property"><span class="sigannot"><span class="pre">Tactic</span></span></em> <span class="sig-name descname"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_match_key"><span class="hole"><span class="pre">ltac2_match_key</span></span></a> <a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole"><span class="pre">ltac2_expr</span><sub><span class="pre">term</span></sub></span></a> <span><span><span class="pre">with</span></span></span> <a class="reference internal" href="#grammar-token-ltac2_match_list"><span class="hole"><span class="pre">ltac2_match_list</span></span></a> <span><span><span class="pre">end</span></span></span></span></span><a class="headerlink" href="#coq:tacn.lazy_match!" title="Permalink to this definition">¶</a></dt>
<dd><span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_match_key"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_match_key"><span class="hole">ltac2_match_key</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>lazy</span></span><span><span>_</span></span><span><span>match!</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>match!</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>multi</span></span><span><span>_</span></span><span><span>match!</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_match_list"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_match_list"><span class="hole">ltac2_match_list</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><span><span>|</span></span></span><span class="notation-sup">?</span></span> <span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_match_rule"><span class="hole">ltac2_match_rule</span></a></span><span class="notation-sup">+</span><span class="notation-sub">|</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_match_rule"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_match_rule"><span class="hole">ltac2_match_rule</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_match_pattern"><span class="hole">ltac2_match_pattern</span></a> <span><span>=&gt;</span></span> <a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole">ltac2_expr</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_match_pattern"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_match_pattern"><span class="hole">ltac2_match_pattern</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="ltac.html#grammar-token-cpattern"><span class="hole">cpattern</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>context</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span><span class="notation-sup">?</span></span> <span><span>[</span></span> <a class="reference internal" href="ltac.html#grammar-token-cpattern"><span class="hole">cpattern</span></a> <span><span>]</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><p>Evaluates <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole"><span class="pre">ltac2_expr</span><sub><span class="pre">term</span></sub></span></a></span></code>, which must yield a term, and matches it
sequentially with the <a class="reference internal" href="#grammar-token-ltac2_match_pattern"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_match_pattern</span></code></a>s, which may contain
metavariables.  When a match is found, metavariable values are substituted
into <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole"><span class="pre">ltac2_expr</span></span></a></span></code>, which is then applied.</p>
<p>Matching may continue depending on whether  <code class="docutils literal notranslate"><span class="pre">lazy_match!</span></code>, <code class="docutils literal notranslate"><span class="pre">match!</span></code> or <code class="docutils literal notranslate"><span class="pre">multi_match!</span></code>
is specified.</p>
<p>In the <a class="reference internal" href="#grammar-token-ltac2_match_pattern"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_match_pattern</span></code></a>s, metavariables have the form <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">?</span></span></span><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></code>, whereas
in the <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole"><span class="pre">ltac2_expr</span></span></a></span></code>s, the question mark is omitted.</p>
<p>Matching is non-linear: if a
metavariable occurs more than once, each occurrence must match the same
expression.  Expressions match if they are syntactically equal or are
<a class="reference internal" href="../language/core/conversion.html#term-alpha-convertible"><span class="xref std std-term">α-convertible</span></a>.
Matching is first-order except on variables of the form <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">&#64;</span></span></span><span><span><span class="pre">?</span></span></span><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></code>
that occur in the head position of an application. For these variables,
matching is second-order and returns a functional term.</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">lazy_match!</span></code></dt><dd><p>Causes the match to commit to the first matching branch
rather than trying a new match if <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole"><span class="pre">ltac2_expr</span></span></a></span></code> fails.
<a class="reference internal" href="#ltac2-match-vs-lazymatch-ex"><span class="std std-ref">Example</span></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">match!</span></code></dt><dd><p>If <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole"><span class="pre">ltac2_expr</span></span></a></span></code> fails, continue matching with the next branch.
Failures in subsequent tactics (after the <code class="docutils literal notranslate"><span class="pre">match!</span></code>) will not cause selection
of a new branch.  Examples <a class="reference internal" href="#ltac2-match-vs-lazymatch-ex"><span class="std std-ref">here</span></a> and
<a class="reference internal" href="#ltac2-match-vs-multimatch-ex"><span class="std std-ref">here</span></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">multi_match!</span></code></dt><dd><p>If <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole"><span class="pre">ltac2_expr</span></span></a></span></code> fails, continue matching with the next branch.
When a <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole"><span class="pre">ltac2_expr</span></span></a></span></code> succeeds for a branch, subsequent failures
(after the <code class="docutils literal notranslate"><span class="pre">multi_match!</span></code>) causing consumption of all the successes
of <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole"><span class="pre">ltac2_expr</span></span></a></span></code> trigger selection of a new matching branch.
<a class="reference internal" href="#ltac2-match-vs-multimatch-ex"><span class="std std-ref">Example</span></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="ltac.html#grammar-token-cpattern"><span class="hole"><span class="pre">cpattern</span></span></a></span></code></dt><dd><p>The syntax of <a class="reference internal" href="ltac.html#grammar-token-cpattern"><code class="xref std std-token docutils literal notranslate"><span class="pre">cpattern</span></code></a> is
the same as that of <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><code class="xref std std-token docutils literal notranslate"><span class="pre">term</span></code></a>s, but it can contain pattern matching
metavariables in the form <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">?</span></span></span><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></code> and <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">&#64;</span></span></span><span><span><span class="pre">?</span></span></span><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></code>.  <code class="code Coq docutils literal notranslate"><span class="operator"><span class="pre">_</span></span></code> can be used to match
irrelevant terms.</p>
<p>Unlike Ltac1, Ltac2 <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">?id</span></span></span></span></code> metavariables only match closed terms.</p>
<p>There is also a special notation for second-order pattern matching: in an
applicative pattern of the form <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">&#64;</span></span></span><span><span><span class="pre">?</span></span></span><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span><sub><span class="pre">1</span></sub></span></a> <span><span><span class="pre">…</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span><sub><span class="pre">n</span></sub></span></a></span></code>,
the variable <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><code class="xref std std-token docutils literal notranslate"><span class="pre">ident</span></code></a> matches any complex expression with (possible)
dependencies in the variables <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span><sub><span class="pre">i</span></sub></span></a></span></code> and returns a functional term
of the form <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">fun</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span><sub><span class="pre">1</span></sub></span></a> <span><span><span class="pre">…</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span><sub><span class="pre">n</span></sub></span></a> <span><span><span class="pre">=&gt;</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole"><span class="pre">term</span></span></a></span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">context</span></span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span> <span><span><span class="pre">[</span></span></span> <a class="reference internal" href="ltac.html#grammar-token-cpattern"><span class="hole"><span class="pre">cpattern</span></span></a> <span><span><span class="pre">]</span></span></span></span></code></dt><dd><p>Matches any term with a subterm matching <a class="reference internal" href="ltac.html#grammar-token-cpattern"><code class="xref std std-token docutils literal notranslate"><span class="pre">cpattern</span></code></a>. If there is a match
and <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></code> is present, it is assigned the &quot;matched
context&quot;, i.e. the initial term where the matched subterm is replaced by a
hole.  This hole in the matched context can be filled with the expression
<code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Pattern.instantiate</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a> <a class="reference internal" href="ltac.html#grammar-token-cpattern"><span class="hole"><span class="pre">cpattern</span></span></a></span></code>.</p>
<p>For <a class="reference internal" href="#coq:tacn.match!" title="match!"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">match!</span></code></a> and <a class="reference internal" href="#coq:tacn.multi_match!" title="multi_match!"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">multi_match!</span></code></a>, if the evaluation of the <a class="reference internal" href="#grammar-token-ltac2_expr"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_expr</span></code></a>
fails, the next matching subterm is tried. If no further subterm matches, the next branch
is tried.  Matching subterms are considered from top to bottom and from left to
right (with respect to the raw printing obtained by setting the
<a class="reference internal" href="vernacular-commands.html#coq:flag.Printing-All" title="Printing All"><code class="xref coq coq-flag docutils literal notranslate"><span class="pre">Printing</span> <span class="pre">All</span></code></a> flag).  <a class="reference internal" href="#ltac2-match-term-context-ex"><span class="std std-ref">Example</span></a>.</p>
</dd>
</dl>
<dl>
<dt><code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole"><span class="pre">ltac2_expr</span></span></a></span></code></dt><dd><p>The tactic to apply if the construct matches.  Metavariable values from the pattern
match are statically bound as Ltac2 variables in <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole"><span class="pre">ltac2_expr</span></span></a></span></code> before
it is applied.</p>
<p>If <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole"><span class="pre">ltac2_expr</span></span></a></span></code> is a tactic with backtracking points, then subsequent
failures after a <a class="reference internal" href="#coq:tacn.lazy_match!" title="lazy_match!"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">lazy_match!</span></code></a> or <a class="reference internal" href="#coq:tacn.multi_match!" title="multi_match!"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">multi_match!</span></code></a> (but not <a class="reference internal" href="#coq:tacn.match!" title="match!"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">match!</span></code></a>) can cause
backtracking into <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole"><span class="pre">ltac2_expr</span></span></a></span></code> to select its next success.</p>
</dd>
</dl>
<p>Variables from the <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-tac2pat1"><span class="hole"><span class="pre">tac2pat1</span></span></a></span></code> are statically bound in the body of the branch.
Variables from the <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole"><span class="pre">term</span></span></a></span></code> pattern have values of type <code class="docutils literal notranslate"><span class="pre">constr</span></code>.
Variables from the <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></code> in the <code class="docutils literal notranslate"><span class="pre">context</span></code> construct have values of type
<code class="docutils literal notranslate"><span class="pre">Pattern.context</span></code> (defined in <code class="docutils literal notranslate"><span class="pre">Pattern.v</span></code>).</p>
</dd></dl>

<p>Note that unlike Ltac1, only lowercase identifiers are valid as Ltac2
bindings.  Ltac2 will report an error if one of the bound variables
starts with an uppercase character.</p>
<p>The semantics of this construction are otherwise the same as the corresponding
one from Ltac1, except that it requires the goal to be focused.</p>
<div class="admonition note" id="ltac2-match-vs-lazymatch-ex">
<p class="admonition-title">Example: Ltac2 Comparison of lazy_match! and match!</p>
<p>(Equivalent to this <a class="reference internal" href="ltac.html#match-vs-lazymatch-ex"><span class="std std-ref">Ltac1 example</span></a>.)</p>
<p>These lines define a <code class="docutils literal notranslate"><span class="pre">msg</span></code> tactic that's used in several examples as a more-succinct
alternative to <code class="docutils literal notranslate"><span class="pre">print</span> <span class="pre">(to_string</span> <span class="pre">&quot;...&quot;)</span></code>:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="simple">
<dt><span></span><span class="coqdoc-keyword">From</span><span> </span><span class="coqdoc-var">Ltac2</span><span> </span><span class="coqdoc-keyword">Require</span><span> </span><span class="coqdoc-keyword">Import</span><span> </span><span class="coqdoc-var">Message</span><span>.</span><span>
</span></dt><dt><span></span><span class="coqdoc-keyword">Ltac</span><span>2 </span><span class="coqdoc-var">msg</span><span> </span><span class="coqdoc-var">x</span><span> := </span><span class="coqdoc-var">print</span><span> (</span><span class="coqdoc-var">of_string</span><span> </span><span class="coqdoc-var">x</span><span>).</span><span>
</span></dt></dl>
<span></span><dl>
<dt class="coqtop-hidden"><span></span><span class="coqdoc-keyword">Goal</span><span> </span><span class="coqdoc-var">True</span><span>.</span><span>
</span></dt><dd class="coqtop-hidden"><span>1 goal
  
  ============================
  True
</span></dd>
</dl>
</div>
<p>In <a class="reference internal" href="#coq:tacn.lazy_match!" title="lazy_match!"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">lazy_match!</span></code></a>, if <a class="reference internal" href="#grammar-token-ltac2_expr"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_expr</span></code></a> fails, the <a class="reference internal" href="#coq:tacn.lazy_match!" title="lazy_match!"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">lazy_match!</span></code></a> fails;
it doesn't look for further matches.  In <a class="reference internal" href="#coq:tacn.match!" title="match!"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">match!</span></code></a>, if <a class="reference internal" href="#grammar-token-ltac2_expr"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_expr</span></code></a> fails
in a matching branch, it will try to match on subsequent branches.  Note that
<code class="docutils literal notranslate"><span class="notation"><span>'</span><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole"><span class="pre">term</span></span></a></span></code> below is equivalent to <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">open</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">constr:(</span></span></span><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole"><span class="pre">term</span></span></a><span><span><span class="pre">)</span></span></span></span></code>.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span></span><span class="coqdoc-var">Fail</span><span> </span><span class="coqdoc-var">lazy_match</span><span>! '</span><span class="coqdoc-var">True</span><span> </span><span class="coqdoc-keyword">with</span><span>
| </span><span class="coqdoc-var">True</span><span> =&gt; </span><span class="coqdoc-var">msg</span><span> &quot;branch 1&quot;; </span><span class="coqdoc-tactic">fail</span><span>
| </span><span class="coqdoc-var">_</span><span> =&gt; </span><span class="coqdoc-var">msg</span><span> &quot;branch 2&quot;</span><span>
</span><span class="coqdoc-keyword">end</span><span>.</span><span>
</span></dt><dd><span>branch 1
The command has indeed failed with message:
Uncaught Ltac2 exception: Tactic_failure (None)
</span></dd>
<dt><span></span><span>
</span><span class="coqdoc-keyword">match</span><span>! '</span><span class="coqdoc-var">True</span><span> </span><span class="coqdoc-keyword">with</span><span>
| </span><span class="coqdoc-var">True</span><span> =&gt; </span><span class="coqdoc-var">msg</span><span> &quot;branch 1&quot;; </span><span class="coqdoc-tactic">fail</span><span>
| </span><span class="coqdoc-var">_</span><span> =&gt; </span><span class="coqdoc-var">msg</span><span> &quot;branch 2&quot;</span><span>
</span><span class="coqdoc-keyword">end</span><span>.</span><span>
</span></dt><dd><span>branch 1
branch 2
</span></dd>
</dl>
</div>
</div>
<div class="admonition note" id="ltac2-match-vs-multimatch-ex">
<p class="admonition-title">Example: Ltac2 Comparison of match! and multi_match!</p>
<p>(Equivalent to this <a class="reference internal" href="ltac.html#match-vs-multimatch-ex"><span class="std std-ref">Ltac1 example</span></a>.)</p>
<p><a class="reference internal" href="#coq:tacn.match!" title="match!"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">match!</span></code></a> tactics are only evaluated once, whereas <a class="reference internal" href="#coq:tacn.multi_match!" title="multi_match!"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">multi_match!</span></code></a>
tactics may be evaluated more than once if the following constructs trigger backtracking:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span></span><span class="coqdoc-var">Fail</span><span> </span><span class="coqdoc-keyword">match</span><span>! '</span><span class="coqdoc-var">True</span><span> </span><span class="coqdoc-keyword">with</span><span>
| </span><span class="coqdoc-var">True</span><span> =&gt; </span><span class="coqdoc-var">msg</span><span> &quot;branch 1&quot;</span><span>
| </span><span class="coqdoc-var">_</span><span> =&gt; </span><span class="coqdoc-var">msg</span><span> &quot;branch 2&quot;</span><span>
</span><span class="coqdoc-keyword">end</span><span> ;</span><span>
</span><span class="coqdoc-var">msg</span><span> &quot;branch A&quot;; </span><span class="coqdoc-tactic">fail</span><span>.</span><span>
</span></dt><dd><span>branch 1
branch A
The command has indeed failed with message:
Uncaught Ltac2 exception: Tactic_failure (None)
</span></dd>
</dl>
<span></span><dl>
<dt><span></span><span class="coqdoc-var">Fail</span><span> </span><span class="coqdoc-var">multi_match</span><span>! '</span><span class="coqdoc-var">True</span><span> </span><span class="coqdoc-keyword">with</span><span>
| </span><span class="coqdoc-var">True</span><span> =&gt; </span><span class="coqdoc-var">msg</span><span> &quot;branch 1&quot;</span><span>
| </span><span class="coqdoc-var">_</span><span> =&gt; </span><span class="coqdoc-var">msg</span><span> &quot;branch 2&quot;</span><span>
</span><span class="coqdoc-keyword">end</span><span> ;</span><span>
</span><span class="coqdoc-var">msg</span><span> &quot;branch A&quot;; </span><span class="coqdoc-tactic">fail</span><span>.</span><span>
</span></dt><dd><span>branch 1
branch A
branch 2
branch A
The command has indeed failed with message:
Uncaught Ltac2 exception: Tactic_failure (None)
</span></dd>
</dl>
</div>
</div>
<span class="target" id="ltac2-match-with-holes-ex"></span><div class="admonition note" id="ltac2-match-term-context-ex">
<p class="admonition-title">Example: Ltac2 Multiple matches for a &quot;context&quot; pattern.</p>
<p>(Equivalent to this <a class="reference internal" href="ltac.html#match-term-context-ex"><span class="std std-ref">Ltac1 example</span></a>.)</p>
<p>Internally &quot;x &lt;&gt; y&quot; is represented as &quot;(~ (x = y))&quot;, which produces the
first match.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="simple">
<dt><span></span><span class="coqdoc-keyword">Ltac</span><span>2 </span><span class="coqdoc-var">f2</span><span> </span><span class="coqdoc-var">t</span><span> := </span><span class="coqdoc-keyword">match</span><span>! </span><span class="coqdoc-var">t</span><span> </span><span class="coqdoc-keyword">with</span><span>
              | </span><span class="coqdoc-keyword">context</span><span> [ (~ ?</span><span class="coqdoc-var">t</span><span>) ] =&gt; </span><span class="coqdoc-var">print</span><span> (</span><span class="coqdoc-var">of_constr</span><span> </span><span class="coqdoc-var">t</span><span>); </span><span class="coqdoc-tactic">fail</span><span>
              | </span><span class="coqdoc-var">_</span><span> =&gt; ()</span><span>
              </span><span class="coqdoc-keyword">end</span><span>.</span><span>
</span></dt></dl>
<span></span><dl>
<dt><span></span><span class="coqdoc-var">f2</span><span> </span><span class="coqdoc-keyword">constr</span><span>:((~ </span><span class="coqdoc-var">True</span><span>) &lt;&gt; (~ </span><span class="coqdoc-var">False</span><span>)).</span><span>
</span></dt><dd><span>((</span><span>~</span><span> True)</span><span> =</span><span> (</span><span>~</span><span> False))
True
False
</span></dd>
</dl>
</div>
</div>
</section>
<section id="match-over-goals">
<h3>Match over goals<a class="headerlink" href="#match-over-goals" title="Permalink to this headline">¶</a></h3>
<dl class="coq tacn">
<dt class="sig sig-object coq" id="coq:tacn.lazy_match!-goal">
<span id="coq:tacn.match!-goal"></span><span id="coq:tacn.multi_match!-goal"></span><em class="property"><span class="sigannot"><span class="pre">Tactic</span></span></em> <span class="sig-name descname"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_match_key"><span class="hole"><span class="pre">ltac2_match_key</span></span></a> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">reverse</span></span></span></span><span class="notation-sup"><span class="pre">?</span></span></span> <span><span><span class="pre">goal</span></span></span> <span><span><span class="pre">with</span></span></span> <a class="reference internal" href="#grammar-token-goal_match_list"><span class="hole"><span class="pre">goal_match_list</span></span></a> <span><span><span class="pre">end</span></span></span></span></span><a class="headerlink" href="#coq:tacn.lazy_match!-goal" title="Permalink to this definition">¶</a></dt>
<dd><span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-goal_match_list"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-goal_match_list"><span class="hole">goal_match_list</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><span><span>|</span></span></span><span class="notation-sup">?</span></span> <span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-gmatch_rule"><span class="hole">gmatch_rule</span></a></span><span class="notation-sup">+</span><span class="notation-sub">|</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-gmatch_rule"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-gmatch_rule"><span class="hole">gmatch_rule</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-gmatch_pattern"><span class="hole">gmatch_pattern</span></a> <span><span>=&gt;</span></span> <a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole">ltac2_expr</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-gmatch_pattern"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-gmatch_pattern"><span class="hole">gmatch_pattern</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>[</span></span> <span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-gmatch_hyp_pattern"><span class="hole">gmatch_hyp_pattern</span></a></span><span class="notation-sup">*</span><span class="notation-sub">,</span></span> <span><span>|-</span></span> <a class="reference internal" href="#grammar-token-ltac2_match_pattern"><span class="hole">ltac2_match_pattern</span></a> <span><span>]</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-gmatch_hyp_pattern"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-gmatch_hyp_pattern"><span class="hole">gmatch_hyp_pattern</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/assumptions.html#grammar-token-name"><span class="hole">name</span></a> <span><span>:</span></span> <a class="reference internal" href="#grammar-token-ltac2_match_pattern"><span class="hole">ltac2_match_pattern</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/assumptions.html#grammar-token-name"><span class="hole">name</span></a> <span><span>:=</span></span> <span><span>[</span></span> <a class="reference internal" href="#grammar-token-ltac2_match_pattern"><span class="hole">ltac2_match_pattern</span></a> <span><span>]</span></span> <span><span>:</span></span> <a class="reference internal" href="#grammar-token-ltac2_match_pattern"><span class="hole">ltac2_match_pattern</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/assumptions.html#grammar-token-name"><span class="hole">name</span></a> <span><span>:=</span></span> <a class="reference internal" href="#grammar-token-ltac2_match_pattern"><span class="hole">ltac2_match_pattern</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><p>Matches over goals, similar to Ltac1 <a class="reference internal" href="ltac.html#coq:tacn.match-goal" title="match goal"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">match</span> <span class="pre">goal</span></code></a>.
Use this form to match hypotheses and/or goals in the local context.  These patterns have zero or
more subpatterns to match hypotheses followed by a subpattern to match the conclusion.  Except for the
differences noted below, this works the same as the corresponding <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_match_key"><span class="hole"><span class="pre">ltac2_match_key</span></span></a> <a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole"><span class="pre">ltac2_expr</span></span></a></span></code> construct
(see <a class="reference internal" href="#coq:tacn.match!" title="match!"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">match!</span></code></a>).  Each current goal is processed independently.</p>
<p>Matching is non-linear: if a
metavariable occurs more than once, each occurrence must match the same
expression.  Within a single term, expressions match if they are syntactically equal or
<a class="reference internal" href="../language/core/conversion.html#term-alpha-convertible"><span class="xref std std-term">α-convertible</span></a>.  When a metavariable is used across
multiple hypotheses or across a hypothesis and the current goal, the expressions match if
they are <a class="reference internal" href="../language/core/conversion.html#term-convertible"><span class="xref std std-term">convertible</span></a>.</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="notation"><span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-gmatch_pattern"><span class="hole"><span class="pre">gmatch_pattern</span></span></a></span><span class="notation-sup"><span class="pre">*</span></span><span class="notation-sub"><span class="pre">,</span></span></span></span></code></dt><dd><p>Patterns to match with hypotheses.  Each pattern must match a distinct hypothesis in order
for the branch to match.</p>
<p>Hypotheses have the form <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/assumptions.html#grammar-token-name"><span class="hole"><span class="pre">name</span></span></a> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">:=</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole"><span class="pre">term</span><sub><span class="pre">binder</span></sub></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span> <span><span><span class="pre">:</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-type"><span class="hole"><span class="pre">type</span></span></a></span></code>.  If <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole"><span class="pre">term</span><sub><span class="pre">binder</span></sub></span></a></span></code> is not specified, the pattern matches hypotheses even if they have a body.</p>
<p>If there are multiple <a class="reference internal" href="#grammar-token-gmatch_hyp_pattern"><code class="xref std std-token docutils literal notranslate"><span class="pre">gmatch_hyp_pattern</span></code></a>s in a branch, there may be multiple ways to match them to hypotheses.
For <a class="reference internal" href="#coq:tacn.match!-goal" title="match! goal"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">match!</span> <span class="pre">goal</span></code></a> and <a class="reference internal" href="#coq:tacn.multi_match!-goal" title="multi_match! goal"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">multi_match!</span> <span class="pre">goal</span></code></a>, if the evaluation of the <a class="reference internal" href="#grammar-token-ltac2_expr"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_expr</span></code></a> fails,
matching will continue with the next hypothesis combination.  When those are exhausted,
the next alternative from any <code class="docutils literal notranslate"><span class="pre">context</span></code> construct in the <a class="reference internal" href="#grammar-token-ltac2_match_pattern"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_match_pattern</span></code></a>s is tried and then,
when the context alternatives are exhausted, the next branch is tried.
<a class="reference internal" href="#ltac2-match-goal-multiple-hyps-ex"><span class="std std-ref">Example</span></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">reverse</span></code></dt><dd><p>Hypothesis matching for <a class="reference internal" href="#grammar-token-gmatch_hyp_pattern"><code class="xref std std-token docutils literal notranslate"><span class="pre">gmatch_hyp_pattern</span></code></a>s normally begins by matching them from left to right,
to hypotheses, last to first.  Specifying <code class="docutils literal notranslate"><span class="pre">reverse</span></code> begins matching in the reverse order, from
first to last.  <a class="reference internal" href="#ltac2-match-goal-hyps-ex"><span class="std std-ref">Normal</span></a> and <a class="reference internal" href="#ltac2-match-goal-hyps-rev-ex"><span class="std std-ref">reverse</span></a> examples.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span class="pre">|</span><span><span><span class="pre">-</span></span></span> <a class="reference internal" href="#grammar-token-ltac2_match_pattern"><span class="hole"><span class="pre">ltac2_match_pattern</span></span></a></span></code></dt><dd><p>A pattern to match with the current goal</p>
</dd>
</dl>
<p>Note that unlike Ltac1, only lowercase identifiers are valid as Ltac2
bindings.  Ltac2 will report an error if you try to use a bound variable
that starts with an uppercase character.</p>
<p>Variables from <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-gmatch_hyp_pattern"><span class="hole"><span class="pre">gmatch_hyp_pattern</span></span></a></span></code> and <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_match_pattern"><span class="hole"><span class="pre">ltac2_match_pattern</span></span></a></span></code> are
bound in the body of the branch. Their types are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">constr</span></code> for pattern variables appearing in a <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole"><span class="pre">term</span></span></a></span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Pattern.context</span></code> for variables binding a context</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ident</span></code> for variables binding a hypothesis name.</p></li>
</ul>
<p>The same identifier caveat as in the case of matching over constr applies, and
this feature has the same semantics as in Ltac1.</p>
</dd></dl>

<div class="admonition note" id="ltac2-match-goal-hyps-ex">
<p class="admonition-title">Example: Ltac2 Matching hypotheses</p>
<p>(Equivalent to this <a class="reference internal" href="ltac.html#match-goal-hyps-ex"><span class="std std-ref">Ltac1 example</span></a>.)</p>
<p>Hypotheses are matched from the last hypothesis (which is by default the newest
hypothesis) to the first until the <a class="reference internal" href="tactics.html#coq:tacn.apply" title="apply"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">apply</span></code></a> succeeds.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span></span><span class="coqdoc-keyword">Goal</span><span> </span><span class="coqdoc-keyword">forall</span><span> </span><span class="coqdoc-var">A</span><span> </span><span class="coqdoc-var">B</span><span> : </span><span class="coqdoc-keyword">Prop</span><span>, </span><span class="coqdoc-var">A</span><span> -&gt; </span><span class="coqdoc-var">B</span><span> -&gt; (</span><span class="coqdoc-var">A</span><span>-&gt;</span><span class="coqdoc-var">B</span><span>).</span><span>
</span></dt><dd><span>1 goal
  
  ============================
  </span><span class="ansi-bold">forall</span><span> A B : </span><span class="ansi-fg-yellow ansi-bold">Prop</span><span>, A</span><span> -&gt;</span><span> B</span><span> -&gt;</span><span> A</span><span> -&gt;</span><span> B
</span></dd>
<dt><span></span><span class="coqdoc-tactic">intros</span><span>.</span><span>
</span></dt><dd><span>1 goal
  
  A, B : </span><span class="ansi-fg-yellow ansi-bold">Prop</span><span>
  H : A
  H0 : B
  H1 : A
  ============================
  B
</span></dd>
<dt><span></span><span class="coqdoc-keyword">match</span><span>! </span><span class="coqdoc-keyword">goal</span><span> </span><span class="coqdoc-keyword">with</span><span>
| [ </span><span class="coqdoc-var">h</span><span> : </span><span class="coqdoc-var">_</span><span> |- </span><span class="coqdoc-var">_</span><span> ] =&gt; </span><span class="coqdoc-keyword">let</span><span> </span><span class="coqdoc-var">h</span><span> := </span><span class="coqdoc-var">Control.hyp</span><span> </span><span class="coqdoc-var">h</span><span> </span><span class="coqdoc-tactic">in</span><span> </span><span class="coqdoc-var">print</span><span> (</span><span class="coqdoc-var">of_constr</span><span> </span><span class="coqdoc-var">h</span><span>); </span><span class="coqdoc-tactic">apply</span><span> $</span><span class="coqdoc-var">h</span><span>
</span><span class="coqdoc-keyword">end</span><span>.</span><span>
</span></dt><dd><span>H1
H0
No more goals.
</span></dd>
</dl>
</div>
</div>
<div class="admonition note" id="ltac2-match-goal-hyps-rev-ex">
<p class="admonition-title">Example: Matching hypotheses with reverse</p>
<p>(Equivalent to this <a class="reference internal" href="ltac.html#match-goal-hyps-rev-ex"><span class="std std-ref">Ltac1 example</span></a>.)</p>
<p>Hypotheses are matched from the first hypothesis to the last until the <a class="reference internal" href="tactics.html#coq:tacn.apply" title="apply"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">apply</span></code></a> succeeds.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span></span><span class="coqdoc-keyword">Goal</span><span> </span><span class="coqdoc-keyword">forall</span><span> </span><span class="coqdoc-var">A</span><span> </span><span class="coqdoc-var">B</span><span> : </span><span class="coqdoc-keyword">Prop</span><span>, </span><span class="coqdoc-var">A</span><span> -&gt; </span><span class="coqdoc-var">B</span><span> -&gt; (</span><span class="coqdoc-var">A</span><span>-&gt;</span><span class="coqdoc-var">B</span><span>).</span><span>
</span></dt><dd><span>1 goal
  
  ============================
  </span><span class="ansi-bold">forall</span><span> A B : </span><span class="ansi-fg-yellow ansi-bold">Prop</span><span>, A</span><span> -&gt;</span><span> B</span><span> -&gt;</span><span> A</span><span> -&gt;</span><span> B
</span></dd>
<dt><span></span><span class="coqdoc-tactic">intros</span><span>.</span><span>
</span></dt><dd><span>1 goal
  
  A, B : </span><span class="ansi-fg-yellow ansi-bold">Prop</span><span>
  H : A
  H0 : B
  H1 : A
  ============================
  B
</span></dd>
<dt><span></span><span class="coqdoc-keyword">match</span><span>! </span><span class="coqdoc-var">reverse</span><span> </span><span class="coqdoc-keyword">goal</span><span> </span><span class="coqdoc-keyword">with</span><span>
| [ </span><span class="coqdoc-var">h</span><span> : </span><span class="coqdoc-var">_</span><span> |- </span><span class="coqdoc-var">_</span><span> ] =&gt; </span><span class="coqdoc-keyword">let</span><span> </span><span class="coqdoc-var">h</span><span> := </span><span class="coqdoc-var">Control.hyp</span><span> </span><span class="coqdoc-var">h</span><span> </span><span class="coqdoc-tactic">in</span><span> </span><span class="coqdoc-var">print</span><span> (</span><span class="coqdoc-var">of_constr</span><span> </span><span class="coqdoc-var">h</span><span>); </span><span class="coqdoc-tactic">apply</span><span> $</span><span class="coqdoc-var">h</span><span>
</span><span class="coqdoc-keyword">end</span><span>.</span><span>
</span></dt><dd><span>A
B
H
H0
No more goals.
</span></dd>
</dl>
</div>
</div>
<div class="admonition note" id="ltac2-match-goal-multiple-hyps-ex">
<p class="admonition-title">Example: Multiple ways to match a hypotheses</p>
<p>(Equivalent to this <a class="reference internal" href="ltac.html#match-goal-multiple-hyps-ex"><span class="std std-ref">Ltac1 example</span></a>.)</p>
<p>Every possible match for the hypotheses is evaluated until the right-hand
side succeeds.  Note that <code class="docutils literal notranslate"><span class="pre">h1</span></code> and <code class="docutils literal notranslate"><span class="pre">h2</span></code> are never matched to the same hypothesis.
Observe that the number of permutations can grow as the factorial
of the number of hypotheses and hypothesis patterns.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span></span><span class="coqdoc-keyword">Goal</span><span> </span><span class="coqdoc-keyword">forall</span><span> </span><span class="coqdoc-var">A</span><span> </span><span class="coqdoc-var">B</span><span> : </span><span class="coqdoc-keyword">Prop</span><span>, </span><span class="coqdoc-var">A</span><span> -&gt; </span><span class="coqdoc-var">B</span><span> -&gt; (</span><span class="coqdoc-var">A</span><span>-&gt;</span><span class="coqdoc-var">B</span><span>).</span><span>
</span></dt><dd><span>1 goal
  
  ============================
  </span><span class="ansi-bold">forall</span><span> A B : </span><span class="ansi-fg-yellow ansi-bold">Prop</span><span>, A</span><span> -&gt;</span><span> B</span><span> -&gt;</span><span> A</span><span> -&gt;</span><span> B
</span></dd>
<dt><span></span><span class="coqdoc-tactic">intros</span><span> </span><span class="coqdoc-var">A</span><span> </span><span class="coqdoc-var">B</span><span> </span><span class="coqdoc-var">H</span><span>.</span><span>
</span></dt><dd><span>1 goal
  
  A, B : </span><span class="ansi-fg-yellow ansi-bold">Prop</span><span>
  H : A
  ============================
  B</span><span> -&gt;</span><span> A</span><span> -&gt;</span><span> B
</span></dd>
<dt><span></span><span class="coqdoc-keyword">match</span><span>! </span><span class="coqdoc-keyword">goal</span><span> </span><span class="coqdoc-keyword">with</span><span>
| [ </span><span class="coqdoc-var">h1</span><span> : </span><span class="coqdoc-var">_</span><span>, </span><span class="coqdoc-var">h2</span><span> : </span><span class="coqdoc-var">_</span><span> |- </span><span class="coqdoc-var">_</span><span> ] =&gt;</span><span>
   </span><span class="coqdoc-var">print</span><span> (</span><span class="coqdoc-var">concat</span><span> (</span><span class="coqdoc-var">of_string</span><span> &quot;match &quot;)</span><span>
         (</span><span class="coqdoc-var">concat</span><span> (</span><span class="coqdoc-var">of_constr</span><span> (</span><span class="coqdoc-var">Control.hyp</span><span> </span><span class="coqdoc-var">h1</span><span>))</span><span>
         (</span><span class="coqdoc-var">concat</span><span> (</span><span class="coqdoc-var">of_string</span><span> &quot; &quot;)</span><span>
         (</span><span class="coqdoc-var">of_constr</span><span> (</span><span class="coqdoc-var">Control.hyp</span><span> </span><span class="coqdoc-var">h2</span><span>)))));</span><span>
   </span><span class="coqdoc-tactic">fail</span><span>
| [ |- </span><span class="coqdoc-var">_</span><span> ] =&gt; ()</span><span>
</span><span class="coqdoc-keyword">end</span><span>.</span><span>
</span></dt><dd><span>match B H
match A H
match H B
match A B
match H A
match B A
</span></dd>
</dl>
</div>
</div>
</section>
<section id="match-on-values">
<span id="ltac2-match-on-values"></span><h3>Match on values<a class="headerlink" href="#match-on-values" title="Permalink to this headline">¶</a></h3>
<dl class="coq tacn">
<dt class="sig sig-object coq" id="coq:tacn.match-(Ltac2)">
<em class="property"><span class="sigannot"><span class="pre">Tactic</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">match</span></span></span> <a class="reference internal" href="#grammar-token-ltac2_expr5"><span class="hole"><span class="pre">ltac2_expr5</span></span></a> <span><span><span class="pre">with</span></span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_branches"><span class="hole"><span class="pre">ltac2_branches</span></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span> <span><span><span class="pre">end</span></span></span></span></span><a class="headerlink" href="#coq:tacn.match-(Ltac2)" title="Permalink to this definition">¶</a></dt>
<dd><p>Matches a value, akin to the OCaml <code class="docutils literal notranslate"><span class="pre">match</span></code> construct.  By itself, it doesn't cause backtracking
as do the <code class="docutils literal notranslate"><span class="pre">*match*!</span></code> and <code class="docutils literal notranslate"><span class="pre">*match*!</span> <span class="pre">goal</span></code> constructs.</p>
<span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_branches"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_branches"><span class="hole">ltac2_branches</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><span><span>|</span></span></span><span class="notation-sup">?</span></span> <span class="repeat-wrapper-with-sub"><span class="repeat"><span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-atomic_tac2pat"><span class="hole">atomic_tac2pat</span></a></span><span class="notation-sup">?</span></span> <span><span>=&gt;</span></span> <a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole">ltac2_expr</span></a></span><span class="notation-sup">+</span><span class="notation-sub">|</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-tac2pat1"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-tac2pat1"><span class="hole">tac2pat1</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/modules.html#grammar-token-qualid"><span class="hole">qualid</span></a> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-tac2pat0"><span class="hole">tac2pat0</span></a></span><span class="notation-sup">+</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/modules.html#grammar-token-qualid"><span class="hole">qualid</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-tac2pat0"><span class="hole">tac2pat0</span></a> <span><span>::</span></span> <a class="reference internal" href="#grammar-token-tac2pat0"><span class="hole">tac2pat0</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-tac2pat0"><span class="hole">tac2pat0</span></a> <span><span>|</span></span> <span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-tac2pat1"><span class="hole">tac2pat1</span></a></span><span class="notation-sup">+</span><span class="notation-sub">|</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-tac2pat0"><span class="hole">tac2pat0</span></a> <span><span>as</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-tac2pat0"><span class="hole">tac2pat0</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-tac2pat0"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-tac2pat0"><span class="hole">tac2pat0</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>_</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>()</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-integer"><span class="hole">integer</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-string"><span class="hole">string</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/modules.html#grammar-token-qualid"><span class="hole">qualid</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>(</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-atomic_tac2pat"><span class="hole">atomic_tac2pat</span></a></span><span class="notation-sup">?</span></span> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>{</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-tac2rec_fieldpats"><span class="hole">tac2rec_fieldpats</span></a></span><span class="notation-sup">?</span></span> <span><span>}</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>[</span></span> <span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-tac2pat1"><span class="hole">tac2pat1</span></a></span><span class="notation-sup">*</span><span class="notation-sub">;</span></span> <span><span>]</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-atomic_tac2pat"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-atomic_tac2pat"><span class="hole">atomic_tac2pat</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-tac2pat1"><span class="hole">tac2pat1</span></a> <span><span>:</span></span> <a class="reference internal" href="#grammar-token-ltac2_type"><span class="hole">ltac2_type</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-tac2pat1"><span class="hole">tac2pat1</span></a> <span><span>,</span></span> <span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-tac2pat1"><span class="hole">tac2pat1</span></a></span><span class="notation-sup">*</span><span class="notation-sub">,</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-tac2pat1"><span class="hole">tac2pat1</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span></dd></dl>

<dl class="coq tacn">
<dt class="sig sig-object coq" id="coq:tacn.if-then-else-(Ltac2)">
<em class="property"><span class="sigannot"><span class="pre">Tactic</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">if</span></span></span> <a class="reference internal" href="#grammar-token-ltac2_expr5"><span class="hole"><span class="pre">ltac2_expr5</span><sub><span class="pre">test</span></sub></span></a> <span><span><span class="pre">then</span></span></span> <a class="reference internal" href="#grammar-token-ltac2_expr5"><span class="hole"><span class="pre">ltac2_expr5</span><sub><span class="pre">then</span></sub></span></a> <span><span><span class="pre">else</span></span></span> <a class="reference internal" href="#grammar-token-ltac2_expr5"><span class="hole"><span class="pre">ltac2_expr5</span><sub><span class="pre">else</span></sub></span></a></span></span><a class="headerlink" href="#coq:tacn.if-then-else-(Ltac2)" title="Permalink to this definition">¶</a></dt>
<dd><p>Equivalent to a <a class="reference internal" href="#coq:tacn.match-(Ltac2)" title="match (Ltac2)"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">match</span></code></a> on a boolean value.  If the
<code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr5"><span class="hole"><span class="pre">ltac2_expr5</span><sub><span class="pre">test</span></sub></span></a></span></code> evaluates to true, <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr5"><span class="hole"><span class="pre">ltac2_expr5</span><sub><span class="pre">then</span></sub></span></a></span></code>
is evaluated.  Otherwise <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_expr5"><span class="hole"><span class="pre">ltac2_expr5</span><sub><span class="pre">else</span></sub></span></a></span></code> is evaluated.</p>
</dd></dl>

</section>
</section>
<section id="notations">
<span id="ltac2-notations"></span><h2>Notations<a class="headerlink" href="#notations" title="Permalink to this headline">¶</a></h2>
<dl class="coq cmd">
<dt class="sig sig-object coq" id="coq:cmd.Ltac2-Notation">
<em class="property"><span class="sigannot"><span class="pre">Command</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">Notation</span></span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_scope"><span class="hole"><span class="pre">ltac2_scope</span></span></a></span><span class="notation-sup"><span class="pre">+</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">:</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-natural"><span class="hole"><span class="pre">natural</span></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span> <span><span><span class="pre">:=</span></span></span> <a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole"><span class="pre">ltac2_expr</span></span></a></span></span><a class="headerlink" href="#coq:cmd.Ltac2-Notation" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#coq:cmd.Ltac2-Notation" title="Ltac2 Notation"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Ltac2</span> <span class="pre">Notation</span></code></a> provides a way to extend the syntax of Ltac2 tactics.  The left-hand
side (before the <code class="docutils literal notranslate"><span class="pre">:=</span></code>) defines the syntax to recognize and gives formal parameter
names for the syntactic values.  <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-integer"><span class="hole"><span class="pre">integer</span></span></a></span></code> is the level of the notation.
When the notation is used, the values are substituted
into the right-hand side.  The right-hand side is typechecked when the notation is used,
not when it is defined.  In the following example, <code class="docutils literal notranslate"><span class="pre">x</span></code> is the formal parameter name and
<code class="docutils literal notranslate"><span class="pre">constr</span></code> is its <a class="reference internal" href="#syntactic-classes"><span class="std std-ref">syntactic class</span></a>.  <code class="docutils literal notranslate"><span class="pre">print</span></code> and <code class="docutils literal notranslate"><span class="pre">of_constr</span></code> are
functions provided by Coq through <code class="docutils literal notranslate"><span class="pre">Message.v</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Example: Printing a <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole"><span class="pre">term</span></span></a></span></code></p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt class="coqtop-hidden"><span></span><span class="coqdoc-keyword">Goal</span><span> </span><span class="coqdoc-var">True</span><span>.</span><span>
</span></dt><dd class="coqtop-hidden"><span>1 goal
  
  ============================
  True
</span></dd>
</dl>
<span></span><dl>
<dt><span></span><span class="coqdoc-keyword">From</span><span> </span><span class="coqdoc-var">Ltac2</span><span> </span><span class="coqdoc-keyword">Require</span><span> </span><span class="coqdoc-keyword">Import</span><span> </span><span class="coqdoc-var">Message</span><span>.</span><span>
</span></dt><dt><span></span><span class="coqdoc-keyword">Ltac</span><span>2 </span><span class="coqdoc-keyword">Notation</span><span> &quot;ex1&quot; </span><span class="coqdoc-var">x</span><span>(</span><span class="coqdoc-keyword">constr</span><span>) := </span><span class="coqdoc-var">print</span><span> (</span><span class="coqdoc-var">of_constr</span><span> </span><span class="coqdoc-var">x</span><span>).</span><span>
</span></dt><dt><span></span><span class="coqdoc-var">ex1</span><span> (1 + 2).</span><span>
</span></dt><dd><span>(1</span><span> +</span><span> 2)
</span></dd>
</dl>
</div>
<p>You can also print terms with a regular Ltac2 definition, but then the <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole"><span class="pre">term</span></span></a></span></code> must be in
the quotation <code class="docutils literal notranslate"><span class="pre">constr:(</span> <span class="pre">…</span> <span class="pre">)</span></code>:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span></span><span class="coqdoc-keyword">Ltac</span><span>2 </span><span class="coqdoc-var">ex2</span><span> </span><span class="coqdoc-var">x</span><span> := </span><span class="coqdoc-var">print</span><span> (</span><span class="coqdoc-var">of_constr</span><span> </span><span class="coqdoc-var">x</span><span>).</span><span>
</span></dt><dt><span></span><span class="coqdoc-var">ex2</span><span> </span><span class="coqdoc-keyword">constr</span><span>:(1+2).</span><span>
</span></dt><dd><span>(1</span><span> +</span><span> 2)
</span></dd>
</dl>
</div>
</div>
<p>There are also metasyntactic classes described <a class="reference internal" href="#syntactic-classes"><span class="std std-ref">here</span></a>
that combine other items.  For example, <code class="docutils literal notranslate"><span class="pre">list1(constr,</span> <span class="pre">&quot;,&quot;)</span></code>
recognizes a comma-separated list of one or more <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><code class="xref std std-token docutils literal notranslate"><span class="pre">term</span></code></a>s.</p>
<div class="admonition note">
<p class="admonition-title">Example: Parsing a list of <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole"><span class="pre">term</span></span></a></span></code>s</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span></span><span class="coqdoc-keyword">Ltac</span><span>2 </span><span class="coqdoc-keyword">rec</span><span> </span><span class="coqdoc-var">print_list</span><span> </span><span class="coqdoc-var">x</span><span> := </span><span class="coqdoc-keyword">match</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-keyword">with</span><span>
| </span><span class="coqdoc-var">a</span><span> :: </span><span class="coqdoc-var">t</span><span> =&gt; </span><span class="coqdoc-var">print</span><span> (</span><span class="coqdoc-var">of_constr</span><span> </span><span class="coqdoc-var">a</span><span>); </span><span class="coqdoc-var">print_list</span><span> </span><span class="coqdoc-var">t</span><span>
| [] =&gt; ()</span><span>
</span><span class="coqdoc-keyword">end</span><span>.</span><span>
</span></dt><dt><span></span><span class="coqdoc-keyword">Ltac</span><span>2 </span><span class="coqdoc-keyword">Notation</span><span> &quot;ex2&quot; </span><span class="coqdoc-var">x</span><span>(</span><span class="coqdoc-var">list1</span><span>(</span><span class="coqdoc-keyword">constr</span><span>, &quot;,&quot;)) := </span><span class="coqdoc-var">print_list</span><span> </span><span class="coqdoc-var">x</span><span>.</span><span>
</span></dt><dt><span></span><span class="coqdoc-var">ex2</span><span> 1, 2, 3.</span><span>
</span></dt><dd><span>1
2
3
</span></dd>
</dl>
</div>
</div>
<p>An Ltac2 notation adds a parsing rule to the Ltac2 grammar, which is expanded
to the provided body where every token from the notation is let-bound to the
corresponding generated expression.</p>
<div class="admonition note">
<p class="admonition-title">Example</p>
<p>Assume we perform:</p>
<div class="coqdoc literal-block docutils container">
<span><span></span><span class="coqdoc-keyword">Ltac</span><span>2 </span><span class="coqdoc-keyword">Notation</span><span> &quot;foo&quot; </span><span class="coqdoc-var">c</span><span>(</span><span class="coqdoc-var">thunk</span><span>(</span><span class="coqdoc-keyword">constr</span><span>)) </span><span class="coqdoc-var">ids</span><span>(</span><span class="coqdoc-var">list0</span><span>(</span><span class="coqdoc-var">ident</span><span>)) := </span><span class="coqdoc-var">Bar.f</span><span> </span><span class="coqdoc-var">c</span><span> </span><span class="coqdoc-var">ids</span><span>.</span><span>
</span></span></div>
<p>Then the following expression</p>
<p><code class="docutils literal notranslate"><span class="pre">let</span> <span class="pre">y</span> <span class="pre">:=</span> <span class="pre">&#64;X</span> <span class="pre">in</span> <span class="pre">foo</span> <span class="pre">(nat</span> <span class="pre">-&gt;</span> <span class="pre">nat)</span> <span class="pre">x</span> <span class="pre">$y</span></code></p>
<p>will expand at parsing time to</p>
<p><code class="docutils literal notranslate"><span class="pre">let</span> <span class="pre">y</span> <span class="pre">:=</span> <span class="pre">&#64;X</span> <span class="pre">in</span></code>
<code class="docutils literal notranslate"><span class="pre">let</span> <span class="pre">c</span> <span class="pre">:=</span> <span class="pre">fun</span> <span class="pre">()</span> <span class="pre">=&gt;</span> <span class="pre">constr:(nat</span> <span class="pre">-&gt;</span> <span class="pre">nat)</span> <span class="pre">with</span> <span class="pre">ids</span> <span class="pre">:=</span> <span class="pre">[&#64;x;</span> <span class="pre">y]</span> <span class="pre">in</span> <span class="pre">Bar.f</span> <span class="pre">c</span> <span class="pre">ids</span></code></p>
<p>Beware that the order of evaluation of multiple let-bindings is not specified,
so that you may have to resort to thunking to ensure that side-effects are
performed at the right time.</p>
</div>
<p>This command supports the <a class="reference internal" href="../using/libraries/writing.html#coq:attr.deprecated" title="deprecated"><code class="xref coq coq-attr docutils literal notranslate"><span class="pre">deprecated</span></code></a> attribute.</p>
<dl class="coq exn">
<dt class="sig sig-object coq" id="coq:exn.Notation-levels-must-range-between-0-and-6">
<em class="property"><span class="sigannot"><span class="pre">Error</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">Notation</span></span></span> <span><span><span class="pre">levels</span></span></span> <span><span><span class="pre">must</span></span></span> <span><span><span class="pre">range</span></span></span> <span><span><span class="pre">between</span></span></span> <span><span><span class="pre">0</span></span></span> <span><span><span class="pre">and</span></span></span> <span><span><span class="pre">6.</span></span></span></span></span><a class="headerlink" href="#coq:exn.Notation-levels-must-range-between-0-and-6" title="Permalink to this definition">¶</a></dt>
<dd><p>The level of a notation must be an integer between 0 and 6 inclusive.</p>
</dd></dl>

</dd></dl>

<section id="abbreviations">
<h3>Abbreviations<a class="headerlink" href="#abbreviations" title="Permalink to this headline">¶</a></h3>
<dl class="coq cmd">
<dt class="sig sig-object coq" id="coq:cmd.Ltac2-Notation-(abbreviation)">
<em class="property"><span class="sigannot"><span class="pre">Command</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">Notation</span></span></span> <span class="alternative"><span class="alternative-block"><a class="reference internal" href="../language/core/basic.html#grammar-token-string"><span class="hole"><span class="pre">string</span></span></a></span><span class="alternative-separator"><span class="pre">​</span></span><span class="alternative-block"><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></span> <span><span><span class="pre">:=</span></span></span> <a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole"><span class="pre">ltac2_expr</span></span></a></span></span><a class="headerlink" href="#coq:cmd.Ltac2-Notation-(abbreviation)" title="Permalink to this definition">¶</a></dt>
<dd><p>Introduces a special kind of notation, called an abbreviation,
that does not add any parsing rules. It is similar in
spirit to Coq abbreviations (see <a class="reference internal" href="../user-extensions/syntax-extensions.html#coq:cmd.Notation-(abbreviation)" title="Notation (abbreviation)"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Notation</span> <span class="pre">(abbreviation)</span></code></a>,
insofar as its main purpose is to give an
absolute name to a piece of pure syntax, which can be transparently referred to
by this name as if it were a proper definition.</p>
<p>The abbreviation can then be manipulated just like a normal Ltac2 definition,
except that it is expanded at internalization time into the given expression.
Furthermore, in order to make this kind of construction useful in practice in
an effectful language such as Ltac2, any syntactic argument to an abbreviation
is thunked on-the-fly during its expansion.</p>
<p>For instance, suppose that we define the following.</p>
<p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">Notation</span></span></span> <span><span><span class="pre">foo</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">fun</span></span></span> <span><span><span class="pre">x</span></span></span> <span><span><span class="pre">=&gt;</span></span></span> <span><span><span class="pre">x</span></span></span> <span><span><span class="pre">().</span></span></span></span></code></p>
<p>Then we have the following expansion at internalization time.</p>
<p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">foo</span></span></span> <span><span><span class="pre">0</span></span></span> <span><span><span class="pre">↦</span></span></span> <span><span><span class="pre">(fun</span></span></span> <span><span><span class="pre">x</span></span></span> <span><span><span class="pre">=&gt;</span></span></span> <span><span><span class="pre">x</span></span></span> <span><span><span class="pre">())</span></span></span> <span><span><span class="pre">(fun</span></span></span> <span><span><span class="pre">_</span></span></span> <span><span><span class="pre">=&gt;</span></span></span> <span><span><span class="pre">0)</span></span></span></span></code></p>
<p>Note that abbreviations are not type checked at all, and may result in typing
errors after expansion.</p>
<p>This command supports the <a class="reference internal" href="../using/libraries/writing.html#coq:attr.deprecated" title="deprecated"><code class="xref coq coq-attr docutils literal notranslate"><span class="pre">deprecated</span></code></a> attribute.</p>
</dd></dl>

</section>
<section id="defining-tactics">
<span id="id5"></span><h3>Defining tactics<a class="headerlink" href="#defining-tactics" title="Permalink to this headline">¶</a></h3>
<p>Built-in tactics (those defined in OCaml code in the Coq executable) and Ltac1 tactics,
which are defined in <code class="docutils literal notranslate"><span class="pre">.v</span></code> files, must be defined through notations.  (Ltac2 tactics can be
defined with <a class="reference internal" href="#coq:cmd.Ltac2" title="Ltac2"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Ltac2</span></code></a>.</p>
<p>Notations for many but not all built-in tactics are defined in <code class="docutils literal notranslate"><span class="pre">Notations.v</span></code>, which is automatically
loaded with Ltac2.  The Ltac2 syntax for these tactics is often identical or very similar to the
tactic syntax described in other chapters of this documentation.  These notations rely on tactic functions
declared in <code class="docutils literal notranslate"><span class="pre">Std.v</span></code>.  Functions corresponding to some built-in tactics may not yet be defined in the
Coq executable or declared in <code class="docutils literal notranslate"><span class="pre">Std.v</span></code>.  Adding them may require code changes to Coq or defining
workarounds through Ltac1 (described below).</p>
<p>Two examples of syntax differences:</p>
<ul class="simple">
<li><p>There is no notation defined that's equivalent to <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">intros</span></span></span> <span><span><span class="pre">until</span></span></span> <span class="alternative"><span class="alternative-block"><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span><span class="alternative-separator"><span class="pre">​</span></span><span class="alternative-block"><a class="reference internal" href="../language/core/basic.html#grammar-token-natural"><span class="hole"><span class="pre">natural</span></span></a></span></span></span></code>.  There is,
however, already an <code class="docutils literal notranslate"><span class="pre">intros_until</span></code> tactic function defined <code class="docutils literal notranslate"><span class="pre">Std.v</span></code>, so it may be possible for a user
to add the necessary notation.</p></li>
<li><p>The built-in <code class="docutils literal notranslate"><span class="pre">simpl</span></code> tactic in Ltac1 supports the use of scope keys in delta flags, e.g. <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">simpl</span></span></span> <span><span><span class="pre">[&quot;+&quot;%nat]</span></span></span></span></code>
which is not accepted by Ltac2.  This is because Ltac2 uses a different
definition for <a class="reference internal" href="../proofs/writing-proofs/equality.html#grammar-token-delta_reductions"><code class="xref std std-token docutils literal notranslate"><span class="pre">delta_reductions</span></code></a>; compare it to <a class="reference internal" href="#grammar-token-ltac2_delta_reductions"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_delta_reductions</span></code></a>.  This also affects
<a class="reference internal" href="../proofs/writing-proofs/equality.html#coq:tacn.compute" title="compute"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">compute</span></code></a>.</p></li>
</ul>
<p>Ltac1 tactics are not automatically available in Ltac2.  (Note that some of the tactics described
in the documentation are defined with Ltac1.)
You can make them accessible in Ltac2 with commands similar to the following:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span></span><span class="coqdoc-keyword">From</span><span> </span><span class="coqdoc-var">Coq</span><span> </span><span class="coqdoc-keyword">Require</span><span> </span><span class="coqdoc-keyword">Import</span><span> </span><span class="coqdoc-var">Lia</span><span>.</span><span>
</span></dt><dd class="coqtop-hidden"><span>[Loading ML file ring_plugin.cmxs (using legacy method) ... done]
[Loading ML file zify_plugin.cmxs (using legacy method) ... done]
[Loading ML file micromega_plugin.cmxs (using legacy method) ... done]
</span></dd>
<dt><span></span><span class="coqdoc-keyword">Local Ltac</span><span>2 </span><span class="coqdoc-var">lia_ltac1</span><span> () := </span><span class="coqdoc-var">ltac1</span><span>:(</span><span class="coqdoc-var">lia</span><span>).</span><span>
</span></dt><dt><span></span><span class="coqdoc-keyword">Ltac</span><span>2 </span><span class="coqdoc-keyword">Notation</span><span> &quot;lia&quot; := </span><span class="coqdoc-var">lia_ltac1</span><span> ().</span><span>
</span></dt></dl>
</div>
<p>A similar approach can be used to access missing built-in tactics.  See <a class="reference internal" href="#simple-api"><span class="std std-ref">Simple API</span></a> for an
example that passes two parameters to a missing build-in tactic.</p>
</section>
<section id="syntactic-classes">
<span id="id6"></span><h3>Syntactic classes<a class="headerlink" href="#syntactic-classes" title="Permalink to this headline">¶</a></h3>
<p>The simplest syntactic classes in Ltac2 notations represent individual nonterminals
from the Coq grammar.  Only a few selected nonterminals are available as syntactic classes.
In addition, there are metasyntactic operations for describing
more complex syntax, such as making an item optional or representing a list of items.
When parsing, each syntactic class expression returns a value that's bound to a name in the
notation definition.</p>
<p>Syntactic classes are described with a form of S-expression:</p>
<blockquote>
<div><span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_scope"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_scope"><span class="hole">ltac2_scope</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-string"><span class="hole">string</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-integer"><span class="hole">integer</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/assumptions.html#grammar-token-name"><span class="hole">name</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/assumptions.html#grammar-token-name"><span class="hole">name</span></a> <span><span>(</span></span> <span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_scope"><span class="hole">ltac2_scope</span></a></span><span class="notation-sup">+</span><span class="notation-sub">,</span></span> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span></div></blockquote>
<p>Metasyntactic operations that can be applied to other syntactic classes are:</p>
<blockquote>
<div><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">opt(</span></span></span><a class="reference internal" href="#grammar-token-ltac2_scope"><span class="hole"><span class="pre">ltac2_scope</span></span></a><span><span><span class="pre">)</span></span></span></span></code></dt><dd><p>Parses an optional <a class="reference internal" href="#grammar-token-ltac2_scope"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_scope</span></code></a>.  The associated value is either <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">None</span></span></span></span></code> or
enclosed in <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Some</span></span></span></span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">list1(</span></span></span><a class="reference internal" href="#grammar-token-ltac2_scope"><span class="hole"><span class="pre">ltac2_scope</span></span></a> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">,</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-string"><span class="hole"><span class="pre">string</span></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span><span><span><span class="pre">)</span></span></span></span></code></dt><dd><p>Parses a list of one or more <a class="reference internal" href="#grammar-token-ltac2_scope"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_scope</span></code></a>s.  If <a class="reference internal" href="../language/core/basic.html#grammar-token-string"><code class="xref std std-token docutils literal notranslate"><span class="pre">string</span></code></a> is specified,
items must be separated by <a class="reference internal" href="../language/core/basic.html#grammar-token-string"><code class="xref std std-token docutils literal notranslate"><span class="pre">string</span></code></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">list0(</span></span></span><a class="reference internal" href="#grammar-token-ltac2_scope"><span class="hole"><span class="pre">ltac2_scope</span></span></a> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">,</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-string"><span class="hole"><span class="pre">string</span></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span><span><span><span class="pre">)</span></span></span></span></code></dt><dd><p>Parses a list of zero or more <a class="reference internal" href="#grammar-token-ltac2_scope"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_scope</span></code></a>s.  If <a class="reference internal" href="../language/core/basic.html#grammar-token-string"><code class="xref std std-token docutils literal notranslate"><span class="pre">string</span></code></a> is specified,
items must be separated by <a class="reference internal" href="../language/core/basic.html#grammar-token-string"><code class="xref std std-token docutils literal notranslate"><span class="pre">string</span></code></a>.  For zero items, the associated value
is an empty list.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">seq(</span></span></span><span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_scope"><span class="hole"><span class="pre">ltac2_scope</span></span></a></span><span class="notation-sup"><span class="pre">+</span></span><span class="notation-sub"><span class="pre">,</span></span></span><span><span><span class="pre">)</span></span></span></span></code></dt><dd><p>Parses the <a class="reference internal" href="#grammar-token-ltac2_scope"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_scope</span></code></a>s in order.  The associated value is a tuple,
omitting <a class="reference internal" href="#grammar-token-ltac2_scope"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_scope</span></code></a>s that are <a class="reference internal" href="../language/core/basic.html#grammar-token-string"><code class="xref std std-token docutils literal notranslate"><span class="pre">string</span></code></a>s.
<code class="docutils literal notranslate"><span class="pre">self</span></code> and <code class="docutils literal notranslate"><span class="pre">next</span></code> are not permitted within <code class="docutils literal notranslate"><span class="pre">seq</span></code>.</p>
</dd>
</dl>
</div></blockquote>
<p>The following classes represent nonterminals with some special handling.  The
table further down lists the classes that that are handled plainly.</p>
<blockquote>
<div><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">constr</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">(</span></span></span> <span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="../user-extensions/syntax-extensions.html#grammar-token-scope_key"><span class="hole"><span class="pre">scope_key</span></span></a></span><span class="notation-sup"><span class="pre">+</span></span><span class="notation-sub"><span class="pre">,</span></span></span> <span><span><span class="pre">)</span></span></span></span><span class="notation-sup"><span class="pre">?</span></span></span></span></code></dt><dd><p>Parses a <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><code class="xref std std-token docutils literal notranslate"><span class="pre">term</span></code></a>.  If specified, the <a class="reference internal" href="../user-extensions/syntax-extensions.html#grammar-token-scope_key"><code class="xref std std-token docutils literal notranslate"><span class="pre">scope_key</span></code></a>s are used to interpret
the term (as described in  <a class="reference internal" href="../user-extensions/syntax-extensions.html#localinterpretationrulesfornotations"><span class="std std-ref">Local interpretation rules for notations</span></a>).  The last
<a class="reference internal" href="../user-extensions/syntax-extensions.html#grammar-token-scope_key"><code class="xref std std-token docutils literal notranslate"><span class="pre">scope_key</span></code></a> is the top of the scope stack that's applied to the <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><code class="xref std std-token docutils literal notranslate"><span class="pre">term</span></code></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">open</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">constr</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">(</span></span></span> <span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="../user-extensions/syntax-extensions.html#grammar-token-scope_key"><span class="hole"><span class="pre">scope_key</span></span></a></span><span class="notation-sup"><span class="pre">+</span></span><span class="notation-sub"><span class="pre">,</span></span></span> <span><span><span class="pre">)</span></span></span></span><span class="notation-sup"><span class="pre">?</span></span></span></span></code></dt><dd><p>Parses an open <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><code class="xref std std-token docutils literal notranslate"><span class="pre">term</span></code></a>. Like <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">constr</span></span></span></span></code> above, this class
accepts a list of notation scopes with the same effects.</p>
</dd>
</dl>
</div></blockquote>
<blockquote id="preterm">
<div><dl>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">preterm</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">(</span></span></span> <span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="../user-extensions/syntax-extensions.html#grammar-token-scope_key"><span class="hole"><span class="pre">scope_key</span></span></a></span><span class="notation-sup"><span class="pre">+</span></span><span class="notation-sub"><span class="pre">,</span></span></span> <span><span><span class="pre">)</span></span></span></span><span class="notation-sup"><span class="pre">?</span></span></span></span></code></dt><dd><p>Parses a non-typechecked <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><code class="xref std std-token docutils literal notranslate"><span class="pre">term</span></code></a>. Like <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">constr</span></span></span></span></code> above, this class
accepts a list of notation scopes with the same effects.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">ident</span></span></span></span></code></dt><dd><p>Parses <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><code class="xref std std-token docutils literal notranslate"><span class="pre">ident</span></code></a> or <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">$</span></span></span><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></code>.  The first form returns <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">ident:(</span></span></span><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a><span><span><span class="pre">)</span></span></span></span></code>,
while the latter form returns the variable <code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-string"><span class="hole"><span class="pre">string</span></span></a></span></code></dt><dd><p>Accepts the specified string that is not a keyword, returning a value of <code class="docutils literal notranslate"><span class="pre">()</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">keyword(</span></span></span><a class="reference internal" href="../language/core/basic.html#grammar-token-string"><span class="hole"><span class="pre">string</span></span></a><span><span><span class="pre">)</span></span></span></span></code></dt><dd><p>Accepts the specified string that is a keyword, returning a value of <code class="docutils literal notranslate"><span class="pre">()</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">terminal(</span></span></span><a class="reference internal" href="../language/core/basic.html#grammar-token-string"><span class="hole"><span class="pre">string</span></span></a><span><span><span class="pre">)</span></span></span></span></code></dt><dd><p>Accepts the specified string whether it's a keyword or not, returning a value of <code class="docutils literal notranslate"><span class="pre">()</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">tactic</span></span></span> <span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">(</span></span></span><a class="reference internal" href="../language/core/basic.html#grammar-token-integer"><span class="hole"><span class="pre">integer</span></span></a><span><span><span class="pre">)</span></span></span></span><span class="notation-sup"><span class="pre">?</span></span></span></span></code></dt><dd><p>Parses an <a class="reference internal" href="#grammar-token-ltac2_expr"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_expr</span></code></a>.  If <a class="reference internal" href="../language/core/basic.html#grammar-token-integer"><code class="xref std std-token docutils literal notranslate"><span class="pre">integer</span></code></a> is specified, the construct
parses a <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">ltac2</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">expr</span></span></span><a class="reference internal" href="../language/core/basic.html#grammar-token-integer"><span class="hole"><span class="pre">integer</span></span></a></span></code>, for example <code class="docutils literal notranslate"><span class="pre">tactic(5)</span></code> parses <a class="reference internal" href="#grammar-token-ltac2_expr5"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_expr5</span></code></a>.
<code class="docutils literal notranslate"><span class="pre">tactic(6)</span></code> parses <a class="reference internal" href="#grammar-token-ltac2_expr"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_expr</span></code></a>.
<a class="reference internal" href="../language/core/basic.html#grammar-token-integer"><code class="xref std std-token docutils literal notranslate"><span class="pre">integer</span></code></a> must be in the range <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">..</span> <span class="pre">6</span></code>.</p>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">tactic</span></code> to accept an <a class="reference internal" href="../language/core/basic.html#grammar-token-integer"><code class="xref std std-token docutils literal notranslate"><span class="pre">integer</span></code></a> or a <a class="reference internal" href="../language/core/basic.html#grammar-token-string"><code class="xref std std-token docutils literal notranslate"><span class="pre">string</span></code></a>, but there's
no syntactic class that accepts <em>only</em> an <a class="reference internal" href="../language/core/basic.html#grammar-token-integer"><code class="xref std std-token docutils literal notranslate"><span class="pre">integer</span></code></a> or a <a class="reference internal" href="../language/core/basic.html#grammar-token-string"><code class="xref std std-token docutils literal notranslate"><span class="pre">string</span></code></a>.</p>
</dd>
</dl>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">self</span></span></span></span></code></dt><dd><p>parses an Ltac2 expression at the current level and returns it as is.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">next</span></span></span></span></code></dt><dd><p>parses an Ltac2 expression at the next level and returns it as is.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">thunk(</span></span></span><a class="reference internal" href="#grammar-token-ltac2_scope"><span class="hole"><span class="pre">ltac2_scope</span></span></a><span><span><span class="pre">)</span></span></span></span></code></dt><dd><p>Used for semantic effect only, parses the same as <a class="reference internal" href="#grammar-token-ltac2_scope"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_scope</span></code></a>.
If <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">e</span></span></span></span></code> is the parsed expression for <a class="reference internal" href="#grammar-token-ltac2_scope"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_scope</span></code></a>, <code class="docutils literal notranslate"><span class="pre">thunk</span></code>
returns <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">fun</span></span></span> <span><span><span class="pre">()</span></span></span> <span><span><span class="pre">=&gt;</span></span></span> <span><span><span class="pre">e</span></span></span></span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">pattern</span></span></span></span></code></dt><dd><p>parses a <a class="reference internal" href="ltac.html#grammar-token-cpattern"><code class="xref std std-token docutils literal notranslate"><span class="pre">cpattern</span></code></a></p>
</dd>
</dl>
</div></blockquote>
<p>A few syntactic classes contain antiquotation features. For the sake of uniformity, all
antiquotations are introduced by the syntax <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">$</span></span></span><a class="reference internal" href="#grammar-token-lident"><span class="hole"><span class="pre">lident</span></span></a></span></code>.</p>
<p>A few other specific syntactic classes exist to handle Ltac1-like syntax, but their use is
discouraged and they are thus not documented.</p>
<p>For now there is no way to declare new syntactic classes from the Ltac2 side, but this is
planned.</p>
<p>Other nonterminals that have syntactic classes are listed here.</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Syntactic class name</p></th>
<th class="head"><p>Nonterminal</p></th>
<th class="head"><p>Similar non-Ltac2 syntax</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">intropatterns</span></span></span></span></code></p></td>
<td><p><a class="reference internal" href="#grammar-token-ltac2_intropatterns"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_intropatterns</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="tactics.html#grammar-token-intropattern"><span class="hole"><span class="pre">intropattern</span></span></a></span><span class="notation-sup"><span class="pre">*</span></span></span></span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">intropattern</span></span></span></span></code></p></td>
<td><p><a class="reference internal" href="#grammar-token-ltac2_simple_intropattern"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_simple_intropattern</span></code></a></p></td>
<td><p><a class="reference internal" href="tactics.html#grammar-token-simple_intropattern"><code class="xref std std-token docutils literal notranslate"><span class="pre">simple_intropattern</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">ident</span></span></span></span></code></p></td>
<td><p><a class="reference internal" href="#grammar-token-ident_or_anti"><code class="xref std std-token docutils literal notranslate"><span class="pre">ident_or_anti</span></code></a></p></td>
<td><p><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><code class="xref std std-token docutils literal notranslate"><span class="pre">ident</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">destruction</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">arg</span></span></span></span></code></p></td>
<td><p><a class="reference internal" href="#grammar-token-ltac2_destruction_arg"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_destruction_arg</span></code></a></p></td>
<td><p><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#grammar-token-induction_arg"><code class="xref std std-token docutils literal notranslate"><span class="pre">induction_arg</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">with</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">bindings</span></span></span></span></code></p></td>
<td><p><a class="reference internal" href="#grammar-token-q_with_bindings"><code class="xref std std-token docutils literal notranslate"><span class="pre">q_with_bindings</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">with</span></span></span> <a class="reference internal" href="tactics.html#grammar-token-bindings"><span class="hole"><span class="pre">bindings</span></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span></span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">bindings</span></span></span></span></code></p></td>
<td><p><a class="reference internal" href="#grammar-token-ltac2_bindings"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_bindings</span></code></a></p></td>
<td><p><a class="reference internal" href="tactics.html#grammar-token-bindings"><code class="xref std std-token docutils literal notranslate"><span class="pre">bindings</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">reductions</span></span></span></span></code></p></td>
<td><p><a class="reference internal" href="#grammar-token-ltac2_reductions"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_reductions</span></code></a></p></td>
<td><p><a class="reference internal" href="../proofs/writing-proofs/equality.html#grammar-token-reductions"><code class="xref std std-token docutils literal notranslate"><span class="pre">reductions</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">reference</span></span></span></span></code></p></td>
<td><p><a class="reference internal" href="#grammar-token-refglobal"><code class="xref std std-token docutils literal notranslate"><span class="pre">refglobal</span></code></a></p></td>
<td><p><a class="reference internal" href="vernacular-commands.html#grammar-token-reference"><code class="xref std std-token docutils literal notranslate"><span class="pre">reference</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">clause</span></span></span></span></code></p></td>
<td><p><a class="reference internal" href="#grammar-token-ltac2_clause"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_clause</span></code></a></p></td>
<td><p><a class="reference internal" href="tactics.html#grammar-token-occurrences"><code class="xref std std-token docutils literal notranslate"><span class="pre">occurrences</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">occurrences</span></span></span></span></code></p></td>
<td><p><a class="reference internal" href="#grammar-token-q_occurrences"><code class="xref std std-token docutils literal notranslate"><span class="pre">q_occurrences</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><span><span><span class="pre">at</span></span></span> <a class="reference internal" href="tactics.html#grammar-token-occs_nums"><span class="hole"><span class="pre">occs_nums</span></span></a></span><span class="notation-sup"><span class="pre">?</span></span></span></span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">induction</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">clause</span></span></span></span></code></p></td>
<td><p><a class="reference internal" href="#grammar-token-ltac2_induction_clause"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_induction_clause</span></code></a></p></td>
<td><p><a class="reference internal" href="../proofs/writing-proofs/reasoning-inductives.html#grammar-token-induction_clause"><code class="xref std std-token docutils literal notranslate"><span class="pre">induction_clause</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">conversion</span></span></span></span></code></p></td>
<td><p><a class="reference internal" href="#grammar-token-ltac2_conversion"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_conversion</span></code></a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">rewriting</span></span></span></span></code></p></td>
<td><p><a class="reference internal" href="#grammar-token-ltac2_oriented_rewriter"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_oriented_rewriter</span></code></a></p></td>
<td><p><a class="reference internal" href="../proofs/writing-proofs/equality.html#grammar-token-oriented_rewriter"><code class="xref std std-token docutils literal notranslate"><span class="pre">oriented_rewriter</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">dispatch</span></span></span></span></code></p></td>
<td><p><a class="reference internal" href="#grammar-token-ltac2_for_each_goal"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_for_each_goal</span></code></a></p></td>
<td><p><a class="reference internal" href="ltac.html#grammar-token-for_each_goal"><code class="xref std std-token docutils literal notranslate"><span class="pre">for_each_goal</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">hintdb</span></span></span></span></code></p></td>
<td><p><a class="reference internal" href="#grammar-token-hintdb"><code class="xref std std-token docutils literal notranslate"><span class="pre">hintdb</span></code></a></p></td>
<td><p><a class="reference internal" href="../proofs/automatic-tactics/auto.html#grammar-token-hintbases"><code class="xref std std-token docutils literal notranslate"><span class="pre">hintbases</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">move</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">location</span></span></span></span></code></p></td>
<td><p><a class="reference internal" href="#grammar-token-move_location"><code class="xref std std-token docutils literal notranslate"><span class="pre">move_location</span></code></a></p></td>
<td><p><a class="reference internal" href="tactics.html#grammar-token-where"><code class="xref std std-token docutils literal notranslate"><span class="pre">where</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">pose</span></span></span></span></code></p></td>
<td><p><a class="reference internal" href="#grammar-token-pose"><code class="xref std std-token docutils literal notranslate"><span class="pre">pose</span></code></a></p></td>
<td><p><a class="reference internal" href="tactics.html#grammar-token-alias_definition"><code class="xref std std-token docutils literal notranslate"><span class="pre">alias_definition</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">assert</span></span></span></span></code></p></td>
<td><p><a class="reference internal" href="#grammar-token-assertion"><code class="xref std std-token docutils literal notranslate"><span class="pre">assertion</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">(</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a> <span><span><span class="pre">:=</span></span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole"><span class="pre">term</span></span></a> <span><span><span class="pre">)</span></span></span></span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">constr</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">matching</span></span></span></span></code></p></td>
<td><p><a class="reference internal" href="#grammar-token-ltac2_match_list"><code class="xref std std-token docutils literal notranslate"><span class="pre">ltac2_match_list</span></code></a></p></td>
<td><p>See <a class="reference internal" href="ltac.html#coq:tacn.match" title="match"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">match</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">goal</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">matching</span></span></span></span></code></p></td>
<td><p><a class="reference internal" href="#grammar-token-goal_match_list"><code class="xref std std-token docutils literal notranslate"><span class="pre">goal_match_list</span></code></a></p></td>
<td><p>See <a class="reference internal" href="ltac.html#coq:tacn.match-goal" title="match goal"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">match</span> <span class="pre">goal</span></code></a></p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Here is the syntax for the <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">q</span></span></span><span><span><span class="pre">_</span></span></span><span><span><span class="pre">*</span></span></span></span></code> nonterminals:</p>
<span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_intropatterns"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_intropatterns"><span class="hole">ltac2_intropatterns</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-nonsimple_intropattern"><span class="hole">nonsimple_intropattern</span></a></span><span class="notation-sup">*</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-nonsimple_intropattern"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-nonsimple_intropattern"><span class="hole">nonsimple_intropattern</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>*</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>**</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_simple_intropattern"><span class="hole">ltac2_simple_intropattern</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_simple_intropattern"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_simple_intropattern"><span class="hole">ltac2_simple_intropattern</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_naming_intropattern"><span class="hole">ltac2_naming_intropattern</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>_</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_or_and_intropattern"><span class="hole">ltac2_or_and_intropattern</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_equality_intropattern"><span class="hole">ltac2_equality_intropattern</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_naming_intropattern"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_naming_intropattern"><span class="hole">ltac2_naming_intropattern</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>?</span></span><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>?$</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>?</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ident_or_anti"><span class="hole">ident_or_anti</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_or_and_intropattern"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_or_and_intropattern"><span class="hole">ltac2_or_and_intropattern</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>[</span></span> <span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_intropatterns"><span class="hole">ltac2_intropatterns</span></a></span><span class="notation-sup">+</span><span class="notation-sub">|</span></span> <span><span>]</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>()</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>(</span></span> <span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_simple_intropattern"><span class="hole">ltac2_simple_intropattern</span></a></span><span class="notation-sup">+</span><span class="notation-sub">,</span></span> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>(</span></span> <span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_simple_intropattern"><span class="hole">ltac2_simple_intropattern</span></a></span><span class="notation-sup">+</span><span class="notation-sub">&amp;</span></span> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_equality_intropattern"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_equality_intropattern"><span class="hole">ltac2_equality_intropattern</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>-&gt;</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>&lt;-</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>[=</span></span> <a class="reference internal" href="#grammar-token-ltac2_intropatterns"><span class="hole">ltac2_intropatterns</span></a> <span><span>]</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ident_or_anti"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ident_or_anti"><span class="hole">ident_or_anti</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>$</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_destruction_arg"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_destruction_arg"><span class="hole">ltac2_destruction_arg</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-natural"><span class="hole">natural</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_constr_with_bindings"><span class="hole">ltac2_constr_with_bindings</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_constr_with_bindings"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_constr_with_bindings"><span class="hole">ltac2_constr_with_bindings</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole">term</span></a> <span class="repeat-wrapper"><span class="repeat"><span><span>with</span></span> <a class="reference internal" href="#grammar-token-ltac2_bindings"><span class="hole">ltac2_bindings</span></a></span><span class="notation-sup">?</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-q_with_bindings"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-q_with_bindings"><span class="hole">q_with_bindings</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><span><span>with</span></span> <a class="reference internal" href="#grammar-token-ltac2_bindings"><span class="hole">ltac2_bindings</span></a></span><span class="notation-sup">?</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_bindings"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_bindings"><span class="hole">ltac2_bindings</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_simple_binding"><span class="hole">ltac2_simple_binding</span></a></span><span class="notation-sup">+</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole">term</span></a></span><span class="notation-sup">+</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_simple_binding"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_simple_binding"><span class="hole">ltac2_simple_binding</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>(</span></span> <a class="reference internal" href="#grammar-token-qhyp"><span class="hole">qhyp</span></a> <span><span>:=</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole">term</span></a> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-qhyp"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-qhyp"><span class="hole">qhyp</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>$</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-natural"><span class="hole">natural</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_reductions"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_reductions"><span class="hole">ltac2_reductions</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_red_flag"><span class="hole">ltac2_red_flag</span></a></span><span class="notation-sup">+</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_delta_reductions"><span class="hole">ltac2_delta_reductions</span></a></span><span class="notation-sup">?</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_red_flag"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_red_flag"><span class="hole">ltac2_red_flag</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>beta</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>iota</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>match</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>fix</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>cofix</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>zeta</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>delta</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_delta_reductions"><span class="hole">ltac2_delta_reductions</span></a></span><span class="notation-sup">?</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_delta_reductions"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_delta_reductions"><span class="hole">ltac2_delta_reductions</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><span><span>-</span></span></span><span class="notation-sup">?</span></span> <span><span>[</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-refglobal"><span class="hole">refglobal</span></a></span><span class="notation-sup">+</span></span> <span><span>]</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-refglobal"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-refglobal"><span class="hole">refglobal</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>&amp;</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/modules.html#grammar-token-qualid"><span class="hole">qualid</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>$</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_clause"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_clause"><span class="hole">ltac2_clause</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>in</span></span> <a class="reference internal" href="#grammar-token-ltac2_in_clause"><span class="hole">ltac2_in_clause</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>at</span></span> <a class="reference internal" href="#grammar-token-ltac2_occs_nums"><span class="hole">ltac2_occs_nums</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_in_clause"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_in_clause"><span class="hole">ltac2_in_clause</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>*</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_occs"><span class="hole">ltac2_occs</span></a></span><span class="notation-sup">?</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>*</span></span> <span><span>|-</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_concl_occ"><span class="hole">ltac2_concl_occ</span></a></span><span class="notation-sup">?</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper-with-sub"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_hypident_occ"><span class="hole">ltac2_hypident_occ</span></a></span><span class="notation-sup">*</span><span class="notation-sub">,</span></span> <span class="repeat-wrapper"><span class="repeat"><span><span>|-</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_concl_occ"><span class="hole">ltac2_concl_occ</span></a></span><span class="notation-sup">?</span></span></span><span class="notation-sup">?</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-q_occurrences"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-q_occurrences"><span class="hole">q_occurrences</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_occs"><span class="hole">ltac2_occs</span></a></span><span class="notation-sup">?</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_occs"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_occs"><span class="hole">ltac2_occs</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>at</span></span> <a class="reference internal" href="#grammar-token-ltac2_occs_nums"><span class="hole">ltac2_occs_nums</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_occs_nums"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_occs_nums"><span class="hole">ltac2_occs_nums</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><span><span>-</span></span></span><span class="notation-sup">?</span></span> <span class="repeat-wrapper"><span class="repeat"><span class="repeated-alternative"><span class="alternative-block"><a class="reference internal" href="../language/core/basic.html#grammar-token-natural"><span class="hole">natural</span></a></span><span class="alternative-separator">​</span><span class="alternative-block"><span><span>$</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span></span></span><span class="notation-sup">+</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_concl_occ"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_concl_occ"><span class="hole">ltac2_concl_occ</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>*</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_occs"><span class="hole">ltac2_occs</span></a></span><span class="notation-sup">?</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_hypident_occ"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_hypident_occ"><span class="hole">ltac2_hypident_occ</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_hypident"><span class="hole">ltac2_hypident</span></a> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_occs"><span class="hole">ltac2_occs</span></a></span><span class="notation-sup">?</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_hypident"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_hypident"><span class="hole">ltac2_hypident</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ident_or_anti"><span class="hole">ident_or_anti</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>(</span></span> <span><span>type</span></span> <span><span>of</span></span> <a class="reference internal" href="#grammar-token-ident_or_anti"><span class="hole">ident_or_anti</span></a> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>(</span></span> <span><span>value</span></span> <span><span>of</span></span> <a class="reference internal" href="#grammar-token-ident_or_anti"><span class="hole">ident_or_anti</span></a> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_induction_clause"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_induction_clause"><span class="hole">ltac2_induction_clause</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_destruction_arg"><span class="hole">ltac2_destruction_arg</span></a> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_as_or_and_ipat"><span class="hole">ltac2_as_or_and_ipat</span></a></span><span class="notation-sup">?</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_eqn_ipat"><span class="hole">ltac2_eqn_ipat</span></a></span><span class="notation-sup">?</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_clause"><span class="hole">ltac2_clause</span></a></span><span class="notation-sup">?</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_as_or_and_ipat"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_as_or_and_ipat"><span class="hole">ltac2_as_or_and_ipat</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>as</span></span> <a class="reference internal" href="#grammar-token-ltac2_or_and_intropattern"><span class="hole">ltac2_or_and_intropattern</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_eqn_ipat"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_eqn_ipat"><span class="hole">ltac2_eqn_ipat</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>eqn</span></span> <span><span>:</span></span> <a class="reference internal" href="#grammar-token-ltac2_naming_intropattern"><span class="hole">ltac2_naming_intropattern</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_conversion"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_conversion"><span class="hole">ltac2_conversion</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole">term</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole">term</span></a> <span><span>with</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole">term</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_oriented_rewriter"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_oriented_rewriter"><span class="hole">ltac2_oriented_rewriter</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><span class="repeated-alternative"><span class="alternative-block"><span><span>-&gt;</span></span></span><span class="alternative-separator">​</span><span class="alternative-block"><span><span>&lt;-</span></span></span></span></span><span class="notation-sup">?</span></span> <a class="reference internal" href="#grammar-token-ltac2_rewriter"><span class="hole">ltac2_rewriter</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_rewriter"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_rewriter"><span class="hole">ltac2_rewriter</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/core/basic.html#grammar-token-natural"><span class="hole">natural</span></a></span><span class="notation-sup">?</span></span> <span class="repeat-wrapper"><span class="repeat"><span class="repeated-alternative"><span class="alternative-block"><span><span>?</span></span></span><span class="alternative-separator">​</span><span class="alternative-block"><span><span>!</span></span></span></span></span><span class="notation-sup">?</span></span> <a class="reference internal" href="#grammar-token-ltac2_constr_with_bindings"><span class="hole">ltac2_constr_with_bindings</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_for_each_goal"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_for_each_goal"><span class="hole">ltac2_for_each_goal</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_goal_tactics"><span class="hole">ltac2_goal_tactics</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_goal_tactics"><span class="hole">ltac2_goal_tactics</span></a> <span><span>|</span></span></span><span class="notation-sup">?</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole">ltac2_expr</span></a></span><span class="notation-sup">?</span></span> <span><span>..</span></span> <span class="repeat-wrapper"><span class="repeat"><span><span>|</span></span> <a class="reference internal" href="#grammar-token-ltac2_goal_tactics"><span class="hole">ltac2_goal_tactics</span></a></span><span class="notation-sup">?</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_goal_tactics"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_goal_tactics"><span class="hole">ltac2_goal_tactics</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper-with-sub"><span class="repeat"><span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole">ltac2_expr</span></a></span><span class="notation-sup">?</span></span></span><span class="notation-sup">*</span><span class="notation-sub">|</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-hintdb"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-hintdb"><span class="hole">hintdb</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>*</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ident_or_anti"><span class="hole">ident_or_anti</span></a></span><span class="notation-sup">+</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-move_location"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-move_location"><span class="hole">move_location</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>at</span></span> <span><span>top</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>at</span></span> <span><span>bottom</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>after</span></span> <a class="reference internal" href="#grammar-token-ident_or_anti"><span class="hole">ident_or_anti</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>before</span></span> <a class="reference internal" href="#grammar-token-ident_or_anti"><span class="hole">ident_or_anti</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-pose"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-pose"><span class="hole">pose</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>(</span></span> <a class="reference internal" href="#grammar-token-ident_or_anti"><span class="hole">ident_or_anti</span></a> <span><span>:=</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole">term</span></a> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole">term</span></a> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_as_name"><span class="hole">ltac2_as_name</span></a></span><span class="notation-sup">?</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_as_name"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_as_name"><span class="hole">ltac2_as_name</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>as</span></span> <a class="reference internal" href="#grammar-token-ident_or_anti"><span class="hole">ident_or_anti</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-assertion"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-assertion"><span class="hole">assertion</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>(</span></span> <a class="reference internal" href="#grammar-token-ident_or_anti"><span class="hole">ident_or_anti</span></a> <span><span>:=</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole">term</span></a> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>(</span></span> <a class="reference internal" href="#grammar-token-ident_or_anti"><span class="hole">ident_or_anti</span></a> <span><span>:</span></span> <a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole">term</span></a> <span><span>)</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_by_tactic"><span class="hole">ltac2_by_tactic</span></a></span><span class="notation-sup">?</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><a class="reference internal" href="../language/core/basic.html#grammar-token-term"><span class="hole">term</span></a> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_as_ipat"><span class="hole">ltac2_as_ipat</span></a></span><span class="notation-sup">?</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="#grammar-token-ltac2_by_tactic"><span class="hole">ltac2_by_tactic</span></a></span><span class="notation-sup">?</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_as_ipat"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_as_ipat"><span class="hole">ltac2_as_ipat</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>as</span></span> <a class="reference internal" href="#grammar-token-ltac2_simple_intropattern"><span class="hole">ltac2_simple_intropattern</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac2_by_tactic"></span></span><span class="notation"><a class="reference internal" href="#grammar-token-ltac2_by_tactic"><span class="hole">ltac2_by_tactic</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">::=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>by</span></span> <a class="reference internal" href="#grammar-token-ltac2_expr5"><span class="hole">ltac2_expr5</span></a></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span></section>
</section>
<section id="evaluation">
<h2>Evaluation<a class="headerlink" href="#evaluation" title="Permalink to this headline">¶</a></h2>
<p>Ltac2 features a toplevel loop that can be used to evaluate expressions.</p>
<dl class="coq cmd">
<dt class="sig sig-object coq" id="coq:cmd.Ltac2-Eval">
<em class="property"><span class="sigannot"><span class="pre">Command</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">Eval</span></span></span> <a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole"><span class="pre">ltac2_expr</span></span></a></span></span><a class="headerlink" href="#coq:cmd.Ltac2-Eval" title="Permalink to this definition">¶</a></dt>
<dd><p>This command evaluates the term in the current proof if there is one, or in the
global environment otherwise, and displays the resulting value to the user
together with its type. This command is pure in the sense that it does not
modify the state of the proof, and in particular all side-effects are discarded.</p>
</dd></dl>

</section>
<section id="debug">
<h2>Debug<a class="headerlink" href="#debug" title="Permalink to this headline">¶</a></h2>
<dl class="coq flag">
<dt class="sig sig-object coq" id="coq:flag.Ltac2-Backtrace">
<em class="property"><span class="sigannot"><span class="pre">Flag</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">Backtrace</span></span></span></span></span><a class="headerlink" href="#coq:flag.Ltac2-Backtrace" title="Permalink to this definition">¶</a></dt>
<dd><p>When this <a class="reference internal" href="../language/core/basic.html#term-flag"><span class="xref std std-term">flag</span></a> is set, toplevel failures will be printed with a backtrace.</p>
</dd></dl>

</section>
<section id="compatibility-layer-with-ltac1">
<h2>Compatibility layer with Ltac1<a class="headerlink" href="#compatibility-layer-with-ltac1" title="Permalink to this headline">¶</a></h2>
<section id="ltac1-from-ltac2">
<span id="ltac2in1"></span><h3>Ltac1 from Ltac2<a class="headerlink" href="#ltac1-from-ltac2" title="Permalink to this headline">¶</a></h3>
<section id="simple-api">
<span id="id7"></span><h4>Simple API<a class="headerlink" href="#simple-api" title="Permalink to this headline">¶</a></h4>
<p>One can call Ltac1 code from Ltac2 by using the <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">ltac1:(</span></span></span><a class="reference internal" href="#grammar-token-ltac1_expr_in_env"><span class="hole"><span class="pre">ltac1_expr_in_env</span></span></a><span><span><span class="pre">)</span></span></span></span></code> quotation.
See <a class="reference internal" href="#ltac2-built-in-quotations"><span class="std std-ref">Built-in quotations</span></a>.  It parses
a Ltac1 expression, and semantics of this quotation is the evaluation of the
corresponding code for its side effects. In particular, it cannot return values,
and the quotation has type <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">unit</span></span></span></span></code>.</p>
<p>Ltac1 <strong>cannot</strong> implicitly access variables from the Ltac2 scope, but this can
be done with an explicit annotation on the <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">ltac1:(</span></span></span><span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole"><span class="pre">ident</span></span></a></span><span class="notation-sup"><span class="pre">*</span></span></span> <span class="pre">|</span><span><span><span class="pre">-</span></span></span> <a class="reference internal" href="ltac.html#grammar-token-ltac_expr"><span class="hole"><span class="pre">ltac_expr</span></span></a><span><span><span class="pre">)</span></span></span></span></code>
quotation.  See <a class="reference internal" href="#ltac2-built-in-quotations"><span class="std std-ref">Built-in quotations</span></a>.  For example:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="simple">
<dt><span></span><span class="coqdoc-keyword">Local Ltac</span><span>2 </span><span class="coqdoc-var">replace_with</span><span> (</span><span class="coqdoc-var">lhs</span><span>: </span><span class="coqdoc-keyword">constr</span><span>) (</span><span class="coqdoc-var">rhs</span><span>: </span><span class="coqdoc-keyword">constr</span><span>) :=</span><span>
  </span><span class="coqdoc-var">ltac1</span><span>:(</span><span class="coqdoc-var">lhs</span><span> </span><span class="coqdoc-var">rhs</span><span> |- </span><span class="coqdoc-tactic">replace</span><span> </span><span class="coqdoc-var">lhs</span><span> </span><span class="coqdoc-keyword">with</span><span> </span><span class="coqdoc-var">rhs</span><span>) (</span><span class="coqdoc-var">Ltac1.of_constr</span><span> </span><span class="coqdoc-var">lhs</span><span>) (</span><span class="coqdoc-var">Ltac1.of_constr</span><span> </span><span class="coqdoc-var">rhs</span><span>).</span><span>
</span></dt><dt><span></span><span class="coqdoc-keyword">Ltac</span><span>2 </span><span class="coqdoc-keyword">Notation</span><span> &quot;replace&quot; </span><span class="coqdoc-var">lhs</span><span>(</span><span class="coqdoc-keyword">constr</span><span>) &quot;with&quot; </span><span class="coqdoc-var">rhs</span><span>(</span><span class="coqdoc-keyword">constr</span><span>) := </span><span class="coqdoc-var">replace_with</span><span> </span><span class="coqdoc-var">lhs</span><span> </span><span class="coqdoc-var">rhs</span><span>.</span><span>
</span></dt></dl>
</div>
<p>The return type of this expression is a function of the same arity as the number
of identifiers, with arguments of type <code class="docutils literal notranslate"><span class="pre">Ltac2.Ltac1.t</span></code> (see below). This syntax
will bind the variables in the quoted Ltac1 code as if they had been bound from
Ltac1 itself. Similarly, the arguments applied to the quotation will be passed
at runtime to the Ltac1 code.</p>
</section>
<section id="low-level-api">
<span id="id8"></span><h4>Low-level API<a class="headerlink" href="#low-level-api" title="Permalink to this headline">¶</a></h4>
<p>There exists a lower-level FFI into Ltac1 that is not recommended for daily use,
which is available in the <code class="docutils literal notranslate"><span class="pre">Ltac2.Ltac1</span></code> module. This API allows to directly
manipulate dynamically-typed Ltac1 values, either through the function calls,
or using the <code class="docutils literal notranslate"><span class="pre">ltac1val</span></code> quotation. The latter parses the same as <code class="docutils literal notranslate"><span class="pre">ltac1</span></code>, but
has type <code class="docutils literal notranslate"><span class="pre">Ltac2.Ltac1.t</span></code> instead of <code class="docutils literal notranslate"><span class="pre">unit</span></code>, and dynamically behaves as an Ltac1
thunk, i.e. <code class="docutils literal notranslate"><span class="pre">ltac1val:(foo)</span></code> corresponds to the tactic closure that Ltac1
would generate from <code class="docutils literal notranslate"><span class="pre">idtac;</span> <span class="pre">foo</span></code>.</p>
<p>Due to intricate dynamic semantics, understanding when Ltac1 value quotations
focus is very hard. This is why some functions return a continuation-passing
style value, as it can dispatch dynamically between focused and unfocused
behavior.</p>
<p>The same mechanism for explicit binding of variables as described in the
previous section applies.</p>
</section>
</section>
<section id="ltac2-from-ltac1">
<h3>Ltac2 from Ltac1<a class="headerlink" href="#ltac2-from-ltac1" title="Permalink to this headline">¶</a></h3>
<p>Same as above by switching Ltac1 by Ltac2 and using the <code class="docutils literal notranslate"><span class="pre">ltac2</span></code> quotation
instead.</p>
<span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac_expr"></span></span><span class="notation"><a class="reference internal" href="ltac.html#grammar-token-ltac_expr"><span class="hole">ltac_expr</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">+=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>ltac2</span></span> <span><span>:</span></span> <span><span>(</span></span> <a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole">ltac2_expr</span></a> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>ltac2</span></span> <span><span>:</span></span> <span><span>(</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span><span class="notation-sup">+</span></span> |<span><span>-</span></span> <a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole">ltac2_expr</span></a> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><p>The typing rules are dual, that is, the optional identifiers are bound
with type <code class="docutils literal notranslate"><span class="pre">Ltac2.Ltac1.t</span></code> in the Ltac2 expression, which is expected to have
type unit. The value returned by this quotation is an Ltac1 function with the
same arity as the number of bound variables.</p>
<p>Note that when no variables are bound, the inner tactic expression is evaluated
eagerly, if one wants to use it as an argument to a Ltac1 function, one has to
resort to the good old <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">idtac;</span></span></span> <span><span><span class="pre">ltac2:(foo)</span></span></span></span></code> trick. For instance, the code
below will fail immediately and won't print anything.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="simple">
<dt><span></span><span class="coqdoc-keyword">From</span><span> </span><span class="coqdoc-var">Ltac2</span><span> </span><span class="coqdoc-keyword">Require</span><span> </span><span class="coqdoc-keyword">Import</span><span> </span><span class="coqdoc-var">Ltac2</span><span>.</span><span>
</span></dt><dt><span></span><span class="coqdoc-keyword">Set</span><span> </span><span class="coqdoc-var">Default</span><span> </span><span class="coqdoc-keyword">Proof</span><span> </span><span class="coqdoc-var">Mode</span><span> &quot;Classic&quot;.</span><span>
</span></dt></dl>
<span></span><dl>
<dt><span></span><span class="coqdoc-keyword">Ltac</span><span> </span><span class="coqdoc-var">mytac</span><span> </span><span class="coqdoc-var">tac</span><span> := </span><span class="coqdoc-tactic">idtac</span><span> &quot;I am being evaluated&quot;; </span><span class="coqdoc-var">tac</span><span>.</span><span>
</span></dt><dd><span>mytac is defined
</span></dd>
<dt><span></span><span>
</span><span class="coqdoc-keyword">Goal</span><span> </span><span class="coqdoc-var">True</span><span>.</span><span>
</span></dt><dd><span>1 goal
  
  ============================
  True
</span></dd>
<dt><span></span><span class="coqdoc-keyword">Proof</span><span>.</span><span>
</span></dt><dt><span></span><span class="coqdoc-comment">(* Doesn't print anything *)</span></dt><dt><span></span><span class="coqdoc-var">Fail</span><span> </span><span class="coqdoc-var">mytac</span><span> </span><span class="coqdoc-var">ltac2</span><span>:(</span><span class="coqdoc-tactic">fail</span><span>).</span><span>
</span></dt><dd><span>The command has indeed failed with message:
Uncaught Ltac2 exception: Tactic_failure (None)
</span></dd>
<dt><span></span><span class="coqdoc-comment">(* Prints and fails *)</span></dt><dt><span></span><span class="coqdoc-var">Fail</span><span> </span><span class="coqdoc-var">mytac</span><span> </span><span class="coqdoc-keyword">ltac</span><span>:(</span><span class="coqdoc-tactic">idtac</span><span>; </span><span class="coqdoc-var">ltac2</span><span>:(</span><span class="coqdoc-tactic">fail</span><span>)).</span><span>
</span></dt><dd><span>I am being evaluated
The command has indeed failed with message:
Uncaught Ltac2 exception: Tactic_failure (None)
</span></dd>
<dt><span></span><span class="coqdoc-keyword">Abort</span><span>.</span><span>
</span></dt></dl>
</div>
<p>In any case, the value returned by the fully applied quotation is an
unspecified dummy Ltac1 closure and should not be further used.</p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">ltac2val</span></code> quotation to return values to Ltac1 from Ltac2.</p>
<span class="prodn-table"><span class="prodn-column-group"><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span><span class="prodn-column"></span></span><span class="prodn-row-group"><span class="prodn-row"><span class="prodn-cell-nonterminal"><span class="prodn-target"><span class="target" id="grammar-token-ltac_expr"></span></span><span class="notation"><a class="reference internal" href="ltac.html#grammar-token-ltac_expr"><span class="hole">ltac_expr</span></a></span></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">+=</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>ltac2val</span></span> <span><span>:</span></span> <span><span>(</span></span> <a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole">ltac2_expr</span></a> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span><span class="prodn-row"><span class="prodn-cell-nonterminal"><code class="docutils literal notranslate"></code></span><span class="prodn-cell-op"><code class="docutils literal notranslate"><span class="pre">|</span></code></span><span class="prodn-cell-production"><span class="notation"><span><span>ltac2val</span></span> <span><span>:</span></span> <span><span>(</span></span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/core/basic.html#grammar-token-ident"><span class="hole">ident</span></a></span><span class="notation-sup">+</span></span> |<span><span>-</span></span> <a class="reference internal" href="#grammar-token-ltac2_expr"><span class="hole">ltac2_expr</span></a> <span><span>)</span></span></span></span><span class="prodn-cell-tag"><code class="docutils literal notranslate"></code></span></span></span></span><p>It has the same typing rules as <code class="docutils literal notranslate"><span class="pre">ltac2:()</span></code> except the expression must have type <code class="docutils literal notranslate"><span class="pre">Ltac2.Ltac1.t</span></code>.</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span></span><span class="coqdoc-keyword">Import</span><span> </span><span class="coqdoc-var">Constr.Unsafe</span><span>.</span><span>
</span></dt><dt><span></span><span>
</span><span class="coqdoc-keyword">Ltac</span><span> </span><span class="coqdoc-var">add1</span><span> </span><span class="coqdoc-var">x</span><span> :=</span><span>
  </span><span class="coqdoc-keyword">let</span><span> </span><span class="coqdoc-var">f</span><span> := </span><span class="coqdoc-var">ltac2val</span><span>:(</span><span class="coqdoc-var">Ltac1.lambda</span><span> (</span><span class="coqdoc-keyword">fun</span><span> </span><span class="coqdoc-var">y</span><span> =&gt;</span><span>
    </span><span class="coqdoc-keyword">let</span><span> </span><span class="coqdoc-var">y</span><span> := </span><span class="coqdoc-var">Option.get</span><span> (</span><span class="coqdoc-var">Ltac1.to_constr</span><span> </span><span class="coqdoc-var">y</span><span>) </span><span class="coqdoc-tactic">in</span><span>
    </span><span class="coqdoc-keyword">let</span><span> </span><span class="coqdoc-var">y</span><span> := </span><span class="coqdoc-var">make</span><span> (</span><span class="coqdoc-var">App</span><span> </span><span class="coqdoc-keyword">constr</span><span>:(</span><span class="coqdoc-var">S</span><span>) [|</span><span class="coqdoc-var">y</span><span>|]) </span><span class="coqdoc-tactic">in</span><span>
    </span><span class="coqdoc-var">Ltac1.of_constr</span><span> </span><span class="coqdoc-var">y</span><span>))</span><span>
  </span><span class="coqdoc-tactic">in</span><span>
  </span><span class="coqdoc-var">f</span><span> </span><span class="coqdoc-var">x</span><span>.</span><span>
</span></dt><dd><span>add1 is defined
</span></dd>
<dt><span></span><span>
</span><span class="coqdoc-keyword">Goal</span><span> </span><span class="coqdoc-var">True</span><span>.</span><span>
</span></dt><dd><span>1 goal
  
  ============================
  True
</span></dd>
<dt><span>  </span><span class="coqdoc-keyword">let</span><span> </span><span class="coqdoc-var">z</span><span> := </span><span class="coqdoc-keyword">constr</span><span>:(0) </span><span class="coqdoc-tactic">in</span><span>
  </span><span class="coqdoc-keyword">let</span><span> </span><span class="coqdoc-var">v</span><span> := </span><span class="coqdoc-var">add1</span><span> </span><span class="coqdoc-var">z</span><span> </span><span class="coqdoc-tactic">in</span><span>
  </span><span class="coqdoc-tactic">idtac</span><span> </span><span class="coqdoc-var">v</span><span>.</span><span>
</span></dt><dd><span>1
</span></dd>
<dt><span></span><span class="coqdoc-keyword">Abort</span><span>.</span><span>
</span></dt></dl>
</div>
</section>
<section id="switching-between-ltac-languages">
<h3>Switching between Ltac languages<a class="headerlink" href="#switching-between-ltac-languages" title="Permalink to this headline">¶</a></h3>
<p>We recommend using the <a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#coq:opt.Default-Proof-Mode" title="Default Proof Mode"><code class="xref coq coq-opt docutils literal notranslate"><span class="pre">Default</span> <span class="pre">Proof</span> <span class="pre">Mode</span></code></a> option or the <a class="reference internal" href="../proofs/writing-proofs/proof-mode.html#coq:cmd.Proof-Mode" title="Proof Mode"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Proof</span> <span class="pre">Mode</span></code></a>
command to switch between tactic languages.  The option has proof-level
granularity while the command has <a class="reference internal" href="../language/core/basic.html#term-sentence"><span class="xref std std-term">sentence</span></a>-level granularity. This
allows incrementally porting proof scripts.</p>
</section>
</section>
<section id="transition-from-ltac1">
<h2>Transition from Ltac1<a class="headerlink" href="#transition-from-ltac1" title="Permalink to this headline">¶</a></h2>
<p>Owing to the use of a lot of notations, the transition should not be too
difficult. In particular, it should be possible to do it incrementally. That
said, we do <em>not</em> guarantee it will be a blissful walk either.
Hopefully, owing to the fact Ltac2 is typed, the interactive dialogue with Coq
will help you.</p>
<p>We list the major changes and the transition strategies hereafter.</p>
<section id="syntax-changes">
<h3>Syntax changes<a class="headerlink" href="#syntax-changes" title="Permalink to this headline">¶</a></h3>
<p>Due to conflicts, a few syntactic rules have changed.</p>
<ul class="simple">
<li><p>The dispatch tactical <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">tac;</span></span></span> <span><span><span class="pre">[foo</span></span></span><span class="pre">|</span><span><span><span class="pre">bar]</span></span></span></span></code> is now written <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">tac</span></span></span> <span><span><span class="pre">&gt;</span></span></span> <span><span><span class="pre">[foo</span></span></span><span class="pre">|</span><span><span><span class="pre">bar]</span></span></span></span></code>.</p></li>
<li><p>Levels of a few operators have been revised. Some tacticals now parse as if
they were normal functions. Parentheses are now required around complex
arguments, such as abstractions. The tacticals affected are:
<code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">try</span></span></span></span></code>, <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">repeat</span></span></span></span></code>, <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">do</span></span></span></span></code>, <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">once</span></span></span></span></code>, <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">progress</span></span></span></span></code>, <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">time</span></span></span></span></code>, <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">abstract</span></span></span></span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">idtac</span></span></span></span></code> is no more. Either use <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">()</span></span></span></span></code> if you expect nothing to happen,
<code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">(fun</span></span></span> <span><span><span class="pre">()</span></span></span> <span><span><span class="pre">=&gt;</span></span></span> <span><span><span class="pre">())</span></span></span></span></code> if you want a thunk (see next section), or use printing
primitives from the <code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Message</span></span></span></span></code> module if you want to display something.</p></li>
</ul>
</section>
<section id="tactic-delay">
<h3>Tactic delay<a class="headerlink" href="#tactic-delay" title="Permalink to this headline">¶</a></h3>
<p>Tactics are not magically delayed anymore, neither as functions nor as
arguments. It is your responsibility to thunk them beforehand and apply them
at the call site.</p>
<p>A typical example of a delayed function:</p>
<p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Ltac</span></span></span> <span><span><span class="pre">foo</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">blah.</span></span></span></span></code></p>
<p>becomes</p>
<p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">foo</span></span></span> <span><span><span class="pre">()</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">blah.</span></span></span></span></code></p>
<p>All subsequent calls to <code class="docutils literal notranslate"><span class="pre">foo</span></code> must be applied to perform the same effect as
before.</p>
<p>Likewise, for arguments:</p>
<p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Ltac</span></span></span> <span><span><span class="pre">bar</span></span></span> <span><span><span class="pre">tac</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">tac;</span></span></span> <span><span><span class="pre">tac;</span></span></span> <span><span><span class="pre">tac.</span></span></span></span></code></p>
<p>becomes</p>
<p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">bar</span></span></span> <span><span><span class="pre">tac</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">tac</span></span></span> <span><span><span class="pre">();</span></span></span> <span><span><span class="pre">tac</span></span></span> <span><span><span class="pre">();</span></span></span> <span><span><span class="pre">tac</span></span></span> <span><span><span class="pre">().</span></span></span></span></code></p>
<p>We recommend the use of syntactic notations to ease the transition. For
instance, the first example can alternatively be written as:</p>
<p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">foo0</span></span></span> <span><span><span class="pre">()</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">blah.</span></span></span></span></code>
<code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">Notation</span></span></span> <span><span><span class="pre">foo</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">foo0</span></span></span> <span><span><span class="pre">().</span></span></span></span></code></p>
<p>This allows to keep the subsequent calls to the tactic as-is, as the
expression <code class="docutils literal notranslate"><span class="pre">foo</span></code> will be implicitly expanded everywhere into <code class="docutils literal notranslate"><span class="pre">foo0</span> <span class="pre">()</span></code>. Such
a trick also works for arguments, as arguments of syntactic notations are
implicitly thunked. The second example could thus be written as follows.</p>
<p><code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">bar0</span></span></span> <span><span><span class="pre">tac</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">tac</span></span></span> <span><span><span class="pre">();</span></span></span> <span><span><span class="pre">tac</span></span></span> <span><span><span class="pre">();</span></span></span> <span><span><span class="pre">tac</span></span></span> <span><span><span class="pre">().</span></span></span></span></code>
<code class="docutils literal notranslate"><span class="notation"><span><span><span class="pre">Ltac2</span></span></span> <span><span><span class="pre">Notation</span></span></span> <span><span><span class="pre">bar</span></span></span> <span><span><span class="pre">:=</span></span></span> <span><span><span class="pre">bar0.</span></span></span></span></code></p>
</section>
<section id="variable-binding">
<h3>Variable binding<a class="headerlink" href="#variable-binding" title="Permalink to this headline">¶</a></h3>
<p>Ltac1 relies on complex dynamic trickery to be able to tell apart bound
variables from terms, hypotheses, etc. There is no such thing in Ltac2,
as variables are recognized statically and other constructions do not live in
the same syntactic world. Due to the abuse of quotations, it can sometimes be
complicated to know what a mere identifier represents in a tactic expression. We
recommend tracking the context and letting the compiler print typing errors to
understand what is going on.</p>
<p>We list below the typical changes one has to perform depending on the static
errors produced by the typechecker.</p>
<section id="in-ltac-expressions">
<h4>In Ltac expressions<a class="headerlink" href="#in-ltac-expressions" title="Permalink to this headline">¶</a></h4>
<dl class="coq exn">
<dt class="sig sig-object coq" id="coq:exn.Unbound-[value|constructor]-X">
<em class="property"><span class="sigannot"><span class="pre">Error</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">Unbound</span></span></span> <span class="alternative"><span class="alternative-block"><span><span><span class="pre">value</span></span></span></span><span class="alternative-separator"><span class="pre">​</span></span><span class="alternative-block"><span><span><span class="pre">constructor</span></span></span></span></span> <span><span><span class="pre">X</span></span></span></span></span><a class="headerlink" href="#coq:exn.Unbound-[value|constructor]-X" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>if <code class="docutils literal notranslate"><span class="pre">X</span></code> is meant to be a term from the current static environment, replace
the problematic use by <code class="docutils literal notranslate"><span class="pre">'X</span></code>.</p></li>
<li><p>if <code class="docutils literal notranslate"><span class="pre">X</span></code> is meant to be a hypothesis from the local context, replace the
problematic use by <code class="docutils literal notranslate"><span class="pre">&amp;X</span></code>.</p></li>
</ul>
</dd></dl>

</section>
<section id="in-quotations">
<h4>In quotations<a class="headerlink" href="#in-quotations" title="Permalink to this headline">¶</a></h4>
<dl class="coq exn">
<dt class="sig sig-object coq" id="coq:exn.The-reference-X-was-not-found-in-the-current-environment">
<em class="property"><span class="sigannot"><span class="pre">Error</span></span></em> <span class="sig-name descname"><span class="notation"><span><span><span class="pre">The</span></span></span> <span><span><span class="pre">reference</span></span></span> <span><span><span class="pre">X</span></span></span> <span><span><span class="pre">was</span></span></span> <span><span><span class="pre">not</span></span></span> <span><span><span class="pre">found</span></span></span> <span><span><span class="pre">in</span></span></span> <span><span><span class="pre">the</span></span></span> <span><span><span class="pre">current</span></span></span> <span><span><span class="pre">environment</span></span></span></span></span><a class="headerlink" href="#coq:exn.The-reference-X-was-not-found-in-the-current-environment" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li><p>if <code class="docutils literal notranslate"><span class="pre">X</span></code> is meant to be a tactic expression bound by a Ltac2 let or function,
replace the problematic use by <code class="docutils literal notranslate"><span class="pre">$X</span></code>.</p></li>
<li><p>if <code class="docutils literal notranslate"><span class="pre">X</span></code> is meant to be a hypothesis from the local context, replace the
problematic use by <code class="docutils literal notranslate"><span class="pre">&amp;X</span></code>.</p></li>
</ul>
</dd></dl>

</section>
</section>
<section id="exception-catching">
<h3>Exception catching<a class="headerlink" href="#exception-catching" title="Permalink to this headline">¶</a></h3>
<p>Ltac2 features a proper exception-catching mechanism. For this reason, the
Ltac1 mechanism relying on <code class="docutils literal notranslate"><span class="pre">fail</span></code> taking integers, and tacticals decreasing it,
has been removed. Now exceptions are preserved by all tacticals, and it is
your duty to catch them and re-raise them as needed.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ltac.html" class="btn btn-neutral float-left" title="Ltac" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../using/libraries/index.html" class="btn btn-neutral float-right" title="Libraries and plugins" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 1999-2021, Inria, CNRS and contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  




  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Other versions</span>
      v: 8.18.0
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="https://coq.github.io/doc/master/refman/">dev</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/current/refman/">stable</a></dd>
        
          <dd><a href="https://coq.github.io/doc/v8.18/refman/">8.18</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.17.1/refman/">8.17</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.16.1/refman/">8.16</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.15.2/refman/">8.15</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.14.1/refman/">8.14</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.13.2/refman/">8.13</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.12.2/refman/">8.12</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.11.2/refman/">8.11</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.10.2/refman/">8.10</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.9.1/refman/">8.9</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.8.2/refman/">8.8</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.7.2/refman/">8.7</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.6.1/refman/">8.6</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.5pl3/refman/">8.5</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.4pl6/refman/">8.4</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.3pl5/refman/">8.3</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.2pl3/refman/">8.2</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.1pl6/refman/">8.1</a></dd>
        
          <dd><a href="https://coq.inria.fr/distrib/V8.0/doc/">8.0</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="https://github.com/coq/coq/releases/download/V8.18.0/coq-8.18.0-reference-manual.pdf">PDF</a></dd>
        
      </dl>
    </div>
  </div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>